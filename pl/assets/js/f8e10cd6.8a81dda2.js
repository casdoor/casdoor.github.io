"use strict";(self.webpackChunkcasdoor_website=self.webpackChunkcasdoor_website||[]).push([[7575],{3905:(e,t,o)=>{o.d(t,{Zo:()=>s,kt:()=>u});var a=o(67294);function n(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function i(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,a)}return o}function r(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?i(Object(o),!0).forEach((function(t){n(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function l(e,t){if(null==e)return{};var o,a,n=function(e,t){if(null==e)return{};var o,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)o=i[a],t.indexOf(o)>=0||(n[o]=e[o]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)o=i[a],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}var p=a.createContext({}),h=function(e){var t=a.useContext(p),o=t;return e&&(o="function"==typeof e?e(t):r(r({},t),e)),o},s=function(e){var t=h(e.components);return a.createElement(p.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var o=e.components,n=e.mdxType,i=e.originalType,p=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),c=h(o),u=n,m=c["".concat(p,".").concat(u)]||c[u]||d[u]||i;return o?a.createElement(m,r(r({ref:t},s),{},{components:o})):a.createElement(m,r({ref:t},s))}));function u(e,t){var o=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var i=o.length,r=new Array(i);r[0]=c;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l.mdxType="string"==typeof e?e:n,r[1]=l;for(var h=2;h<i;h++)r[h]=o[h];return a.createElement.apply(null,r)}return a.createElement.apply(null,o)}c.displayName="MDXCreateElement"},95940:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>p,contentTitle:()=>r,default:()=>d,frontMatter:()=>i,metadata:()=>l,toc:()=>h});var a=o(87462),n=(o(67294),o(3905));const i={title:"WeChat",description:"Add WeChat OAuth provider to your application",keywords:["WeChat","OAuth"],authors:["Marvelousp4"]},r=void 0,l={unversionedId:"provider/oauth/Wechat",id:"provider/oauth/Wechat",title:"WeChat",description:"Add WeChat OAuth provider to your application",source:"@site/docs/provider/oauth/Wechat.md",sourceDirName:"provider/oauth",slug:"/provider/oauth/Wechat",permalink:"/pl/docs/provider/oauth/Wechat",draft:!1,editUrl:"https://github.com/casdoor/casdoor-website/edit/master/docs/provider/oauth/Wechat.md",tags:[],version:"current",frontMatter:{title:"WeChat",description:"Add WeChat OAuth provider to your application",keywords:["WeChat","OAuth"],authors:["Marvelousp4"]},sidebar:"tutorialSidebar",previous:{title:"Weibo",permalink:"/pl/docs/provider/oauth/Weibo"},next:{title:"WeCom",permalink:"/pl/docs/provider/oauth/weCom"}},p={},h=[{value:"WeChat \u2714\ufe0f",id:"wechat-\ufe0f",level:2},{value:"Add WeChat OAuth Provider",id:"add-wechat-oauth-provider",level:2},{value:"Enable WeChat QR Code Login",id:"enable-wechat-qr-code-login",level:2}],s={toc:h};function d(e){let{components:t,...i}=e;return(0,n.kt)("wrapper",(0,a.Z)({},s,i,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h2",{id:"wechat-\ufe0f"},"WeChat \u2714\ufe0f"),(0,n.kt)("h2",{id:"add-wechat-oauth-provider"},"Add WeChat OAuth Provider"),(0,n.kt)("p",null,"To add WeChat OAuth provider to your application, follow these steps:"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Visit the ",(0,n.kt)("a",{parentName:"li",href:"https://open.weixin.qq.com/"},"WeChat developer platform")," and register as a developer."),(0,n.kt)("li",{parentName:"ol"},"After your web application or mobile application is approved, you will receive your App ID and App Secret.")),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"wechat",src:o(25193).Z,width:"758",height:"743"})),(0,n.kt)("p",null,"When configuring the WeChat provider, you can select a ",(0,n.kt)("strong",{parentName:"p"},"SubType")," to match your login scenario:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Web")," (default): For PC browser login with QR code scanning"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Mobile"),": For mobile login within WeChat's built-in browser using OAuth authorization")),(0,n.kt)("p",null,"Both SubTypes use the same credentials but different OAuth endpoints. If you need both PC and mobile login, create two separate WeChat providers with different SubTypes."),(0,n.kt)("p",null,"The WeChat provider offers two different sets of keypairs:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The first keypair (",(0,n.kt)("inlineCode",{parentName:"p"},"Client ID"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"Client Secret"),") is for the ",(0,n.kt)("inlineCode",{parentName:"p"},"WeChat Open Platform (\u5fae\u4fe1\u5f00\u653e\u5e73\u53f0)")," and is designed for the PC login scenario. It allows you to display a QR code in the PC browser, which users can scan using the WeChat app on their mobile phone to sign in.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The second keypair (",(0,n.kt)("inlineCode",{parentName:"p"},"Client ID 2"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"Client Secret 2"),") and ",(0,n.kt)("inlineCode",{parentName:"p"},"Access Token")," field is for the ",(0,n.kt)("inlineCode",{parentName:"p"},"WeChat Media Platform (\u5fae\u4fe1\u516c\u4f17\u5e73\u53f0)")," and is intended for the inside-WeChat-app login scenario.",(0,n.kt)("inlineCode",{parentName:"p"},"Access Token")," field is the ",(0,n.kt)("inlineCode",{parentName:"p"},"Token")," you fill in the ",(0,n.kt)("inlineCode",{parentName:"p"},"server configuration")," of the ",(0,n.kt)("inlineCode",{parentName:"p"},"WeChat Media Platform (\u5fae\u4fe1\u516c\u4f17\u5e73\u53f0)"),". It enables users to log in with the WeChat built-in browser inside the WeChat mobile app, which will redirect them to your ",(0,n.kt)("inlineCode",{parentName:"p"},"WeChat Official Account (\u5fae\u4fe1\u516c\u4f17\u53f7)")," to log in. Please note that WeChat does not support logging in outside of the WeChat app in other mobile browsers or apps. This limitation is imposed by WeChat and not by Casdoor."))),(0,n.kt)("p",null,"If you fill in the second keypair (",(0,n.kt)("inlineCode",{parentName:"p"},"Client ID 2"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"Client Secret 2"),"), fill the ",(0,n.kt)("inlineCode",{parentName:"p"},"Access Token")," field and enable the ",(0,n.kt)("inlineCode",{parentName:"p"},"Enable QR code")," switch, then you can choose to login directly using the information from the  ",(0,n.kt)("inlineCode",{parentName:"p"},"WeChat Media Platform (\u5fae\u4fe1\u516c\u4f17\u5e73\u53f0)")," after scanning the QR code, or use the information from the ",(0,n.kt)("inlineCode",{parentName:"p"},"WeChat Open Platform (\u5fae\u4fe1\u5f00\u653e\u5e73\u53f0)")," to login, if you choose ",(0,n.kt)("inlineCode",{parentName:"p"},"use Wechat Open Platform to login"),",after user follow the the WeChat official account (\u5fae\u4fe1\u516c\u4f17\u53f7), users will be required to scan the QR code of ",(0,n.kt)("inlineCode",{parentName:"p"},"WeChat Open Platform (\u5fae\u4fe1\u5f00\u653e\u5e73\u53f0)"),"to login. Casdoor will ask the user to follow the WeChat official account (\u5fae\u4fe1\u516c\u4f17\u53f7) before proceeding with the login process when the user clicks on the WeChat button to login. It's important to note that this functionality is only available in the PC login scenario because a mobile phone cannot scan the QR code by itself. When used in the mobile scenario (i.e., the WeChat built-in browser inside the WeChat mobile app), Casdoor will automatically skip this step."),(0,n.kt)("p",null,'You can choose whether to enable the WeChat QR code login option on the setting page. To do so, add the WeChat provider in your application configuration and add the WeChat option in your signin methods. Once added, the login page will display a "WeChat" tab as a login option, allowing users to log in by scanning the QR code.'),(0,n.kt)("p",null,"The QR code login process is as follows:"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},'On the login page, after selecting the "WeChat" tab, a WeChat QR code will be automatically loaded and displayed.'),(0,n.kt)("li",{parentName:"ol"},"The user scans the QR code using the WeChat app and completes the authorization to log in."),(0,n.kt)("li",{parentName:"ol"},'If the QR code expires or needs to be refreshed, the user can click the "Refresh" link below the QR code to obtain a new one.')),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"set-wechat",src:o(52006).Z,width:"2686",height:"654"})),(0,n.kt)("admonition",{type:"tip"},(0,n.kt)("p",{parentName:"admonition"},"We recommend setting both key sets at the same time and linking your ",(0,n.kt)("inlineCode",{parentName:"p"},"WeChat Open Platform (\u5fae\u4fe1\u5f00\u653e\u5e73\u53f0)")," account and ",(0,n.kt)("inlineCode",{parentName:"p"},"WeChat Media Platform (\u5fae\u4fe1\u516c\u4f17\u5e73\u53f0)")," account together inside the ",(0,n.kt)("inlineCode",{parentName:"p"},"WeChat Open Platform (\u5fae\u4fe1\u5f00\u653e\u5e73\u53f0)"),". This will allow Casdoor to recognize a WeChat user logged in through both PC and mobile as the same user.")),(0,n.kt)("admonition",{type:"note"},(0,n.kt)("p",{parentName:"admonition"},"Due to the limitations of WeChat OAuth, there is currently no way to log in via WeChat in a third-party mobile app or in a mobile browser other than the WeChat app. The mobile login must happen inside the WeChat app for now.")),(0,n.kt)("p",null,"For more detailed information, please visit the ",(0,n.kt)("a",{parentName:"p",href:"https://developers.weixin.qq.com/doc/oplatform/en/Website_App/WeChat_Login/Wechat_Login.html"},"WeChat Open Platform"),"."),(0,n.kt)("h2",{id:"enable-wechat-qr-code-login"},"Enable WeChat QR Code Login"),(0,n.kt)("p",null,'You can choose whether to enable the WeChat QR code login option on the setting page. To do so, add the WeChat provider in your application configuration and add the WeChat option in your signin methods. Once added, the login page will display a "WeChat" tab as a login option, allowing users to log in by scanning the QR code.'),(0,n.kt)("p",null,"The QR code login process is as follows:"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},'On the login page, after selecting the "WeChat" tab, a WeChat QR code will be automatically loaded and displayed.'),(0,n.kt)("li",{parentName:"ol"},"The user scans the QR code using the WeChat app and completes the authorization to log in."),(0,n.kt)("li",{parentName:"ol"},'If the QR code expires or needs to be refreshed, the user can click the "Refresh" link below the QR code to obtain a new one.')),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"set-wechat",src:o(52006).Z,width:"2686",height:"654"})),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"wechat-login",src:o(25770).Z,width:"2818",height:"1670"})))}d.isMDXComponent=!0},52006:(e,t,o)=>{o.d(t,{Z:()=>a});const a=o.p+"assets/images/set-wechat-68705afad4a0d4c3363acb4f8534f89c.png"},25770:(e,t,o)=>{o.d(t,{Z:()=>a});const a=o.p+"assets/images/wechat-login-d00b08d0cbe75917e66ddcd008f0d9ca.png"},25193:(e,t,o)=>{o.d(t,{Z:()=>a});const a=o.p+"assets/images/wechat-9469975486def005fd6967a51639b239.png"}}]);