"use strict";(self.webpackChunkcasdoor_website=self.webpackChunkcasdoor_website||[]).push([[2539],{3905:(e,n,t)=>{t.d(n,{Zo:()=>d,kt:()=>m});var r=t(67294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var l=r.createContext({}),c=function(e){var n=r.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):s(s({},n),e)),t},d=function(e){var n=c(e.components);return r.createElement(l.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},p=r.forwardRef((function(e,n){var t=e.components,o=e.mdxType,a=e.originalType,l=e.parentName,d=i(e,["components","mdxType","originalType","parentName"]),p=c(t),m=o,k=p["".concat(l,".").concat(m)]||p[m]||u[m]||a;return t?r.createElement(k,s(s({ref:n},d),{},{components:t})):r.createElement(k,s({ref:n},d))}));function m(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var a=t.length,s=new Array(a);s[0]=p;var i={};for(var l in n)hasOwnProperty.call(n,l)&&(i[l]=n[l]);i.originalType=e,i.mdxType="string"==typeof e?e:o,s[1]=i;for(var c=2;c<a;c++)s[c]=t[c];return r.createElement.apply(null,s)}return r.createElement.apply(null,t)}p.displayName="MDXCreateElement"},85162:(e,n,t)=>{t.d(n,{Z:()=>s});var r=t(67294),o=t(86010);const a="tabItem_Ymn6";function s(e){let{children:n,hidden:t,className:s}=e;return r.createElement("div",{role:"tabpanel",className:(0,o.Z)(a,s),hidden:t},n)}},74866:(e,n,t)=>{t.d(n,{Z:()=>N});var r=t(87462),o=t(67294),a=t(86010),s=t(12466),i=t(76775),l=t(91980),c=t(67392),d=t(50012);function u(e){return function(e){var n;return(null==(n=o.Children.map(e,(e=>{if(!e||(0,o.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})))?void 0:n.filter(Boolean))??[]}(e).map((e=>{let{props:{value:n,label:t,attributes:r,default:o}}=e;return{value:n,label:t,attributes:r,default:o}}))}function p(e){const{values:n,children:t}=e;return(0,o.useMemo)((()=>{const e=n??u(t);return function(e){const n=(0,c.l)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function m(e){let{value:n,tabValues:t}=e;return t.some((e=>e.value===n))}function k(e){let{queryString:n=!1,groupId:t}=e;const r=(0,i.k6)(),a=function(e){let{queryString:n=!1,groupId:t}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:n,groupId:t});return[(0,l._X)(a),(0,o.useCallback)((e=>{if(!a)return;const n=new URLSearchParams(r.location.search);n.set(a,e),r.replace({...r.location,search:n.toString()})}),[a,r])]}function f(e){const{defaultValue:n,queryString:t=!1,groupId:r}=e,a=p(e),[s,i]=(0,o.useState)((()=>function(e){let{defaultValue:n,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!m({value:n,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const r=t.find((e=>e.default))??t[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:n,tabValues:a}))),[l,c]=k({queryString:t,groupId:r}),[u,f]=function(e){let{groupId:n}=e;const t=function(e){return e?`docusaurus.tab.${e}`:null}(n),[r,a]=(0,d.Nk)(t);return[r,(0,o.useCallback)((e=>{t&&a.set(e)}),[t,a])]}({groupId:r}),y=(()=>{const e=l??u;return m({value:e,tabValues:a})?e:null})();(0,o.useLayoutEffect)((()=>{y&&i(y)}),[y]);return{selectedValue:s,selectValue:(0,o.useCallback)((e=>{if(!m({value:e,tabValues:a}))throw new Error(`Can't select invalid tab value=${e}`);i(e),c(e),f(e)}),[c,f,a]),tabValues:a}}var y=t(72389);const g="tabList__CuJ",h="tabItem_LNqP";function v(e){let{className:n,block:t,selectedValue:i,selectValue:l,tabValues:c}=e;const d=[],{blockElementScrollPositionUntilNextRender:u}=(0,s.o5)(),p=e=>{const n=e.currentTarget,t=d.indexOf(n),r=c[t].value;r!==i&&(u(n),l(r))},m=e=>{var n;let t=null;switch(e.key){case"Enter":p(e);break;case"ArrowRight":{const n=d.indexOf(e.currentTarget)+1;t=d[n]??d[0];break}case"ArrowLeft":{const n=d.indexOf(e.currentTarget)-1;t=d[n]??d[d.length-1];break}}null==(n=t)||n.focus()};return o.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.Z)("tabs",{"tabs--block":t},n)},c.map((e=>{let{value:n,label:t,attributes:s}=e;return o.createElement("li",(0,r.Z)({role:"tab",tabIndex:i===n?0:-1,"aria-selected":i===n,key:n,ref:e=>d.push(e),onKeyDown:m,onClick:p},s,{className:(0,a.Z)("tabs__item",h,null==s?void 0:s.className,{"tabs__item--active":i===n})}),t??n)})))}function b(e){let{lazy:n,children:t,selectedValue:r}=e;const a=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){const e=a.find((e=>e.props.value===r));return e?(0,o.cloneElement)(e,{className:"margin-top--md"}):null}return o.createElement("div",{className:"margin-top--md"},a.map(((e,n)=>(0,o.cloneElement)(e,{key:n,hidden:e.props.value!==r}))))}function w(e){const n=f(e);return o.createElement("div",{className:(0,a.Z)("tabs-container",g)},o.createElement(v,(0,r.Z)({},e,n)),o.createElement(b,(0,r.Z)({},e,n)))}function N(e){const n=(0,y.Z)();return o.createElement(w,(0,r.Z)({key:String(n)},e))}},31189:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>m,frontMatter:()=>i,metadata:()=>c,toc:()=>u});var r=t(87462),o=(t(67294),t(3905)),a=t(74866),s=t(85162);const i={title:"Deploying to Docker",description:"Deploying Casdoor with Docker",keywords:["Docker","Docker Compose","Traefik","Nginx","Caddy"],authors:["BeardedTek"]},l=void 0,c={unversionedId:"deployment/docker",id:"deployment/docker",title:"Deploying to Docker",description:"Deploying Casdoor with Docker",source:"@site/i18n/th/docusaurus-plugin-content-docs/current/deployment/docker.mdx",sourceDirName:"deployment",slug:"/deployment/docker",permalink:"/th/docs/deployment/docker",draft:!1,editUrl:"https://github.com/casdoor/casdoor-website/edit/master/docs/deployment/docker.mdx",tags:[],version:"current",frontMatter:{title:"Deploying to Docker",description:"Deploying Casdoor with Docker",keywords:["Docker","Docker Compose","Traefik","Nginx","Caddy"],authors:["BeardedTek"]},sidebar:"tutorialSidebar",previous:{title:"Deployment",permalink:"/th/docs/category/deployment"},next:{title:"\u0e01\u0e32\u0e23\u0e1b\u0e23\u0e31\u0e1a\u0e43\u0e0a\u0e49\u0e01\u0e31\u0e1a NGINX",permalink:"/th/docs/deployment/nginx"}},d={},u=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Docker Deployment Methods",id:"docker-deployment-methods",level:2},{value:"Using Docker Compose",id:"using-docker-compose",level:3},{value:"Using Docker Run",id:"using-docker-run",level:3},{value:"Reverse Proxy Configuration",id:"reverse-proxy-configuration",level:2},{value:"Traefik with Docker Labels",id:"traefik-with-docker-labels",level:3},{value:"Traefik with Dynamic Configuration",id:"traefik-with-dynamic-configuration",level:3},{value:"Nginx with Let&#39;s Encrypt",id:"nginx-with-lets-encrypt",level:3},{value:"Caddy with Automatic HTTPS",id:"caddy-with-automatic-https",level:3},{value:"Configuration",id:"configuration",level:2},{value:"Create the necessary configuration directories",id:"create-the-necessary-configuration-directories",level:3},{value:"Download the Casdoor configuration files",id:"download-the-casdoor-configuration-files",level:3},{value:"Edit <code>conf/app.conf</code> to match your environment settings",id:"edit-confappconf-to-match-your-environment-settings",level:3},{value:"Testing",id:"testing",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Check container logs",id:"check-container-logs",level:3},{value:"Verify reverse proxy configuration",id:"verify-reverse-proxy-configuration",level:3},{value:"SSL Certificate Issues",id:"ssl-certificate-issues",level:3}],p={toc:u};function m(e){let{components:n,...t}=e;return(0,o.kt)("wrapper",(0,r.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"In this chapter, you will learn how to deploy Casdoor using Docker and Docker Compose with various reverse proxy configurations."),(0,o.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,o.kt)("p",null,"Before starting, ensure you have:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Docker installed on your system"),(0,o.kt)("li",{parentName:"ul"},"Docker Compose installed (for compose method)"),(0,o.kt)("li",{parentName:"ul"},"A domain name pointing to your server (for reverse proxy configurations)")),(0,o.kt)("h2",{id:"docker-deployment-methods"},"Docker Deployment Methods"),(0,o.kt)("p",null,"Choose your preferred deployment method:"),(0,o.kt)(a.Z,{defaultValue:"docker-compose",values:[{label:"Docker Compose",value:"docker-compose"},{label:"Docker Run",value:"docker-run"}],mdxType:"Tabs"},(0,o.kt)(s.Z,{value:"docker-compose",mdxType:"TabItem"},(0,o.kt)("h3",{id:"using-docker-compose"},"Using Docker Compose"),(0,o.kt)("p",null,"Create a ",(0,o.kt)("inlineCode",{parentName:"p"},"docker-compose.yml")," file:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},'services:\n  casdoor:\n    image: casbin/casdoor:latest\n    container_name: casdoor\n    restart: unless-stopped\n    ports:\n      - "8000:8000"\n    environment:\n      - GIN_MODE=release\n    volumes:\n      - ./conf:/conf\n      - ./logs:/logs\n    networks:\n      - casdoor-network\n\nnetworks:\n  casdoor-network:\n    driver: bridge\n')),(0,o.kt)("p",null,"Start the service:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"docker-compose up -d\n"))),(0,o.kt)(s.Z,{value:"docker-run",mdxType:"TabItem"},(0,o.kt)("h3",{id:"using-docker-run"},"Using Docker Run"),(0,o.kt)("p",null,"Run Casdoor directly with Docker:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"docker run -d \\\n  --name casdoor \\\n  --restart unless-stopped \\\n  -p 8000:8000 \\\n  -v $(pwd)/conf:/conf \\\n  -v $(pwd)/logs:/logs \\\n  -e GIN_MODE=release \\\n  casbin/casdoor:latest\n")))),(0,o.kt)("h2",{id:"reverse-proxy-configuration"},"Reverse Proxy Configuration"),(0,o.kt)("p",null,"For production deployments, it's recommended to use a reverse proxy with TLS certificates. Choose your preferred reverse proxy:"),(0,o.kt)(a.Z,{defaultValue:"traefik-labels",values:[{label:"Traefik (Labels)",value:"traefik-labels"},{label:"Traefik (Dynamic)",value:"traefik-dynamic"},{label:"Nginx",value:"nginx"},{label:"Caddy",value:"caddy"}],mdxType:"Tabs"},(0,o.kt)(s.Z,{value:"traefik-labels",mdxType:"TabItem"},(0,o.kt)("h3",{id:"traefik-with-docker-labels"},"Traefik with Docker Labels"),(0,o.kt)("p",null,"Create a ",(0,o.kt)("inlineCode",{parentName:"p"},"docker-compose.yml")," with Traefik labels:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},'services:\n  traefik:\n    image: traefik:v2.10\n    container_name: traefik\n    restart: unless-stopped\n    ports:\n      - "80:80"\n      - "443:443"\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock:ro\n      - ./traefik/acme.json:/acme.json\n    command:\n      - --api.dashboard=true\n      - --providers.docker=true\n      - --providers.docker.exposedbydefault=false\n      - --entrypoints.web.address=:80\n      - --entrypoints.websecure.address=:443\n      - --certificatesresolvers.letsencrypt.acme.email=your-email@example.com\n      - --certificatesresolvers.letsencrypt.acme.storage=/acme.json\n      - --certificatesresolvers.letsencrypt.acme.httpchallenge.entrypoint=web\n    networks:\n      - casdoor-network\n\n  casdoor:\n    image: casbin/casdoor:latest\n    container_name: casdoor\n    restart: unless-stopped\n    environment:\n      - GIN_MODE=release\n    volumes:\n      - ./conf:/conf\n      - ./logs:/logs\n    labels:\n      - "traefik.enable=true"\n      - "traefik.http.routers.casdoor.rule=Host(`your-domain.com`)"\n      - "traefik.http.routers.casdoor.entrypoints=websecure"\n      - "traefik.http.routers.casdoor.tls.certresolver=letsencrypt"\n      - "traefik.http.services.casdoor.loadbalancer.server.port=8000"\n    networks:\n      - casdoor-network\n\nnetworks:\n  casdoor-network:\n    driver: bridge\n')),(0,o.kt)("p",null,"Create the acme.json file:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"touch traefik/acme.json\nchmod 600 traefik/acme.json\n"))),(0,o.kt)(s.Z,{value:"traefik-dynamic",mdxType:"TabItem"},(0,o.kt)("h3",{id:"traefik-with-dynamic-configuration"},"Traefik with Dynamic Configuration"),(0,o.kt)("p",null,"Create a ",(0,o.kt)("inlineCode",{parentName:"p"},"docker-compose.yml")," with dynamic configuration:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},'services:\n  traefik:\n    image: traefik:v2.10\n    container_name: traefik\n    restart: unless-stopped\n    ports:\n      - "80:80"\n      - "443:443"\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock:ro\n      - ./traefik/acme.json:/acme.json\n      - ./traefik/traefik.yml:/etc/traefik/traefik.yml\n      - ./traefik/dynamic.yml:/etc/traefik/dynamic.yml\n    command:\n      - --configfile=/etc/traefik/traefik.yml\n    networks:\n      - casdoor-network\n\n  casdoor:\n    image: casbin/casdoor:latest\n    container_name: casdoor\n    restart: unless-stopped\n    environment:\n      - GIN_MODE=release\n    volumes:\n      - ./conf:/conf\n      - ./logs:/logs\n    networks:\n      - casdoor-network\n\nnetworks:\n  casdoor-network:\n    driver: bridge\n')),(0,o.kt)("p",null,"Create ",(0,o.kt)("inlineCode",{parentName:"p"},"traefik/traefik.yml"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},'api:\n  dashboard: true\n\nentryPoints:\n  web:\n    address: ":80"\n    http:\n      redirections:\n        entrypoint:\n          to: websecure\n          scheme: https\n  websecure:\n    address: ":443"\n\nproviders:\n  docker:\n    endpoint: "unix:///var/run/docker.sock"\n    exposedByDefault: false\n  file:\n    directory: /etc/traefik\n    watch: true\n\ncertificatesResolvers:\n  letsencrypt:\n    acme:\n      email: your-email@example.com\n      storage: /acme.json\n      httpChallenge:\n        entryPoint: web\n')),(0,o.kt)("p",null,"Create ",(0,o.kt)("inlineCode",{parentName:"p"},"traefik/dynamic.yml"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},'http:\n  routers:\n    casdoor:\n      rule: "Host(`your-domain.com`)"\n      service: casdoor\n      tls:\n        certResolver: letsencrypt\n      entryPoints:\n        - websecure\n\n  services:\n    casdoor:\n      loadBalancer:\n        servers:\n          - url: "http://casdoor:8000"\n'))),(0,o.kt)(s.Z,{value:"nginx",mdxType:"TabItem"},(0,o.kt)("h3",{id:"nginx-with-lets-encrypt"},"Nginx with Let's Encrypt"),(0,o.kt)("p",null,"Create a ",(0,o.kt)("inlineCode",{parentName:"p"},"docker-compose.yml")," with Nginx:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},'services:\n  nginx:\n    image: nginx:alpine\n    container_name: nginx\n    restart: unless-stopped\n    ports:\n      - "80:80"\n      - "443:443"\n    volumes:\n      - ./nginx/nginx.conf:/etc/nginx/nginx.conf\n      - ./nginx/conf.d:/etc/nginx/conf.d\n      - ./certbot/conf:/etc/letsencrypt\n      - ./certbot/www:/var/www/certbot\n    depends_on:\n      - casdoor\n    networks:\n      - casdoor-network\n\n  certbot:\n    image: certbot/certbot\n    container_name: certbot\n    volumes:\n      - ./certbot/conf:/etc/letsencrypt\n      - ./certbot/www:/var/www/certbot\n    command: certonly --webroot --webroot-path=/var/www/certbot --email your-email@example.com --agree-tos --no-eff-email -d your-domain.com\n\n  casdoor:\n    image: casbin/casdoor:latest\n    container_name: casdoor\n    restart: unless-stopped\n    environment:\n      - GIN_MODE=release\n    volumes:\n      - ./conf:/conf\n      - ./logs:/logs\n    networks:\n      - casdoor-network\n\nnetworks:\n  casdoor-network:\n    driver: bridge\n')),(0,o.kt)("p",null,"Create ",(0,o.kt)("inlineCode",{parentName:"p"},"nginx/conf.d/default.conf"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-nginx"},"server {\n    listen 80;\n    server_name your-domain.com;\n    \n    location /.well-known/acme-challenge/ {\n        root /var/www/certbot;\n    }\n    \n    location / {\n        return 301 https://$host$request_uri;\n    }\n}\n\nserver {\n    listen 443 ssl;\n    server_name your-domain.com;\n    \n    ssl_certificate /etc/letsencrypt/live/your-domain.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/your-domain.com/privkey.pem;\n    \n    location / {\n        proxy_pass http://casdoor:8000;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n    }\n}\n")),(0,o.kt)("p",null,"Initialize SSL certificates:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'# Create directories\nmkdir -p certbot/conf certbot/www nginx/conf.d\n\n# Get initial certificate\ndocker-compose run --rm certbot\n\n# Add to crontab for renewal\necho "0 12 * * * docker-compose run --rm certbot renew" | crontab -\n'))),(0,o.kt)(s.Z,{value:"caddy",mdxType:"TabItem"},(0,o.kt)("h3",{id:"caddy-with-automatic-https"},"Caddy with Automatic HTTPS"),(0,o.kt)("p",null,"Create a ",(0,o.kt)("inlineCode",{parentName:"p"},"docker-compose.yml")," with Caddy:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},'services:\n  caddy:\n    image: caddy:2-alpine\n    container_name: caddy\n    restart: unless-stopped\n    ports:\n      - "80:80"\n      - "443:443"\n    volumes:\n      - ./caddy/Caddyfile:/etc/caddy/Caddyfile\n      - caddy_data:/data\n      - caddy_config:/config\n    depends_on:\n      - casdoor\n    networks:\n      - casdoor-network\n\n  casdoor:\n    image: casbin/casdoor:latest\n    container_name: casdoor\n    restart: unless-stopped\n    environment:\n      - GIN_MODE=release\n    volumes:\n      - ./conf:/conf\n      - ./logs:/logs\n    networks:\n      - casdoor-network\n\nvolumes:\n  caddy_data:\n  caddy_config:\n\nnetworks:\n  casdoor-network:\n    driver: bridge\n')),(0,o.kt)("p",null,"Create ",(0,o.kt)("inlineCode",{parentName:"p"},"caddy/Caddyfile"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-caddyfile"},"your-domain.com {\n    reverse_proxy casdoor:8000 {\n        header_up Host {host}\n        header_up X-Real-IP {remote}\n        header_up X-Forwarded-For {remote}\n        header_up X-Forwarded-Proto {scheme}\n    }\n}\n")))),(0,o.kt)("h2",{id:"configuration"},"Configuration"),(0,o.kt)("h3",{id:"create-the-necessary-configuration-directories"},"Create the necessary configuration directories"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"mkdir -p conf logs\n")),(0,o.kt)("h3",{id:"download-the-casdoor-configuration-files"},"Download the Casdoor configuration files"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"wget https://raw.githubusercontent.com/casdoor/casdoor/master/conf/app.conf -O conf/app.conf\nwget https://raw.githubusercontent.com/casdoor/casdoor/master/init_data.json.template -O conf/init_data.json\n")),(0,o.kt)("h3",{id:"edit-confappconf-to-match-your-environment-settings"},"Edit ",(0,o.kt)("inlineCode",{parentName:"h3"},"conf/app.conf")," to match your environment settings"),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},"The default user of Casdoor has a uid and gid of 1000. When using volume mapping with SQLite (or any storage requiring file permissions), ensure that the path (e.g., ",(0,o.kt)("inlineCode",{parentName:"p"},"/folder/of/app.conf")," in the example above) is accessible to uid 1000. This avoids permission errors like ",(0,o.kt)("inlineCode",{parentName:"p"},"permission denied")," when Casdoor writes to mapped volumes.")),(0,o.kt)("h2",{id:"testing"},"Testing"),(0,o.kt)("p",null,"After deployment, visit your domain in your browser:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Docker Run/Compose only"),": ",(0,o.kt)("inlineCode",{parentName:"li"},"http://your-server-ip:8000")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"With Reverse Proxy"),": ",(0,o.kt)("inlineCode",{parentName:"li"},"https://your-domain.com"))),(0,o.kt)("h2",{id:"troubleshooting"},"Troubleshooting"),(0,o.kt)("h3",{id:"check-container-logs"},"Check container logs"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"# For docker-compose\ndocker-compose logs casdoor\n\n# For docker run\ndocker logs casdoor\n")),(0,o.kt)("h3",{id:"verify-reverse-proxy-configuration"},"Verify reverse proxy configuration"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"# Check if containers are running\ndocker ps\n\n# Test connectivity\ncurl -I http://localhost:8000\n")),(0,o.kt)("h3",{id:"ssl-certificate-issues"},"SSL Certificate Issues"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Ensure your domain points to the correct server IP"),(0,o.kt)("li",{parentName:"ul"},"Check that ports 80 and 443 are open in your firewall"),(0,o.kt)("li",{parentName:"ul"},"Verify DNS propagation with ",(0,o.kt)("inlineCode",{parentName:"li"},"nslookup your-domain.com"))))}m.isMDXComponent=!0}}]);