"use strict";(self.webpackChunkcasdoor_website=self.webpackChunkcasdoor_website||[]).push([[2236],{3905:(e,t,r)=>{r.d(t,{Zo:()=>u,kt:()=>m});var n=r(67294);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var p=n.createContext({}),s=function(e){var t=n.useContext(p),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},u=function(e){var t=s(e.components);return n.createElement(p.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var r=e.components,o=e.mdxType,a=e.originalType,p=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),d=s(r),m=o,f=d["".concat(p,".").concat(m)]||d[m]||c[m]||a;return r?n.createElement(f,i(i({ref:t},u),{},{components:r})):n.createElement(f,i({ref:t},u))}));function m(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=r.length,i=new Array(a);i[0]=d;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l.mdxType="string"==typeof e?e:o,i[1]=l;for(var s=2;s<a;s++)i[s]=r[s];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}d.displayName="MDXCreateElement"},51275:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>p,contentTitle:()=>i,default:()=>c,frontMatter:()=>a,metadata:()=>l,toc:()=>s});var n=r(87462),o=(r(67294),r(3905));const a={title:"Flarum",description:"Utilisation d'OAuth2 pour connecter diverses applications, comme Flarum",keywords:["OAuth2","Flarum","IDP"],authors:["jakiuncle"]},i=void 0,l={unversionedId:"integration/php/Flarum",id:"integration/php/Flarum",title:"Flarum",description:"Utilisation d'OAuth2 pour connecter diverses applications, comme Flarum",source:"@site/i18n/fr/docusaurus-plugin-content-docs/current/integration/php/Flarum.md",sourceDirName:"integration/php",slug:"/integration/php/Flarum",permalink:"/fr/docs/integration/php/Flarum",draft:!1,editUrl:"https://github.com/casdoor/casdoor-website/edit/master/docs/integration/php/Flarum.md",tags:[],version:"current",frontMatter:{title:"Flarum",description:"Utilisation d'OAuth2 pour connecter diverses applications, comme Flarum",keywords:["OAuth2","Flarum","IDP"],authors:["jakiuncle"]},sidebar:"tutorialSidebar",previous:{title:"Utiliser Casdoor comme serveur OAuth2 dans ShowDoc",permalink:"/fr/docs/integration/php/showdoc"},next:{title:"Moodle",permalink:"/fr/docs/integration/php/Moodle"}},p={},s=[{value:"\xc9tape 1 : D\xe9ployer Casdoor et Flarum",id:"\xe9tape-1--d\xe9ployer-casdoor-et-flarum",level:2},{value:"\xc9tape 2 : Configurer l&#39;application Casdoor",id:"\xe9tape-2--configurer-lapplication-casdoor",level:2},{value:"\xc9tape 3 : Configurer Flarum",id:"\xe9tape-3--configurer-flarum",level:2}],u={toc:s};function c(e){let{components:t,...a}=e;return(0,o.kt)("wrapper",(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"/docs/basic/server-installation"},"Casdoor")," peut utiliser OAuth2 pour connecter diverses applications. Dans cet exemple, nous allons vous montrer comment utiliser OAuth2 pour connecter Flarum \xe0 vos applications."),(0,o.kt)("p",null,"Voici quelques noms de configuration dont vous aurez besoin :"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"CASDOOR_HOSTNAME")," : Le nom de domaine ou l'IP o\xf9 le serveur Casdoor est d\xe9ploy\xe9."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"Flarum_HOSTNAME")," : Le nom de domaine ou l'IP o\xf9 Flarum est d\xe9ploy\xe9."),(0,o.kt)("h2",{id:"\xe9tape-1--d\xe9ployer-casdoor-et-flarum"},"\xc9tape 1 : D\xe9ployer Casdoor et Flarum"),(0,o.kt)("p",null,"Tout d'abord, d\xe9ployez ",(0,o.kt)("a",{parentName:"p",href:"/docs/basic/server-installation"},"Casdoor")," et ",(0,o.kt)("a",{parentName:"p",href:"https://flarum.org/"},"Flarum"),"."),(0,o.kt)("p",null,"Apr\xe8s un d\xe9ploiement r\xe9ussi, assurez-vous :"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Vous avez t\xe9l\xe9charg\xe9 le plugin Flarum ",(0,o.kt)("a",{parentName:"li",href:"https://github.com/FriendsOfFlarum/passport"},"FoF Passport"),"."),(0,o.kt)("li",{parentName:"ol"},"Casdoor peut \xeatre connect\xe9 et utilis\xe9 normalement."),(0,o.kt)("li",{parentName:"ol"},"Vous pouvez d\xe9finir CASDOOR_HOSTNAME = ",(0,o.kt)("inlineCode",{parentName:"li"},"http://localhost:8000")," lors du d\xe9ploiement de Casdoor en mode ",(0,o.kt)("inlineCode",{parentName:"li"},"prod"),". Voir ",(0,o.kt)("a",{parentName:"li",href:"https://casdoor.org/docs/basic/server-installation#production-mode"},"mode de production"),".")),(0,o.kt)("h2",{id:"\xe9tape-2--configurer-lapplication-casdoor"},"\xc9tape 2 : Configurer l'application Casdoor"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Cr\xe9ez une nouvelle application Casdoor ou utilisez-en une existante."),(0,o.kt)("li",{parentName:"ol"},"Trouvez l'URL de redirection : ",(0,o.kt)("inlineCode",{parentName:"li"},"<CASDOOR_HOSTNAME>/auth/passport"),"."),(0,o.kt)("li",{parentName:"ol"},"Ajoutez l'URL de redirection \xe0 l'application Casdoor :",(0,o.kt)("img",{alt:"Redirection",src:r(30813).Z,width:"1854",height:"306"}))),(0,o.kt)("p",null,"Sur la page des param\xe8tres de l'application, vous trouverez deux valeurs : ",(0,o.kt)("inlineCode",{parentName:"p"},"Client ID")," et ",(0,o.kt)("inlineCode",{parentName:"p"},"Client secret"),". Nous utiliserons ces valeurs \xe0 l'\xe9tape suivante."),(0,o.kt)("p",null,"Ouvrez votre navigateur pr\xe9f\xe9r\xe9 et visitez : ",(0,o.kt)("strong",{parentName:"p"},"http://",(0,o.kt)("inlineCode",{parentName:"strong"},"CASDOOR_HOSTNAME"),"/.well-known/openid-configuration"),". Vous verrez la configuration OIDC de Casdoor."),(0,o.kt)("h2",{id:"\xe9tape-3--configurer-flarum"},"\xc9tape 3 : Configurer Flarum"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Installez le plugin ",(0,o.kt)("a",{parentName:"li",href:"https://github.com/FriendsOfFlarum/passport"},"FoF Passport"),"."),(0,o.kt)("li",{parentName:"ol"},"Configurez l'application :",(0,o.kt)("img",{alt:"configurer",src:r(87725).Z,width:"921",height:"852"})),(0,o.kt)("li",{parentName:"ol"},"Trouvez le Client ID et le Client Secret sur la page de l'application Casdoor.")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"Token server URL"),": ",(0,o.kt)("strong",{parentName:"li"},"http://",(0,o.kt)("inlineCode",{parentName:"strong"},"CASDOOR_HOSTNAME"),"/api/login/oauth/access_token")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"Authorization server URL"),": ",(0,o.kt)("strong",{parentName:"li"},"http://",(0,o.kt)("inlineCode",{parentName:"strong"},"CASDOOR_HOSTNAME"),"/login/oauth/authorize")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"UserInfo server URL"),": ",(0,o.kt)("strong",{parentName:"li"},"http://",(0,o.kt)("inlineCode",{parentName:"strong"},"CASDOOR_HOSTNAME"),"/api/get-account")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"Scopes"),": ",(0,o.kt)("inlineCode",{parentName:"li"},"address phone openid profile offline_access email"))),(0,o.kt)("p",null,"D\xe9connectez-vous de Flarum et testez le SSO.",(0,o.kt)("img",{alt:"Connexion Flarum",src:r(71759).Z,width:"800",height:"380"})))}c.isMDXComponent=!0},30813:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/images/RedirectURL-81f6e1bd4f914c1a3799f8a3c8aa2c67.png"},71759:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/images/login-34951d722b026dbd4fffa3697c2f8631.gif"},87725:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/images/ssoConfigure-beea0a8d5c89c724ff40c7121e0b79fd.png"}}]);