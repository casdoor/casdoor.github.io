(self.webpackChunkcasdoor_website=self.webpackChunkcasdoor_website||[]).push([[5657],{3905:function(e,n,t){"use strict";t.d(n,{Zo:function(){return u},kt:function(){return m}});var i=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,i,r=function(e,n){if(null==e)return{};var t,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)t=o[i],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)t=o[i],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var l=i.createContext({}),p=function(e){var n=i.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):a(a({},n),e)),t},u=function(e){var n=p(e.components);return i.createElement(l.Provider,{value:n},e.children)},c={inlineCode:"code",wrapper:function(e){var n=e.children;return i.createElement(i.Fragment,{},n)}},d=i.forwardRef((function(e,n){var t=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),d=p(t),m=r,f=d["".concat(l,".").concat(m)]||d[m]||c[m]||o;return t?i.createElement(f,a(a({ref:n},u),{},{components:t})):i.createElement(f,a({ref:n},u))}));function m(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var o=t.length,a=new Array(o);a[0]=d;var s={};for(var l in n)hasOwnProperty.call(n,l)&&(s[l]=n[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,a[1]=s;for(var p=2;p<o;p++)a[p]=t[p];return i.createElement.apply(null,a)}return i.createElement.apply(null,t)}d.displayName="MDXCreateElement"},3654:function(e,n,t){"use strict";t.r(n),t.d(n,{frontMatter:function(){return s},contentTitle:function(){return l},metadata:function(){return p},toc:function(){return u},default:function(){return d}});var i=t(4034),r=t(9973),o=(t(7294),t(3905)),a=["components"],s={sidebar_position:1,title:"Jenkins (OIDC)"},l=void 0,p={unversionedId:"integration/jenkins",id:"integration/jenkins",isDocsHomePage:!1,title:"Jenkins (OIDC)",description:"Casdoor peut utiliser le protocole OIDC comme IDP pour connecter diff\xe9rentes applications. Ici, nous utiliserons Jenkins comme exemple pour vous montrer comment utiliser OIDC pour vous connecter \xe0 vos applications.",source:"@site/i18n/fr/docusaurus-plugin-content-docs/current/integration/jenkins.md",sourceDirName:"integration",slug:"/integration/jenkins",permalink:"/fr/docs/integration/jenkins",editUrl:"https://github.com/casdoor/casdoor-website/tree/master/docs/integration/jenkins.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,title:"Jenkins (OIDC)"},sidebar:"tutorialSidebar",previous:{title:"Boot de Printemps",permalink:"/fr/docs/integration/spring-boot"},next:{title:"APISIX",permalink:"/fr/docs/integration/apisix"}},u=[{value:"\xc9tape 1. D\xe9ployer Casdoor et Jenkins",id:"\xe9tape-1-d\xe9ployer-casdoor-et-jenkins",children:[],level:2},{value:"\xc9tape 2. Configurer l&#39;application Casdoor",id:"\xe9tape-2-configurer-lapplication-casdoor",children:[],level:2},{value:"\xc9tape 3. Configurer Jenkins",id:"\xe9tape-3-configurer-jenkins",children:[],level:2}],c={toc:u};function d(e){var n=e.components,s=(0,r.Z)(e,a);return(0,o.kt)("wrapper",(0,i.Z)({},c,s,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Casdoor peut utiliser le protocole OIDC comme IDP pour connecter diff\xe9rentes applications. Ici, nous utiliserons Jenkins comme exemple pour vous montrer comment utiliser OIDC pour vous connecter \xe0 vos applications."),(0,o.kt)("p",null,"Voici quelques noms dans la configuration :"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"CASDOOR_HOSTNAME"),": Nom de domaine ou IP o\xf9 le serveur Casdoor est d\xe9ploy\xe9."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"JENKINS_HOSTNAME"),": Nom de domaine ou IP o\xf9 Jenkins est d\xe9ploy\xe9."),(0,o.kt)("h2",{id:"\xe9tape-1-d\xe9ployer-casdoor-et-jenkins"},"\xc9tape 1. D\xe9ployer Casdoor et Jenkins"),(0,o.kt)("p",null,"Premi\xe8rement, la ",(0,o.kt)("a",{parentName:"p",href:"/docs/basic/server-installation"},"Casdoor")," et ",(0,o.kt)("a",{parentName:"p",href:"https://www.jenkins.io/doc/book/installing/"},"Jenkins")," doivent \xeatre d\xe9ploy\xe9es."),(0,o.kt)("p",null,"Apr\xe8s un d\xe9ploiement r\xe9ussi, vous devez vous assurer :"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"D\xe9finissez l'URL Jenkins (G\xe9rer Jenkins -> Configurer le syst\xe8me -> l'emplacement Jenkins) \xe0 ",(0,o.kt)("inlineCode",{parentName:"li"},"JENKINS_HOSTNAME"),". ",(0,o.kt)("img",{alt:"Jenkins URL",src:t(8e3).Z})),(0,o.kt)("li",{parentName:"ol"},"Casdoor peut \xeatre connect\xe9 et utilis\xe9 normalement."),(0,o.kt)("li",{parentName:"ol"},"D\xe9finissez la valeur ",(0,o.kt)("inlineCode",{parentName:"li"},"origine")," de Casdoor (conf/app.conf) \xe0 ",(0,o.kt)("inlineCode",{parentName:"li"},"CASDOOR_HOSTNAME"),". ",(0,o.kt)("img",{alt:"Conf Casdoor",src:t(9541).Z}))),(0,o.kt)("h2",{id:"\xe9tape-2-configurer-lapplication-casdoor"},"\xc9tape 2. Configurer l'application Casdoor"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Cr\xe9er ou utiliser une application Casdoor existante."),(0,o.kt)("li",{parentName:"ol"},"Ajouter une URL de redirection : ",(0,o.kt)("inlineCode",{parentName:"li"},"http://JENKINS_HOSTNAME/securityRealm/finishLogin")," ",(0,o.kt)("img",{alt:"R\xe9glage de l&#39;application Casdoor",src:t(4312).Z})),(0,o.kt)("li",{parentName:"ol"},"Ajoutez le fournisseur que vous voulez et compl\xe9tez d'autres param\xe8tres.")),(0,o.kt)("p",null,"Sans surprise, vous pouvez obtenir deux valeurs sur la page des param\xe8tres de l'application : ",(0,o.kt)("inlineCode",{parentName:"p"},"ID client")," et ",(0,o.kt)("inlineCode",{parentName:"p"},"secret client")," comme l'image ci-dessus, nous les utiliserons \xe0 l'\xe9tape suivante."),(0,o.kt)("p",null,"Ouvrez votre navigateur favori et visite: ",(0,o.kt)("strong",{parentName:"p"},"http://",(0,o.kt)("inlineCode",{parentName:"strong"},"CASDOOR_HOSTNAME"),"/.well-known/openid-configuration"),", vous verrez la configuration OIDC de Casdoor."),(0,o.kt)("h2",{id:"\xe9tape-3-configurer-jenkins"},"\xc9tape 3. Configurer Jenkins"),(0,o.kt)("p",null,"Jenkins ne prend pas en charge nativement OIDC, donc nous devons installer ",(0,o.kt)("a",{parentName:"p",href:"https://plugins.jenkins.io/oic-auth/"},"OpenId Connect Authentication"),"."),(0,o.kt)("p",null,"Une fois l'installation termin\xe9e, allez dans G\xe9rer Jenkins -> Configurer la s\xe9curit\xe9 mondiale."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Suggestion"),": Sauvegardez le fichier Jenkins ",(0,o.kt)("inlineCode",{parentName:"p"},"config.xml")," et utilisez-le pour r\xe9cup\xe9rer en cas d'erreurs de configuration."),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},'Dans le Contr\xf4le d\'acc\xe8s, s\xe9lectionnez "Connexion avec Openid Connect".'),(0,o.kt)("li",{parentName:"ol"},"Dans l'ID du client, sp\xe9cifiez l' ",(0,o.kt)("inlineCode",{parentName:"li"},"ID du client")," mentionn\xe9 ci-dessus."),(0,o.kt)("li",{parentName:"ol"},"Dans le secret client, sp\xe9cifiez le ",(0,o.kt)("inlineCode",{parentName:"li"},"Client secret")," mentionn\xe9 ci-dessus."),(0,o.kt)("li",{parentName:"ol"},"En mode configuration, s\xe9lectionnez ",(0,o.kt)("inlineCode",{parentName:"li"},"Configuration automatique")," et remplissez ",(0,o.kt)("strong",{parentName:"li"},"http://",(0,o.kt)("inlineCode",{parentName:"strong"},"CASDOOR_HOSTNAME"),"/.well-known/openid-configuration")," dans le point de terminaison de configuration bien connu.",(0,o.kt)("img",{alt:"Param\xe8tres de Jenkins",src:t(407).Z}),"Si votre casdoor est d\xe9ploy\xe9e localement, vous pourriez avoir besoin de s\xe9lectionner ",(0,o.kt)("inlineCode",{parentName:"li"},"Configuration manuelle")," et de saisir quelques informations :",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"Serveur de jetons url"),": ",(0,o.kt)("strong",{parentName:"li"},"http://",(0,o.kt)("inlineCode",{parentName:"strong"},"CASDOOR_HOSTNAME"),"/api/login/oauth/access_token")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"Serveur d'autorisation url"),": ",(0,o.kt)("strong",{parentName:"li"},"http://",(0,o.kt)("inlineCode",{parentName:"strong"},"CASDOOR_HOSTNAME"),"/login/oauth/Authz")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"Serveur UserInfo"),": ",(0,o.kt)("strong",{parentName:"li"},"http://",(0,o.kt)("inlineCode",{parentName:"strong"},"CASDOOR_HOSTNAME"),"/api/get-account")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"Port\xe9es"),": ",(0,o.kt)("inlineCode",{parentName:"li"},"adresse du t\xe9l\xe9phone openid profil offline_access email")," ",(0,o.kt)("img",{alt:"Configuration manuelle",src:t(5125).Z})))),(0,o.kt)("li",{parentName:"ol"},"Cliquez sur R\xe9glages Avanc\xe9s, remplissez les champs suivants :",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"Dans le champ Nom d'utilisateur, sp\xe9cifiez ",(0,o.kt)("inlineCode",{parentName:"li"},"data.name")),(0,o.kt)("li",{parentName:"ul"},"Dans le nom complet feild, sp\xe9cifiez ",(0,o.kt)("inlineCode",{parentName:"li"},"data.displayName")),(0,o.kt)("li",{parentName:"ul"},"Dans le champ Courriel, sp\xe9cifiez ",(0,o.kt)("inlineCode",{parentName:"li"},"data.email")," ",(0,o.kt)("img",{alt:"Param\xe9trage du champ Userinfo",src:t(4245).Z})))),(0,o.kt)("li",{parentName:"ol"},"Dans la section Autorisation, cochez la case \xab Les utilisateurs connect\xe9s peuvent faire n'importe quoi\xbb. D\xe9sactiver \"Autoriser l'acc\xe8s en lecture anonyme\". Vous pouvez configurer une autorisation plus complexe plus tard, pour v\xe9rifier si OpenID fonctionne r\xe9ellement.")),(0,o.kt)("p",null,"D\xe9connexion de Jenkins, il devrait maintenant vous rediriger vers Casdoor pour authentification. ",(0,o.kt)("img",{alt:"Page de connexion de Jenkins",src:t(1265).Z})))}d.isMDXComponent=!0},4312:function(e,n,t){"use strict";n.Z=t.p+"assets/images/appseeting_jenkins-6e0a2968614d0735005951278f44c008.png"},9541:function(e,n,t){"use strict";n.Z=t.p+"assets/images/casdoor_origin-8f5d9e44f6b58828ce69e6e6d896e122.png"},407:function(e,n,t){"use strict";n.Z=t.p+"assets/images/jenkins_auto-acde42e269bf8ed09bf57320d1eecdc0.png"},4245:function(e,n,t){"use strict";n.Z=t.p+"assets/images/jenkins_field-0ddab1487978368743985b6545c4f2f0.png"},1265:function(e,n,t){"use strict";n.Z=t.p+"assets/images/jenkins_login-d7c2179fcdc73e29ca6b90c494cba55b.png"},5125:function(e,n,t){"use strict";n.Z=t.p+"assets/images/jenkins_manual-e28d6e6af536025049ea2a3a22f38eb3.png"},8e3:function(e,n,t){"use strict";n.Z=t.p+"assets/images/jenkins_url-9e8f261138a88501bdfce79ee1c1f3fa.png"}}]);