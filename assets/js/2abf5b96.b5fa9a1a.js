"use strict";(self.webpackChunkcasdoor_website=self.webpackChunkcasdoor_website||[]).push([[1029],{3905:(e,t,r)=>{r.d(t,{Zo:()=>u,kt:()=>m});var n=r(67294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var p=n.createContext({}),s=function(e){var t=n.useContext(p),r=t;return e&&(r="function"==typeof e?e(t):l(l({},t),e)),r},u=function(e){var t=s(e.components);return n.createElement(p.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,i=e.originalType,p=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),d=s(r),m=a,k=d["".concat(p,".").concat(m)]||d[m]||c[m]||i;return r?n.createElement(k,l(l({ref:t},u),{},{components:r})):n.createElement(k,l({ref:t},u))}));function m(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=r.length,l=new Array(i);l[0]=d;var o={};for(var p in t)hasOwnProperty.call(t,p)&&(o[p]=t[p]);o.originalType=e,o.mdxType="string"==typeof e?e:a,l[1]=o;for(var s=2;s<i;s++)l[s]=r[s];return n.createElement.apply(null,l)}return n.createElement.apply(null,r)}d.displayName="MDXCreateElement"},77535:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>p,contentTitle:()=>l,default:()=>c,frontMatter:()=>i,metadata:()=>o,toc:()=>s});var n=r(87462),a=(r(67294),r(3905));const i={title:"Azure AD",description:"Using Azure AD Syncer to synchronize users from Azure Active Directory",keywords:["syncer","azure ad","microsoft"],authors:["nomeguy"]},l=void 0,o={unversionedId:"syncer/AzureAD",id:"syncer/AzureAD",title:"Azure AD",description:"Using Azure AD Syncer to synchronize users from Azure Active Directory",source:"@site/docs/syncer/AzureAD.md",sourceDirName:"syncer",slug:"/syncer/AzureAD",permalink:"/docs/syncer/AzureAD",draft:!1,editUrl:"https://github.com/casdoor/casdoor-website/edit/master/docs/syncer/AzureAD.md",tags:[],version:"current",frontMatter:{title:"Azure AD",description:"Using Azure AD Syncer to synchronize users from Azure Active Directory",keywords:["syncer","azure ad","microsoft"],authors:["nomeguy"]},sidebar:"tutorialSidebar",previous:{title:"Database",permalink:"/docs/syncer/Database"},next:{title:"Keycloak",permalink:"/docs/syncer/Keycloak"}},p={},s=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Step 1: Register an Application",id:"step-1-register-an-application",level:3},{value:"Step 2: Create a Client Secret",id:"step-2-create-a-client-secret",level:3},{value:"Step 3: Grant API Permissions",id:"step-3-grant-api-permissions",level:3},{value:"Configuration",id:"configuration",level:2},{value:"Field Mappings",id:"field-mappings",level:2},{value:"Running the Syncer",id:"running-the-syncer",level:2}],u={toc:s};function c(e){let{components:t,...r}=e;return(0,a.kt)("wrapper",(0,n.Z)({},u,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Azure AD Syncer enables automatic user synchronization from Azure Active Directory (Microsoft Entra ID) to Casdoor. The syncer uses the Microsoft Graph API to fetch user information and keeps your user directory up to date."),(0,a.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,a.kt)("p",null,"Before configuring the Azure AD syncer, you need to set up an application registration in Azure Portal with the appropriate permissions."),(0,a.kt)("h3",{id:"step-1-register-an-application"},"Step 1: Register an Application"),(0,a.kt)("p",null,"Navigate to ",(0,a.kt)("a",{parentName:"p",href:"https://portal.azure.com"},"Azure Portal")," and register a new application:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Go to ",(0,a.kt)("strong",{parentName:"li"},"Azure Active Directory")," \u2192 ",(0,a.kt)("strong",{parentName:"li"},"App registrations")," \u2192 ",(0,a.kt)("strong",{parentName:"li"},"New registration")),(0,a.kt)("li",{parentName:"ol"},"Enter a name for your application"),(0,a.kt)("li",{parentName:"ol"},'Select the appropriate account type (typically "Accounts in this organizational directory only")'),(0,a.kt)("li",{parentName:"ol"},"Click ",(0,a.kt)("strong",{parentName:"li"},"Register"))),(0,a.kt)("h3",{id:"step-2-create-a-client-secret"},"Step 2: Create a Client Secret"),(0,a.kt)("p",null,"After registration, create a client secret:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"In your application, go to ",(0,a.kt)("strong",{parentName:"li"},"Certificates & secrets")),(0,a.kt)("li",{parentName:"ol"},"Click ",(0,a.kt)("strong",{parentName:"li"},"New client secret")),(0,a.kt)("li",{parentName:"ol"},"Add a description and select an expiration period"),(0,a.kt)("li",{parentName:"ol"},"Click ",(0,a.kt)("strong",{parentName:"li"},"Add")," and copy the secret value immediately (it won't be shown again)")),(0,a.kt)("h3",{id:"step-3-grant-api-permissions"},"Step 3: Grant API Permissions"),(0,a.kt)("p",null,"Configure the required Microsoft Graph API permissions:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Go to ",(0,a.kt)("strong",{parentName:"li"},"API permissions")," \u2192 ",(0,a.kt)("strong",{parentName:"li"},"Add a permission")),(0,a.kt)("li",{parentName:"ol"},"Select ",(0,a.kt)("strong",{parentName:"li"},"Microsoft Graph")," \u2192 ",(0,a.kt)("strong",{parentName:"li"},"Application permissions")),(0,a.kt)("li",{parentName:"ol"},"Add the ",(0,a.kt)("inlineCode",{parentName:"li"},"User.Read.All")," permission"),(0,a.kt)("li",{parentName:"ol"},"Click ",(0,a.kt)("strong",{parentName:"li"},"Grant admin consent")," for your organization")),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"The ",(0,a.kt)("inlineCode",{parentName:"p"},"User.Read.All")," permission allows the syncer to read all user profiles in your Azure AD tenant.")),(0,a.kt)("h2",{id:"configuration"},"Configuration"),(0,a.kt)("p",null,"To create an Azure AD syncer in Casdoor:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Navigate to the ",(0,a.kt)("strong",{parentName:"li"},"Syncers")," tab"),(0,a.kt)("li",{parentName:"ol"},"Click ",(0,a.kt)("strong",{parentName:"li"},"Add")," to create a new syncer"),(0,a.kt)("li",{parentName:"ol"},"Fill in the following required fields:")),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Field"),(0,a.kt)("th",{parentName:"tr",align:null},"Description"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Organization"),(0,a.kt)("td",{parentName:"tr",align:null},"The Casdoor organization where users will be imported")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Name"),(0,a.kt)("td",{parentName:"tr",align:null},"A unique identifier for this syncer")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Type"),(0,a.kt)("td",{parentName:"tr",align:null},'Select "Azure AD"')),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Tenant ID"),(0,a.kt)("td",{parentName:"tr",align:null},"Your Azure AD tenant ID (found in Azure Portal \u2192 Azure Active Directory \u2192 Overview)")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Client ID"),(0,a.kt)("td",{parentName:"tr",align:null},"The Application (client) ID from your app registration")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Client Secret"),(0,a.kt)("td",{parentName:"tr",align:null},"The client secret value you created earlier")))),(0,a.kt)("p",null,"Other database-related fields (Database type, Port, Database, Table) are not used for Azure AD syncer and can be left empty."),(0,a.kt)("h2",{id:"field-mappings"},"Field Mappings"),(0,a.kt)("p",null,"The syncer automatically maps Azure AD user attributes to Casdoor user fields:"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Azure AD Field"),(0,a.kt)("th",{parentName:"tr",align:null},"Casdoor Field"),(0,a.kt)("th",{parentName:"tr",align:null},"Description"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"id"),(0,a.kt)("td",{parentName:"tr",align:null},"Id"),(0,a.kt)("td",{parentName:"tr",align:null},"User's unique identifier")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"userPrincipalName"),(0,a.kt)("td",{parentName:"tr",align:null},"Name"),(0,a.kt)("td",{parentName:"tr",align:null},"User principal name")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"displayName"),(0,a.kt)("td",{parentName:"tr",align:null},"DisplayName"),(0,a.kt)("td",{parentName:"tr",align:null},"User's display name")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"givenName"),(0,a.kt)("td",{parentName:"tr",align:null},"FirstName"),(0,a.kt)("td",{parentName:"tr",align:null},"First name")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"surname"),(0,a.kt)("td",{parentName:"tr",align:null},"LastName"),(0,a.kt)("td",{parentName:"tr",align:null},"Last name")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"mail"),(0,a.kt)("td",{parentName:"tr",align:null},"Email"),(0,a.kt)("td",{parentName:"tr",align:null},"Email address")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"mobilePhone"),(0,a.kt)("td",{parentName:"tr",align:null},"Phone"),(0,a.kt)("td",{parentName:"tr",align:null},"Mobile phone number")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"jobTitle"),(0,a.kt)("td",{parentName:"tr",align:null},"Title"),(0,a.kt)("td",{parentName:"tr",align:null},"Job title")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"officeLocation"),(0,a.kt)("td",{parentName:"tr",align:null},"Location"),(0,a.kt)("td",{parentName:"tr",align:null},"Office location")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"preferredLanguage"),(0,a.kt)("td",{parentName:"tr",align:null},"Language"),(0,a.kt)("td",{parentName:"tr",align:null},"Preferred language")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"accountEnabled"),(0,a.kt)("td",{parentName:"tr",align:null},"IsForbidden"),(0,a.kt)("td",{parentName:"tr",align:null},"Account status (inverted)")))),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},"The ",(0,a.kt)("inlineCode",{parentName:"p"},"accountEnabled")," field is inverted when mapped to ",(0,a.kt)("inlineCode",{parentName:"p"},"IsForbidden"),". When a user is disabled in Azure AD (",(0,a.kt)("inlineCode",{parentName:"p"},"accountEnabled: false"),"), they will be marked as forbidden in Casdoor (",(0,a.kt)("inlineCode",{parentName:"p"},"IsForbidden: true"),").")),(0,a.kt)("h2",{id:"running-the-syncer"},"Running the Syncer"),(0,a.kt)("p",null,"After configuration:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Click ",(0,a.kt)("strong",{parentName:"li"},"Test Connection")," to verify your credentials and permissions"),(0,a.kt)("li",{parentName:"ol"},"Enable the syncer by toggling ",(0,a.kt)("strong",{parentName:"li"},"Is enabled")),(0,a.kt)("li",{parentName:"ol"},"Click ",(0,a.kt)("strong",{parentName:"li"},"Sync")," to trigger an immediate synchronization"),(0,a.kt)("li",{parentName:"ol"},"The syncer will automatically fetch all users from your Azure AD tenant")),(0,a.kt)("p",null,"The syncer handles pagination automatically, retrieving all users regardless of the total count."))}c.isMDXComponent=!0}}]);