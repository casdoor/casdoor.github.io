"use strict";(self.webpackChunkcasdoor_website=self.webpackChunkcasdoor_website||[]).push([[4850],{3905:(e,a,r)=>{r.d(a,{Zo:()=>c,kt:()=>m});var t=r(67294);function n(e,a,r){return a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}function o(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),r.push.apply(r,t)}return r}function i(e){for(var a=1;a<arguments.length;a++){var r=null!=arguments[a]?arguments[a]:{};a%2?o(Object(r),!0).forEach((function(a){n(e,a,r[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))}))}return e}function l(e,a){if(null==e)return{};var r,t,n=function(e,a){if(null==e)return{};var r,t,n={},o=Object.keys(e);for(t=0;t<o.length;t++)r=o[t],a.indexOf(r)>=0||(n[r]=e[r]);return n}(e,a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)r=o[t],a.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var s=t.createContext({}),p=function(e){var a=t.useContext(s),r=a;return e&&(r="function"==typeof e?e(a):i(i({},a),e)),r},c=function(e){var a=p(e.components);return t.createElement(s.Provider,{value:a},e.children)},u={inlineCode:"code",wrapper:function(e){var a=e.children;return t.createElement(t.Fragment,{},a)}},d=t.forwardRef((function(e,a){var r=e.components,n=e.mdxType,o=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=p(r),m=n,g=d["".concat(s,".").concat(m)]||d[m]||u[m]||o;return r?t.createElement(g,i(i({ref:a},c),{},{components:r})):t.createElement(g,i({ref:a},c))}));function m(e,a){var r=arguments,n=a&&a.mdxType;if("string"==typeof e||n){var o=r.length,i=new Array(o);i[0]=d;var l={};for(var s in a)hasOwnProperty.call(a,s)&&(l[s]=a[s]);l.originalType=e,l.mdxType="string"==typeof e?e:n,i[1]=l;for(var p=2;p<o;p++)i[p]=r[p];return t.createElement.apply(null,i)}return t.createElement.apply(null,r)}d.displayName="MDXCreateElement"},16742:(e,a,r)=>{r.r(a),r.d(a,{assets:()=>s,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>l,toc:()=>p});var t=r(87462),n=(r(67294),r(3905));const o={title:"Flarum",description:"Usando OAuth2 para conectar varias aplicaciones, como Flarum",keywords:["OAuth2","Flarum","IDP"],authors:["jakiuncle"]},i=void 0,l={unversionedId:"integration/php/Flarum",id:"integration/php/Flarum",title:"Flarum",description:"Usando OAuth2 para conectar varias aplicaciones, como Flarum",source:"@site/i18n/es/docusaurus-plugin-content-docs/current/integration/php/Flarum.md",sourceDirName:"integration/php",slug:"/integration/php/Flarum",permalink:"/es/docs/integration/php/Flarum",draft:!1,editUrl:"https://github.com/casdoor/casdoor-website/edit/master/docs/integration/php/Flarum.md",tags:[],version:"current",frontMatter:{title:"Flarum",description:"Usando OAuth2 para conectar varias aplicaciones, como Flarum",keywords:["OAuth2","Flarum","IDP"],authors:["jakiuncle"]},sidebar:"tutorialSidebar",previous:{title:"Usando Casdoor como un Servidor OAuth2 en ShowDoc",permalink:"/es/docs/integration/php/showdoc"},next:{title:"Moodle",permalink:"/es/docs/integration/php/Moodle"}},s={},p=[{value:"Paso 1: Desplegar Casdoor y Flarum",id:"paso-1-desplegar-casdoor-y-flarum",level:2},{value:"Paso 2: Configurar la aplicaci\xf3n Casdoor",id:"paso-2-configurar-la-aplicaci\xf3n-casdoor",level:2},{value:"Paso 3: Configurar Flarum",id:"paso-3-configurar-flarum",level:2}],c={toc:p};function u(e){let{components:a,...o}=e;return(0,n.kt)("wrapper",(0,t.Z)({},c,o,{components:a,mdxType:"MDXLayout"}),(0,n.kt)("p",null,(0,n.kt)("a",{parentName:"p",href:"/docs/basic/server-installation"},"Casdoor")," puede usar OAuth2 para conectar varias aplicaciones. En este ejemplo, te mostraremos c\xf3mo usar OAuth2 para conectar Flarum con tus aplicaciones."),(0,n.kt)("p",null,"Aqu\xed hay algunos nombres de configuraci\xf3n que necesitar\xe1s:"),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"CASDOOR_HOSTNAME"),": El nombre de dominio o IP donde se despliega el servidor Casdoor."),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"Flarum_HOSTNAME"),": El nombre de dominio o IP donde se despliega Flarum."),(0,n.kt)("h2",{id:"paso-1-desplegar-casdoor-y-flarum"},"Paso 1: Desplegar Casdoor y Flarum"),(0,n.kt)("p",null,"Primero, despliega ",(0,n.kt)("a",{parentName:"p",href:"/docs/basic/server-installation"},"Casdoor")," y ",(0,n.kt)("a",{parentName:"p",href:"https://flarum.org/"},"Flarum"),"."),(0,n.kt)("p",null,"Despu\xe9s de un despliegue exitoso, aseg\xfarate de:"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Has descargado el plugin de Flarum ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/FriendsOfFlarum/passport"},"FoF Passport"),"."),(0,n.kt)("li",{parentName:"ol"},"Casdoor puede iniciar sesi\xf3n y usarse normalmente."),(0,n.kt)("li",{parentName:"ol"},"Puedes establecer CASDOOR_HOSTNAME = ",(0,n.kt)("inlineCode",{parentName:"li"},"http://localhost:8000")," al desplegar Casdoor en modo ",(0,n.kt)("inlineCode",{parentName:"li"},"prod"),". Ver ",(0,n.kt)("a",{parentName:"li",href:"https://casdoor.org/docs/basic/server-installation#production-mode"},"modo de producci\xf3n"),".")),(0,n.kt)("h2",{id:"paso-2-configurar-la-aplicaci\xf3n-casdoor"},"Paso 2: Configurar la aplicaci\xf3n Casdoor"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Crea una nueva aplicaci\xf3n Casdoor o usa una existente."),(0,n.kt)("li",{parentName:"ol"},"Encuentra la URL de redirecci\xf3n: ",(0,n.kt)("inlineCode",{parentName:"li"},"<CASDOOR_HOSTNAME>/auth/passport"),"."),(0,n.kt)("li",{parentName:"ol"},"Agrega la URL de redirecci\xf3n a la aplicaci\xf3n Casdoor:",(0,n.kt)("img",{alt:"Redireccionar",src:r(30813).Z,width:"1854",height:"306"}))),(0,n.kt)("p",null,"En la p\xe1gina de configuraci\xf3n de la aplicaci\xf3n, encontrar\xe1s dos valores: ",(0,n.kt)("inlineCode",{parentName:"p"},"Client ID")," y ",(0,n.kt)("inlineCode",{parentName:"p"},"Client secret"),". Usaremos estos valores en el siguiente paso."),(0,n.kt)("p",null,"Abre tu navegador favorito y visita: ",(0,n.kt)("strong",{parentName:"p"},"http://",(0,n.kt)("inlineCode",{parentName:"strong"},"CASDOOR_HOSTNAME"),"/.well-known/openid-configuration"),". Ver\xe1s la configuraci\xf3n OIDC de Casdoor."),(0,n.kt)("h2",{id:"paso-3-configurar-flarum"},"Paso 3: Configurar Flarum"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Instala el plugin ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/FriendsOfFlarum/passport"},"FoF Passport"),"."),(0,n.kt)("li",{parentName:"ol"},"Configura la app:",(0,n.kt)("img",{alt:"configurar",src:r(87725).Z,width:"921",height:"852"})),(0,n.kt)("li",{parentName:"ol"},"Encuentra el Client ID y Client Secret en la p\xe1gina de la aplicaci\xf3n Casdoor.")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"Token server URL"),": ",(0,n.kt)("strong",{parentName:"li"},"http://",(0,n.kt)("inlineCode",{parentName:"strong"},"CASDOOR_HOSTNAME"),"/api/login/oauth/access_token")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"Authorization server URL"),": ",(0,n.kt)("strong",{parentName:"li"},"http://",(0,n.kt)("inlineCode",{parentName:"strong"},"CASDOOR_HOSTNAME"),"/login/oauth/authorize")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"UserInfo server URL"),": ",(0,n.kt)("strong",{parentName:"li"},"http://",(0,n.kt)("inlineCode",{parentName:"strong"},"CASDOOR_HOSTNAME"),"/api/get-account")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"Scopes"),": ",(0,n.kt)("inlineCode",{parentName:"li"},"address phone openid profile offline_access email"))),(0,n.kt)("p",null,"Cierra sesi\xf3n en Flarum y prueba el SSO.",(0,n.kt)("img",{alt:"Inicio de sesi\xf3n de Flarum",src:r(71759).Z,width:"800",height:"380"})))}u.isMDXComponent=!0},30813:(e,a,r)=>{r.d(a,{Z:()=>t});const t=r.p+"assets/images/RedirectURL-81f6e1bd4f914c1a3799f8a3c8aa2c67.png"},71759:(e,a,r)=>{r.d(a,{Z:()=>t});const t=r.p+"assets/images/login-34951d722b026dbd4fffa3697c2f8631.gif"},87725:(e,a,r)=>{r.d(a,{Z:()=>t});const t=r.p+"assets/images/ssoConfigure-beea0a8d5c89c724ff40c7121e0b79fd.png"}}]);