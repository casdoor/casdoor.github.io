(self.webpackChunkcasdoor_website=self.webpackChunkcasdoor_website||[]).push([[8383],{3905:function(e,t,a){"use strict";a.d(t,{Zo:function(){return p},kt:function(){return m}});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=n.createContext({}),d=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},p=function(e){var t=d(e.components);return n.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},c=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),c=d(a),m=r,k=c["".concat(l,".").concat(m)]||c[m]||u[m]||o;return a?n.createElement(k,i(i({ref:t},p),{},{components:a})):n.createElement(k,i({ref:t},p))}));function m(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,i=new Array(o);i[0]=c;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var d=2;d<o;d++)i[d]=a[d];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}c.displayName="MDXCreateElement"},2681:function(e,t,a){"use strict";a.r(t),a.d(t,{frontMatter:function(){return s},contentTitle:function(){return l},metadata:function(){return d},toc:function(){return p},default:function(){return c}});var n=a(4034),r=a(9973),o=(a(7294),a(3905)),i=["components"],s={sidebar_position:3,title:"Configuration du SDK Frontend & Backend"},l=void 0,d={unversionedId:"basic/SDKs",id:"basic/SDKs",isDocsHomePage:!1,title:"Configuration du SDK Frontend & Backend",description:"Introduction",source:"@site/i18n/fr/docusaurus-plugin-content-docs/current/basic/SDKs.md",sourceDirName:"basic",slug:"/basic/SDKs",permalink:"/fr/docs/basic/SDKs",editUrl:"https://github.com/casdoor/casdoor-website/tree/master/docs/basic/SDKs.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3,title:"Configuration du SDK Frontend & Backend"},sidebar:"tutorialSidebar",previous:{title:"API publique de Casdoor",permalink:"/fr/docs/basic/public-api"},next:{title:"Aper\xe7u",permalink:"/fr/docs/organization/overview"}},p=[{value:"Introduction",id:"introduction",children:[],level:2}],u={toc:p};function c(e){var t=e.components,a=(0,r.Z)(e,i);return(0,o.kt)("wrapper",(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"introduction"},"Introduction"),(0,o.kt)("p",null,"En tant que fournisseur de services (SP), Casdoor prend en charge deux protocoles d'authentification :"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"OAuth 2.0 (OIDC)")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"SAML"))),(0,o.kt)("p",null,"En tant que fournisseur d'identit\xe9 (IdP), Casdoor prend en charge un protocole d'authentification :"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"OAuth 2.0 (OIDC)"))),(0,o.kt)("p",null,"Lorsque votre application utilise Casdoor comme fournisseur d\u2019identit\xe9, elle est connect\xe9e via OIDC. La porte remplit compl\xe8tement la norme OIDC . En tant que d\xe9veloppeur d'applications, vous pouvez toujours utiliser une biblioth\xe8que client standard OIDC pour votre langue pour connecter \xe0 Casdoor. Cependant, nous fournissons \xe9galement une s\xe9rie de SDK Casdoor pour les langages populaires afin de simplifier l'interaction OIDC et fournir des wrappers faciles \xe0 utiliser pour ",(0,o.kt)("inlineCode",{parentName:"p"},"l'API publique Casdoor"),"."),(0,o.kt)("p",null,"Pour utiliser Casdoor, vous devez int\xe9grer le SDK frontend et le SDK backend. Casdoor prend en charge l'authentification des applications Web et mobiles."),(0,o.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Si votre application web est d\xe9velopp\xe9e de mani\xe8re s\xe9par\xe9e par le frontend et le backend, alors vous pouvez utiliser le SDK Javascript : ",(0,o.kt)("inlineCode",{parentName:"h5"},"casdoor-js-sdk")," pour int\xe9grer Casdoor en frontend. Si votre application web est un site web traditionnel d\xe9velopp\xe9 par JSP ou PHP, vous ne pouvez utiliser que les SDK backend. :::")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("table",{parentName:"div"},(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"SDK Frontend"),(0,o.kt)("th",{parentName:"tr",align:null},"Libell\xe9"),(0,o.kt)("th",{parentName:"tr",align:null},"Code source"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"SDK Javascript"),(0,o.kt)("td",{parentName:"tr",align:null},"Pour les applications web (sites web)"),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("a",{parentName:"td",href:"https://github.com/casdoor/casdoor-js-sdk"},"https://github.com/casdoor/casdoor-js-sdk"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"SDK Android"),(0,o.kt)("td",{parentName:"tr",align:null},"Pour les applications Android"),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("a",{parentName:"td",href:"https://github.com/casdoor/casdoor-android-sdk"},"https://github.com/casdoor/casdoor-android-sdk"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"SDK iOS"),(0,o.kt)("td",{parentName:"tr",align:null},"Pour les applications iOS"),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("a",{parentName:"td",href:"https://github.com/casdoor/casdoor-ios-sdk"},"https://github.com/casdoor/casdoor-ios-sdk"))))),(0,o.kt)("p",{parentName:"div"},"Ensuite, utilisez l'un des SDKs backend suivants bas\xe9s sur la langue de votre code backend :"),(0,o.kt)("table",{parentName:"div"},(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"SDK Backend"),(0,o.kt)("th",{parentName:"tr",align:null},"Code source"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"Aller au SDK"),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("a",{parentName:"td",href:"https://github.com/casdoor/casdoor-go-sdk"},"https://github.com/casdoor/casdoor-go-sdk"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"SDK Java"),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("a",{parentName:"td",href:"https://github.com/casdoor/casdoor-java-sdk"},"https://github.com/casdoor/casdoor-java-sdk"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"Node.js SDK"),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("a",{parentName:"td",href:"https://github.com/casdoor/casdoor-nodejs-sdk"},"https://github.com/casdoor/casdoor-nodejs-sdk"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"Python SDK"),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("a",{parentName:"td",href:"https://github.com/casdoor/casdoor-python-sdk"},"https://github.com/casdoor/casdoor-python-sdk"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"SDK PHP"),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("a",{parentName:"td",href:"https://github.com/casdoor/casdoor-php-sdk"},"https://github.com/casdoor/casdoor-php-sdk"))))),(0,o.kt)("p",{parentName:"div"},"Dans ce chapitre, nous allons vous montrer comment utiliser ces SDK, c'est-\xe0-dire les \xe9tapes basiques/g\xe9n\xe9rales pour les utiliser."),(0,o.kt)("h2",{parentName:"div",id:"comment-configurer"},"Comment configurer"),(0,o.kt)("h3",{parentName:"div",id:"1-initialisation"},"1. Initialisation"),(0,o.kt)("p",{parentName:"div"},"La premi\xe8re \xe9tape consiste \xe0 entrer en contact avec le serveur de caisse. Vous devez fournir l'adresse du serveur casdoor , le ClientId d'identification et le ClientSecret de l'application, le secret jwt, et le nom de l'organisation o\xf9 l'application est situ\xe9e, qui sont tous de type cha\xeene."),(0,o.kt)("p",{parentName:"div"},"\xc0 peu pr\xe8s comme \xe7a :"),(0,o.kt)("table",{parentName:"div"},(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"Nom (dans ordre)"),(0,o.kt)("th",{parentName:"tr",align:null},"Doit \xeatre"),(0,o.kt)("th",{parentName:"tr",align:null},"Libell\xe9"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"endpoint"),(0,o.kt)("td",{parentName:"tr",align:null},"Oui"),(0,o.kt)("td",{parentName:"tr",align:null},"Adresse du serveur Casdoor telle que ",(0,o.kt)("inlineCode",{parentName:"td"},"http://localhost:8000"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"clientId"),(0,o.kt)("td",{parentName:"tr",align:null},"Oui"),(0,o.kt)("td",{parentName:"tr",align:null},"ID client de l'application")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"clientSecret"),(0,o.kt)("td",{parentName:"tr",align:null},"Oui"),(0,o.kt)("td",{parentName:"tr",align:null},"Mot de passe client")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"jwtSecret"),(0,o.kt)("td",{parentName:"tr",align:null},"Oui"),(0,o.kt)("td",{parentName:"tr",align:null},"Lire depuis le fichier token_jwt_key.pem")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"Nom de l'organisation"),(0,o.kt)("td",{parentName:"tr",align:null},"Oui"),(0,o.kt)("td",{parentName:"tr",align:null},"Application.organisation")))),(0,o.kt)("p",{parentName:"div"},"La signature de fonction en Go est la suivante, similaire aux autres langues:"),(0,o.kt)("pre",{parentName:"div"},(0,o.kt)("code",{parentName:"pre",className:"language-go"},"func InitConfig(endpoint string, clientId string, clientSecret string, jwtSecret string, organizationName string)\n")),(0,o.kt)("p",{parentName:"div"},"Vous pouvez vous r\xe9f\xe9rer \xe0 l'utilisation de ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/casbin/casnode/blob/master/controllers/account.go#L32"},"dans Casnode"),","),(0,o.kt)("pre",{parentName:"div"},(0,o.kt)("code",{parentName:"pre",className:"language-go"},'var CasdoorEndpoint = "http://localhost:8000"\nvar ClientId = "541738959670d221d59d"\nvar ClientSecret = "66863369a64a5863827cf949bab70ed560ba24bf"\nvar JwtSecret = "CasdoorSecret"\nvar CasdoorOrganization = "casbin-forum"\n\nfunc init() {\n    auth. nitConfig(CasdoorEndpoint, ClientId, ClientSecret, JwtSecret, CasdoorOrganization)\n}\n')),(0,o.kt)("p",{parentName:"div"},"Un comportement plus sp\xe9cifique peut se r\xe9f\xe9rer aux ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/casdoor/casdoor-go-sdk"},"codes sources de casdoor-go-sdk"),"."),(0,o.kt)("h3",{parentName:"div",id:"2-acc\xe8s-sdk-casdoor"},"2. Acc\xe8s SDK Casdoor"),(0,o.kt)("p",{parentName:"div"},"Avec la configuration pr\xe9c\xe9dente de ",(0,o.kt)("inlineCode",{parentName:"p"},"authConfig"),", Casdoor SDK peut maintenant se tourner vers le serveur casdoor pour v\xe9rifier les utilisateurs, Notez que SDK utilise la m\xe9thode ",(0,o.kt)("inlineCode",{parentName:"p"},"SetBasicAuth")," dans la biblioth\xe8que net/http pour obtenir ",(0,o.kt)("inlineCode",{parentName:"p"},"ClientId")," et ",(0,o.kt)("inlineCode",{parentName:"p"},"ClientSecret")," depuis le serveur Casdoor et v\xe9rifier les utilisateurs dans votre application."),(0,o.kt)("p",{parentName:"div"},"Pour plus de d\xe9tails, reportez-vous \xe0 ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/casdoor/casdoor-go-sdk/blob/master/auth/base.go#L42"},"https://github.com/casdoor/casdoor-go-sdk/blob/master/auth/base.go#L42")),(0,o.kt)("h3",{parentName:"div",id:"3-obtenir-le-jeton-et-analyser"},"3. Obtenir le jeton et analyser"),(0,o.kt)("p",{parentName:"div"},"Apr\xe8s la v\xe9rification de casdoor pass\xe9e, elle sera redirig\xe9e vers votre application avec code et \xe9tat, comme ",(0,o.kt)("inlineCode",{parentName:"p"},"http://forum.casbin.org?code=xxx&state=yyyy"),"."),(0,o.kt)("p",{parentName:"div"},"Votre application web peut obtenir le code `",(0,o.kt)("inlineCode",{parentName:"p"},", "),"\xe9tat",(0,o.kt)("inlineCode",{parentName:"p"},"et appeler"),"GetOAuthToken(code, state)`, puis analyser le jeton jwt."),(0,o.kt)("p",{parentName:"div"},"Voir ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/casbin/casnode/blob/master/controllers/auth.go#L36"},"Utilisation en Casnode")," comme r\xe9f\xe9rence :"),(0,o.kt)("pre",{parentName:"div"},(0,o.kt)("code",{parentName:"pre",className:"language-go"},'code := c.Input().Get("code")\nstate := c.Input().Get("state")\n\ntoken, errr := auth. etOAuthToken(code, state)\nif err != nil {\n    panique(err)\n}\n\nclaims, err := auth. arseJwtToken(token.AccessToken)\nif err != nil {\n    panique(err)\n}\n')),(0,o.kt)("h3",{parentName:"div",id:"4-d\xe9finir-la-session-dans-votre-application"},"4. D\xe9finir la session dans votre application"),(0,o.kt)("p",{parentName:"div"},"Vous devez v\xe9rifier les informations analys\xe9es depuis la troisi\xe8me \xe9tape. Apr\xe8s qu'il soit correct (il peut \xeatre modifi\xe9), il prouve que la v\xe9rification de l'utilisateur est pass\xe9e, et vous pouvez configurer la session dans votre propre application."),(0,o.kt)("p",{parentName:"div"},(0,o.kt)("strong",{parentName:"p"},"\xc0 ce stade, la connexion de l'utilisateur est effectivement termin\xe9e"),"."),(0,o.kt)("p",{parentName:"div"},"La m\xe9thode de d\xe9finition de la session varie grandement selon les langues et les cadres, casnode utilise le ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/beego/beego/"},"beego framework")," et d\xe9finit la session par la m\xe9thode d'encapsulation ",(0,o.kt)("inlineCode",{parentName:"p"},"c. etSessionUser()")," , ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/casbin/casnode/blob/master/controllers/base.go#L44"},"code source"),"."),(0,o.kt)("p",{parentName:"div"},(0,o.kt)("a",{parentName:"p",href:"https://github.com/casbin/casnode/blob/master/controllers/auth.go#L47"},"Utilisation en Casnode"),","),(0,o.kt)("pre",{parentName:"div"},(0,o.kt)("code",{parentName:"pre",className:"language-go"},"token, err := auth.GetOAuthToken(code, state)\nif err != nil {\n    panique(err)\n}\n\nclaims, err := auth.ParseJwtToken(token. ccessToken)\nif err != nil {\n    panique(err)\n}\n\nr\xe9clame. ccessToken = token.AccessToken\nc.SetSessionUser(claims) // voir ici\n")),(0,o.kt)("p",{parentName:"div"},"Voil\xe0!"),(0,o.kt)("h3",{parentName:"div",id:"5-interagir-avec-la-table-des-utilisateurs"},"5. Interagir avec la table des utilisateurs"),(0,o.kt)("p",{parentName:"div"},"Vous pouvez non seulement avoir besoin de vous connecter, mais vous obtiendrez \xe9galement les informations de l'utilisateur, ou de mettre \xe0 jour les informations des utilisateurs, etc."),(0,o.kt)("p",{parentName:"div"},"Le SDK fournit plusieurs fonctions cl\xe9s, et vous devez les personnaliser plus en d\xe9tail, ou rapporter un probl\xe8me !"),(0,o.kt)("ul",{parentName:"div"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"GetUser(cha\xeene de nom)"),", obtenez un utilisateur par nom d'utilisateur."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"GetUsers()"),", obtenez tous les utilisateurs."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"UpdateUser(auth.User)/AddUser(auth.User)/DeleteUser(auth.User)"),", \xe9crire l'utilisateur dans la base de donn\xe9es."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"CheckUserPassword(auth.User)"),", v\xe9rifiez le mot de passe de l'utilisateur.")))))}c.isMDXComponent=!0}}]);