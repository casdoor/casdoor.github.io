"use strict";(self.webpackChunkcasdoor_website=self.webpackChunkcasdoor_website||[]).push([[5021],{3905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>m});var r=a(67294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var s=r.createContext({}),p=function(e){var t=r.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},d=function(e){var t=p(e.components);return r.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},c=r.forwardRef((function(e,t){var a=e.components,n=e.mdxType,i=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),c=p(a),m=n,k=c["".concat(s,".").concat(m)]||c[m]||u[m]||i;return a?r.createElement(k,o(o({ref:t},d),{},{components:a})):r.createElement(k,o({ref:t},d))}));function m(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var i=a.length,o=new Array(i);o[0]=c;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:n,o[1]=l;for(var p=2;p<i;p++)o[p]=a[p];return r.createElement.apply(null,o)}return r.createElement.apply(null,a)}c.displayName="MDXCreateElement"},16595:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>l,toc:()=>p});var r=a(87462),n=(a(67294),a(3905));const i={title:"Servidor LDAP",description:"C\xf3mo conectar el cliente LDAP en Casdoor",keywords:["Servidor LDAP"],authors:["forestmgy"]},o=void 0,l={unversionedId:"ldap/ldapserver",id:"ldap/ldapserver",title:"Servidor LDAP",description:"C\xf3mo conectar el cliente LDAP en Casdoor",source:"@site/i18n/es/docusaurus-plugin-content-docs/current/ldap/ldapserver.md",sourceDirName:"ldap",slug:"/ldap/ldapserver",permalink:"/es/docs/ldap/ldapserver",draft:!1,editUrl:"https://github.com/casdoor/casdoor-website/edit/master/docs/ldap/ldapserver.md",tags:[],version:"current",frontMatter:{title:"Servidor LDAP",description:"C\xf3mo conectar el cliente LDAP en Casdoor",keywords:["Servidor LDAP"],authors:["forestmgy"]},sidebar:"tutorialSidebar",previous:{title:"Configuraci\xf3n y Sincronizaci\xf3n de Usuarios LDAP",permalink:"/es/docs/ldap/config"},next:{title:"RADIUS",permalink:"/es/docs/category/radius"}},s={},p=[{value:"Puerto del Servidor LDAP",id:"puerto-del-servidor-ldap",level:3},{value:"C\xf3mo funciona",id:"c\xf3mo-funciona",level:3},{value:"C\xf3mo Enlazar",id:"c\xf3mo-enlazar",level:3},{value:"C\xf3mo Buscar",id:"c\xf3mo-buscar",level:3},{value:"User Attributes",id:"user-attributes",level:4},{value:"Supported RFC-Style Features",id:"supported-rfc-style-features",level:3},{value:"Partial Root DSE Query Support",id:"partial-root-dse-query-support",level:4},{value:"Schema Query Support",id:"schema-query-support",level:4},{value:"POSIX Filters",id:"posix-filters",level:4}],d={toc:p};function u(e){let{components:t,...a}=e;return(0,n.kt)("wrapper",(0,r.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("p",null,"Muchos sistemas, como ",(0,n.kt)("inlineCode",{parentName:"p"},"Nexus"),", admiten autenticaci\xf3n LDAP. Casdoor tambi\xe9n implementa un servidor LDAP simple, que admite operaciones de enlace y b\xfasqueda."),(0,n.kt)("p",null,"Este documento describe c\xf3mo conectarse al servidor LDAP en Casdoor e implementar una autenticaci\xf3n de inicio de sesi\xf3n simple."),(0,n.kt)("h3",{id:"puerto-del-servidor-ldap"},"Puerto del Servidor LDAP"),(0,n.kt)("p",null,"El servidor LDAP escucha en el puerto ",(0,n.kt)("inlineCode",{parentName:"p"},"389")," por defecto. You can change the default port by modifying the ",(0,n.kt)("inlineCode",{parentName:"p"},"ldapServerPort")," value in ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/casdoor/casdoor/blob/master/conf/app.conf#L27"},"conf/app.conf"),"."),(0,n.kt)("h3",{id:"c\xf3mo-funciona"},"C\xf3mo funciona"),(0,n.kt)("p",null,"Similar al cliente LDAP en Casdoor, los usuarios en el servidor LDAP son todas subclases de ",(0,n.kt)("inlineCode",{parentName:"p"},"posixAccount"),"."),(0,n.kt)("p",null,"Cuando el servidor recibe un conjunto de datos transmitidos por LDAP, analizar\xe1 el ",(0,n.kt)("inlineCode",{parentName:"p"},"cn")," y ",(0,n.kt)("inlineCode",{parentName:"p"},"ou"),", donde ",(0,n.kt)("inlineCode",{parentName:"p"},"cn")," representa el nombre de usuario y ",(0,n.kt)("inlineCode",{parentName:"p"},"ou")," representa el nombre de la organizaci\xf3n. El ",(0,n.kt)("inlineCode",{parentName:"p"},"dc")," no importa."),(0,n.kt)("p",null,"Si es una operaci\xf3n de enlace, el servidor usar\xe1 Casdoor para verificar el nombre de usuario y la contrase\xf1a y otorgar al usuario permiso en Casdoor."),(0,n.kt)("p",null,"Si es una operaci\xf3n de b\xfasqueda, el servidor verificar\xe1 si la operaci\xf3n de b\xfasqueda es legal, de acuerdo con los permisos otorgados al cliente por la operaci\xf3n de enlace, y devolver\xe1 una respuesta."),(0,n.kt)("admonition",{type:"info"},(0,n.kt)("p",{parentName:"admonition"},"Solo admitimos ",(0,n.kt)("strong",{parentName:"p"},"Autenticaci\xf3n Simple"),".")),(0,n.kt)("h3",{id:"c\xf3mo-enlazar"},"C\xf3mo Enlazar"),(0,n.kt)("p",null,"En el servidor LDAP de Casdoor, solo reconocemos ",(0,n.kt)("inlineCode",{parentName:"p"},"DN")," similar a este formato: ",(0,n.kt)("inlineCode",{parentName:"p"},"cn=admin,ou=built-in,dc=example,dc=com"),"."),(0,n.kt)("p",null,"Por favor, establezca el ",(0,n.kt)("inlineCode",{parentName:"p"},"DN")," del usuario administrador al formato anterior. Luego, puede usar este ",(0,n.kt)("inlineCode",{parentName:"p"},"DN")," para enlazar al servidor LDAP con la contrase\xf1a del usuario para iniciar sesi\xf3n en Casdoor para verificaci\xf3n. Si la verificaci\xf3n del servidor es exitosa, al usuario se le otorgar\xe1 autoridad en Casdoor."),(0,n.kt)("h3",{id:"c\xf3mo-buscar"},"C\xf3mo Buscar"),(0,n.kt)("p",null,"Una vez que la operaci\xf3n de enlace se completa con \xe9xito, puede realizar la operaci\xf3n de b\xfasqueda. Hay algunas diferencias entre las operaciones de b\xfasqueda y enlace."),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"To search for a certain user, such as ",(0,n.kt)("inlineCode",{parentName:"li"},"Alice")," under the ",(0,n.kt)("inlineCode",{parentName:"li"},"built-in")," organization, you should use a ",(0,n.kt)("inlineCode",{parentName:"li"},"DN")," like this: ",(0,n.kt)("inlineCode",{parentName:"li"},"ou=built-in,dc=example,dc=com"),", and add ",(0,n.kt)("inlineCode",{parentName:"li"},"cn=Alice")," in the Filter field."),(0,n.kt)("li",{parentName:"ul"},"To search for all users under a certain organization, such as all users in ",(0,n.kt)("inlineCode",{parentName:"li"},"built-in"),", you should use a ",(0,n.kt)("inlineCode",{parentName:"li"},"DN")," like this: ",(0,n.kt)("inlineCode",{parentName:"li"},"ou=built-in,dc=example,dc=com"),", and add ",(0,n.kt)("inlineCode",{parentName:"li"},"cn=*")," in the Filter field."),(0,n.kt)("li",{parentName:"ul"},"To search for all users in all organizations (assuming the user has sufficient permissions), you should use a ",(0,n.kt)("inlineCode",{parentName:"li"},"DN")," like this: ",(0,n.kt)("inlineCode",{parentName:"li"},"ou=*,dc=example,dc=com"),", and add ",(0,n.kt)("inlineCode",{parentName:"li"},"cn=*")," in the Filter field."),(0,n.kt)("li",{parentName:"ul"},"To search for all users in a specific group, you should use a filter query like this: ",(0,n.kt)("inlineCode",{parentName:"li"},"(memberOf=organization_name/group_name)")," in the Filter field.")),(0,n.kt)("h4",{id:"user-attributes"},"User Attributes"),(0,n.kt)("p",null,"When searching for users, the LDAP server returns the following attributes for each user entry:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Attribute"),(0,n.kt)("th",{parentName:"tr",align:null},"Description"),(0,n.kt)("th",{parentName:"tr",align:null},"Mapped from"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("inlineCode",{parentName:"td"},"cn")),(0,n.kt)("td",{parentName:"tr",align:null},"Common name"),(0,n.kt)("td",{parentName:"tr",align:null},"User's name")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("inlineCode",{parentName:"td"},"uid")),(0,n.kt)("td",{parentName:"tr",align:null},"User ID"),(0,n.kt)("td",{parentName:"tr",align:null},"User's unique identifier")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("inlineCode",{parentName:"td"},"homeDirectory")),(0,n.kt)("td",{parentName:"tr",align:null},"Home directory path"),(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("inlineCode",{parentName:"td"},"/home/{username}"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("inlineCode",{parentName:"td"},"mail")),(0,n.kt)("td",{parentName:"tr",align:null},"Email address"),(0,n.kt)("td",{parentName:"tr",align:null},"User's email")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("inlineCode",{parentName:"td"},"mobile")),(0,n.kt)("td",{parentName:"tr",align:null},"Mobile phone number"),(0,n.kt)("td",{parentName:"tr",align:null},"User's phone")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("inlineCode",{parentName:"td"},"sn")),(0,n.kt)("td",{parentName:"tr",align:null},"Surname (last name)"),(0,n.kt)("td",{parentName:"tr",align:null},"User's last name")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("inlineCode",{parentName:"td"},"givenName")),(0,n.kt)("td",{parentName:"tr",align:null},"Given name (first name)"),(0,n.kt)("td",{parentName:"tr",align:null},"User's first name")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("inlineCode",{parentName:"td"},"memberOf")),(0,n.kt)("td",{parentName:"tr",align:null},"Group memberships"),(0,n.kt)("td",{parentName:"tr",align:null},"User's groups")))),(0,n.kt)("h3",{id:"supported-rfc-style-features"},"Supported RFC-Style Features"),(0,n.kt)("h4",{id:"partial-root-dse-query-support"},"Partial Root DSE Query Support"),(0,n.kt)("p",null,'The Root DSE (baseDN="") provides directory capabilities.'),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Query namingContexts (organization list): ",(0,n.kt)("inlineCode",{parentName:"p"},'ldapsearch -x -H ldap://<casdoor-host>:389 -D "cn=admin,ou=built-in" -w <passwd> -b "" -s base "(objectClass=*)" namingContexts'),(0,n.kt)("br",{parentName:"p"}),"\n","Returns visible organization DNs.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Query subschemaSubentry: ",(0,n.kt)("inlineCode",{parentName:"p"},'ldapsearch -x -H ldap://<casdoor-host>:389 -D "cn=admin,ou=built-in" -w <passwd> -b "" -s base "(objectClass=*)" subschemaSubentry'),(0,n.kt)("br",{parentName:"p"}),"\n","Returns ",(0,n.kt)("inlineCode",{parentName:"p"},"subschemaSubentry: cn=Subschema"),"."))),(0,n.kt)("h4",{id:"schema-query-support"},"Schema Query Support"),(0,n.kt)("p",null,"Query objectClasses: ",(0,n.kt)("inlineCode",{parentName:"p"},'ldapsearch -x -H ldap://<casdoor-host>:389 -D "cn=admin,ou=built-in" -w <passwd> -b "cn=Subschema" -s base "(objectClass=*)" objectClasses'),(0,n.kt)("br",{parentName:"p"}),"\n","Returns definitions for posixAccount and posixGroup."),(0,n.kt)("h4",{id:"posix-filters"},"POSIX Filters"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"(objectClass=posixAccount)")," returns user list."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"(objectClass=posixGroup)")," returns group list under organization (e.g., ",(0,n.kt)("inlineCode",{parentName:"li"},'ldapsearch -x -H ldap://<casdoor-server>:389 -D "cn=admin,ou=built-in" -w <passwd> -b "ou=<org>" "(objectClass=posixGroup)"'),").")),(0,n.kt)("p",null,"Note: ",(0,n.kt)("inlineCode",{parentName:"p"},"(objectClass=posixGroup)")," Does not support combined searches like ",(0,n.kt)("inlineCode",{parentName:"p"},"(&(objectClass=posixGroup)(cn=<group>))"),". Please use ",(0,n.kt)("inlineCode",{parentName:"p"},"memberOf")," for searching members in a group."))}u.isMDXComponent=!0}}]);