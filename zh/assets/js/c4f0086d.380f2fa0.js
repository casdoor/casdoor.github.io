"use strict";(self.webpackChunkcasdoor_website=self.webpackChunkcasdoor_website||[]).push([[9922],{6211:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>i,contentTitle:()=>d,default:()=>A,frontMatter:()=>l,metadata:()=>s,toc:()=>r});var a=n(87462),o=(n(67294),n(3905));n(61839);const l={title:"\u5c06\u9759\u6001\u6587\u4ef6\u6258\u7ba1\u5230CDN",description:"\u5728CDN\u4e2d\u6258\u7ba1\u524d\u7aef\u9759\u6001\u6587\u4ef6",keywords:["\u90e8\u7f72","cdn","\u524d\u7aef"]},d=void 0,s={unversionedId:"deployment/deploy-cdn",id:"deployment/deploy-cdn",title:"\u5c06\u9759\u6001\u6587\u4ef6\u6258\u7ba1\u5230CDN",description:"\u5728CDN\u4e2d\u6258\u7ba1\u524d\u7aef\u9759\u6001\u6587\u4ef6",source:"@site/i18n/zh/docusaurus-plugin-content-docs/current/deployment/deploy-cdn.md",sourceDirName:"deployment",slug:"/deployment/deploy-cdn",permalink:"/zh/docs/deployment/deploy-cdn",draft:!1,editUrl:"https://crowdin.com/project/casdoor-website/zh-CN",tags:[],version:"current",frontMatter:{title:"\u5c06\u9759\u6001\u6587\u4ef6\u6258\u7ba1\u5230CDN",description:"\u5728CDN\u4e2d\u6258\u7ba1\u524d\u7aef\u9759\u6001\u6587\u4ef6",keywords:["\u90e8\u7f72","cdn","\u524d\u7aef"]},sidebar:"tutorialSidebar",previous:{title:"\u6570\u636e\u521d\u59cb\u5316",permalink:"/zh/docs/deployment/data-initialization"},next:{title:"\u5c06\u9759\u6001\u6587\u4ef6\u6258\u7ba1\u5728\u5c40\u57df\u7f51\u5185",permalink:"/zh/docs/deployment/deploy-intranet"}},i={},r=[{value:"\u51c6\u5907\u5de5\u4f5c",id:"\u51c6\u5907\u5de5\u4f5c",level:2},{value:"\u4f7f\u7528\u8bf4\u660e",id:"\u4f7f\u7528\u8bf4\u660e",level:2},{value:"\u5de5\u4f5c\u539f\u7406",id:"\u5de5\u4f5c\u539f\u7406",level:2}],p={toc:r};function A(e){let{components:t,...l}=e;return(0,o.kt)("wrapper",(0,a.Z)({},p,l,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"\u524d\u7aef\u9759\u6001\u8d44\u6e90 (.js, .css \u6587\u4ef6) \u5728 ",(0,o.kt)("inlineCode",{parentName:"p"},"web/build/static/")," \u76ee\u5f55\u4e0b\u3002 \u5982\u679c\u60a8\u60f3\u8981\u5c06\u5b83\u90e8\u7f72\u5728 \u516c\u5171\u4e91\u670d\u52a1",(0,o.kt)("strong",{parentName:"p"},"CDN"),"\u4e2d Casdoor \u63d0\u4f9b\u4e86\u4e00\u4e2a\u811a\u672c\uff0c\u8ba9\u60a8\u53ef\u4ee5\u8f7b\u677e\u5730\u90e8\u7f72\u524d\u7aef\u9759\u6001\u6587\u4ef6 \u8bf7\u6309\u7167\u4ee5\u4e0b\u6b65\u9aa4\u64cd\u4f5c\uff1a"),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},"\u6211\u4eec\u5047\u5b9a\u60a8\u5df2\u7ecf\u6784\u5efa\u8fc7\u4e86Cassdoor\u7684\u524d\u7aef\u4ee3\u7801\u3002 \u5982\u679c\u8fd8\u6ca1\u6709\uff0c\u8bf7\u53c2\u7167\uff1a ",(0,o.kt)("a",{parentName:"p",href:"/docs/basic/server-installation#frontend-1"},"\u6587\u6863"),"\u3002")),(0,o.kt)("h2",{id:"\u51c6\u5907\u5de5\u4f5c"},"\u51c6\u5907\u5de5\u4f5c"),(0,o.kt)("p",null,"\u9996\u5148\uff0c\u60a8\u9700\u8981\u5728 Casdoor UI \u4e2d\u521b\u5efa\u4e00\u4e2a\u6709\u6548\u7684 ",(0,o.kt)("a",{parentName:"p",href:"/docs/provider/storage"},"\u5b58\u50a8\u63d0\u4f9b\u5546")," \u3002\u60a8\u53ef\u4ee5\u53c2\u8003 ",(0,o.kt)("a",{parentName:"p",href:"/docs/provider/storage#example"},"\u793a\u4f8b"),"\u3002"),(0,o.kt)("admonition",{type:"caution"},(0,o.kt)("p",{parentName:"admonition"},"\u5f53\u60a8\u586b\u5199 ",(0,o.kt)("inlineCode",{parentName:"p"},"\u57df"),"\u5b57\u6bb5\u65f6\uff0c\u8bf7\u4ee5 '/' \u7ed3\u675f ",(0,o.kt)("img",{alt:"storage_domian",src:n(53014).Z,width:"507",height:"75"}))),(0,o.kt)("h2",{id:"\u4f7f\u7528\u8bf4\u660e"},"\u4f7f\u7528\u8bf4\u660e"),(0,o.kt)("p",null,"\u811a\u672c\u653e\u5728\u6587\u4ef6",(0,o.kt)("a",{parentName:"p",href:"https://github.com/casdoor/casdoor/blob/7b0b426a76fd77b89817e0eafcccaed8d15b8cf4/deployment/deploy_test.go"},"deployment/deploy_test.go"),"\u4e2d\u3002"),(0,o.kt)("p",null,"\u4f60\u9700\u8981\u4fee\u6539 ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/casdoor/casdoor/blob/7b0b426a76fd77b89817e0eafcccaed8d15b8cf4/deployment/deploy_test.go"},"deploy_test.go"),"\u4e2d\u4f20\u5165",(0,o.kt)("inlineCode",{parentName:"p"},"GetProvider()"),"\u65b9\u6cd5\u7684\u53c2\u6570 ",(0,o.kt)("inlineCode",{parentName:"p"},"id"),"\u7684\u503c\u3002 \u63d0\u4f9b\u5546 ",(0,o.kt)("inlineCode",{parentName:"p"},"id")," \u7684\u683c\u5f0f\u662f ",(0,o.kt)("inlineCode",{parentName:"p"},"<owner>/<name>")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-go"},'func TestDeployStaticFiles(t *testing.T) {\n    provider := object.GetProvider("admin/provider_storage_aliyun_oss")\n    deployStaticFiles(provider)\n}\n')),(0,o.kt)("p",null,"\u7136\u540e\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u6765\u8fd0\u884c\u811a\u672c\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"cd deployment\ngo test\n")),(0,o.kt)("p",null,"\u5982\u679c\u6267\u884c\u6210\u529f\uff0c\u60a8\u5c06\u770b\u5230\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"PASS\nok      github.com/casdoor/casdoor/deployment   2.951s\n")),(0,o.kt)("h2",{id:"\u5de5\u4f5c\u539f\u7406"},"\u5de5\u4f5c\u539f\u7406"),(0,o.kt)("p",null,"\u811a\u672c\u7684\u529f\u80fd\uff1a"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"\u5b83\u5c06\u4f1a\u4e0a\u4f20\u6587\u4ef6\u5939\uff1a ",(0,o.kt)("inlineCode",{parentName:"li"},"css/")," and ",(0,o.kt)("inlineCode",{parentName:"li"},"js/")," \u4e2d\u6240\u6709\u6587\u4ef6\u5230\u6307\u5b9a\u7684\u5b58\u50a8\u63d0\u4f9b\u5546\u7684 CDN \u670d\u52a1\u4e0a\u3002"),(0,o.kt)("li",{parentName:"ul"},"Replace all the URLs of ",(0,o.kt)("inlineCode",{parentName:"li"},".css")," and ",(0,o.kt)("inlineCode",{parentName:"li"},".js")," files in the ",(0,o.kt)("inlineCode",{parentName:"li"},"web/build/index.html")," with the URLs hosted in the CDN.")),(0,o.kt)("p",null,"\u60a8\u4ecd\u7136\u9700\u8981\u4fdd\u7559 ",(0,o.kt)("inlineCode",{parentName:"p"},"index.html"),"\u3002 After the static files are uploaded to CDN, ",(0,o.kt)("inlineCode",{parentName:"p"},"index.html")," will still be requested by users through Casdoor Go backend, and those static files in the CDN are then requested through the URLs in ",(0,o.kt)("inlineCode",{parentName:"p"},"index.html"),"."))}A.isMDXComponent=!0},53014:(e,t,n)=>{n.d(t,{Z:()=>a});const a="data:image/png;base64,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"}}]);