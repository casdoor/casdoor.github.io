"use strict";(self.webpackChunkcasdoor_website=self.webpackChunkcasdoor_website||[]).push([[8660],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>h});var o=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,i=function(e,t){if(null==e)return{};var n,o,i={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=o.createContext({}),p=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},c=function(e){var t=p(e.components);return o.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},u=o.forwardRef((function(e,t){var n=e.components,i=e.mdxType,a=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),u=p(n),h=i,g=u["".concat(s,".").concat(h)]||u[h]||d[h]||a;return n?o.createElement(g,r(r({ref:t},c),{},{components:n})):o.createElement(g,r({ref:t},c))}));function h(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=n.length,r=new Array(a);r[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:i,r[1]=l;for(var p=2;p<a;p++)r[p]=n[p];return o.createElement.apply(null,r)}return o.createElement.apply(null,n)}u.displayName="MDXCreateElement"},18169:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>r,default:()=>d,frontMatter:()=>a,metadata:()=>l,toc:()=>p});var o=n(87462),i=(n(67294),n(3905));const a={title:"\u5982\u4f55\u542f\u7528\u5355\u70b9\u767b\u5f55",description:"\u542f\u7528\u5355\u70b9\u767b\u5f55",keywords:["SSO","\u5355\u70b9\u767b\u5f55"],authors:["leo220yuyaodog"]},r=void 0,l={unversionedId:"how-to-connect/single-sign-on",id:"how-to-connect/single-sign-on",title:"\u5982\u4f55\u542f\u7528\u5355\u70b9\u767b\u5f55",description:"\u542f\u7528\u5355\u70b9\u767b\u5f55",source:"@site/i18n/zh/docusaurus-plugin-content-docs/current/how-to-connect/single-sign-on.md",sourceDirName:"how-to-connect",slug:"/how-to-connect/single-sign-on",permalink:"/zh/docs/how-to-connect/single-sign-on",draft:!1,editUrl:"https://github.com/casdoor/casdoor-website/edit/master/docs/how-to-connect/single-sign-on.md",tags:[],version:"current",frontMatter:{title:"\u5982\u4f55\u542f\u7528\u5355\u70b9\u767b\u5f55",description:"\u542f\u7528\u5355\u70b9\u767b\u5f55",keywords:["SSO","\u5355\u70b9\u767b\u5f55"],authors:["leo220yuyaodog"]},sidebar:"tutorialSidebar",previous:{title:"Casdoor SDKs",permalink:"/zh/docs/how-to-connect/sdk"},next:{title:"Vue SDK",permalink:"/zh/docs/how-to-connect/vue-sdk"}},s={},p=[{value:"\u7b80\u4ecb",id:"\u7b80\u4ecb",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Add Silent Sign-In",id:"add-silent-sign-in",level:2},{value:"Add Popup Sign-In",id:"add-popup-sign-in",level:2},{value:"\u4f7f\u7528 SSO",id:"\u4f7f\u7528-sso",level:2}],c={toc:p};function d(e){let{components:t,...a}=e;return(0,i.kt)("wrapper",(0,o.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"\u7b80\u4ecb"},"\u7b80\u4ecb"),(0,i.kt)("p",null,"\u60a8\u5df2\u8fde\u63a5\u4e86 Casdoor \uff0c\u5e76\u5728\u7ec4\u7ec7\u4e2d\u914d\u7f6e\u4e86\u591a\u4e2a\u5e94\u7528\u7a0b\u5e8f\u3002 You want users to sign in once to any app in the organization and then be able to sign in when they go to another app without any extra clicks."),(0,i.kt)("p",null,"We offer this single sign-on feature. To enable it, you just need to:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Enable the Auto Sign-In button."),(0,i.kt)("li",{parentName:"ul"},"Fill in the URL for the home page."),(0,i.kt)("li",{parentName:"ul"},"Add a ",(0,i.kt)("strong",{parentName:"li"},"Silent Sign-In")," function to the application home page.")),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"The basic sign-in process provided by Casdoor allows users to log in to other applications in the organization by selecting the user who is currently logged in or using another account."),(0,i.kt)("p",{parentName:"admonition"},"After enabling auto sign-in, the selection box will not be displayed, and the logged-in user will log in directly.")),(0,i.kt)("h2",{id:"configuration"},"Configuration"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},'Fill in the "home" field. \u5b83\u53ef\u4ee5\u662f\u5e94\u7528\u7a0b\u5e8f\u7684\u4e3b\u9875\u6216\u767b\u5f55\u9875\u9762\u3002')),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"sso_home.png",src:n(39493).Z,width:"1270",height:"717"}),"\n2. Enable the Auto Sign-In button."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"sso_signin.png",src:n(40871).Z,width:"505",height:"405"})),(0,i.kt)("h2",{id:"add-silent-sign-in"},"Add Silent Sign-In"),(0,i.kt)("p",null,"In fact, we implement auto login by carrying parameters in the URL. Therefore, your applications need to have a method to trigger the login after jumping to the URL. We provide the ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/casdoor/casdoor-react-sdk"},"casdoor-react-sdk")," to help you quickly implement this feature. You can see the details in ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/casdoor/casdoor-react-sdk#use-in-react"},"use-in-react"),"."),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("p",{parentName:"admonition"},"\u5de5\u4f5c\u539f\u7406"),(0,i.kt)("ol",{parentName:"admonition"},(0,i.kt)("li",{parentName:"ol"},"\u5728\u5e94\u7528\u7a0b\u5e8f\u4e3b\u9875\u7684 URL \u4e2d\uff0c\u6211\u4eec\u5c06\u643a\u5e26 ",(0,i.kt)("inlineCode",{parentName:"li"},"silentSignin")," \u53c2\u6570\u3002"),(0,i.kt)("li",{parentName:"ol"},"In your home page, determine whether you need to log in silently (automatically) by checking the ",(0,i.kt)("inlineCode",{parentName:"li"},"silentSignin")," parameter. If ",(0,i.kt)("inlineCode",{parentName:"li"},"silentSignin === 1"),", the function should return the ",(0,i.kt)("inlineCode",{parentName:"li"},"SilentSignin")," component, which will help you initiate a login request. Since you have auto-login enabled, users will log in automatically without clicking."))),(0,i.kt)("h2",{id:"add-popup-sign-in"},"Add Popup Sign-In"),(0,i.kt)("p",null,'The "popup sign-in" feature will open a small window. After logging in to Casdoor in the child window, it will send authentication information to the main window and then close automatically. We implement this feature by carrying parameters in the URL.'),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("p",{parentName:"admonition"},"How to use"),(0,i.kt)("p",{parentName:"admonition"},"Use the ",(0,i.kt)("inlineCode",{parentName:"p"},"popupSignin()")," method in the ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/casdoor/casdoor-js-sdk"},"casdoor-js-sdk")," to quickly implement this feature. You can see a demo in ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/casdoor/casdoor-nodejs-react-example"},"casdoor-nodejs-react-example"),"."),(0,i.kt)("p",{parentName:"admonition"},"How it works"),(0,i.kt)("ol",{parentName:"admonition"},(0,i.kt)("li",{parentName:"ol"},"In the URL to the application home page, we will carry the ",(0,i.kt)("inlineCode",{parentName:"li"},"popup")," parameter."),(0,i.kt)("li",{parentName:"ol"},"When ",(0,i.kt)("inlineCode",{parentName:"li"},"popup=1")," is in the login parameters, Casdoor will send ",(0,i.kt)("inlineCode",{parentName:"li"},"code")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"state")," as a message to the main window and finish getting the ",(0,i.kt)("inlineCode",{parentName:"li"},"token")," in the main window using the SDK."))),(0,i.kt)("h2",{id:"\u4f7f\u7528-sso"},"\u4f7f\u7528 SSO"),(0,i.kt)("p",null,"The configuration is complete. Below, we will show you how to use auto login."),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("p",{parentName:"admonition"},"Make sure your application can redirect to the user's profile page. The ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/casdoor/casdoor-js-sdk#get-my-profile-page-url"},"getMyProfileUrl(account, returnUrl)")," API is provided in our SDK for each language.")),(0,i.kt)("p",null,'Open the profile page and go to the "Home" page (',(0,i.kt)("inlineCode",{parentName:"p"},"/"),' URL path). You will see the application list provided by the organization. It\'s worth noting that only users in organizations other than "built-in" can see the application list on the "Home" page. All the global administrators (those in the "built-in" organization) cannot see it.'),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"sso_homepage.png",src:n(73482).Z,width:"1899",height:"883"})),(0,i.kt)("p",null,"Click on a tile in the application list, and it will jump to the homepage URL of that application with the GET parameter ",(0,i.kt)("inlineCode",{parentName:"p"},"?silentSignin=1"),". It will automatically log into the application if the application has integrated with Casdoor SSO (so it will recognize the ",(0,i.kt)("inlineCode",{parentName:"p"},"?silentSignin=1")," parameter and perform a silent login in the background)."))}d.isMDXComponent=!0},39493:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/sso_home-67f2ee9056c1b87d9dfe873e02e8db04.png"},73482:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/sso_homepage-9a368fa35b6e7bf07c333b423155be30.png"},40871:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/sso_signin-d64d40c185de026300a6fbd2c0385c1f.png"}}]);