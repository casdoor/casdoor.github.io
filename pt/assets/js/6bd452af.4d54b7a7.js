"use strict";(self.webpackChunkcasdoor_website=self.webpackChunkcasdoor_website||[]).push([[1307],{3905:(e,a,n)=>{n.d(a,{Zo:()=>c,kt:()=>m});var o=n(67294);function i(e,a,n){return a in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}function r(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);a&&(o=o.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),n.push.apply(n,o)}return n}function t(e){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{};a%2?r(Object(n),!0).forEach((function(a){i(e,a,n[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))}))}return e}function s(e,a){if(null==e)return{};var n,o,i=function(e,a){if(null==e)return{};var n,o,i={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],a.indexOf(n)>=0||(i[n]=e[n]);return i}(e,a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],a.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=o.createContext({}),p=function(e){var a=o.useContext(l),n=a;return e&&(n="function"==typeof e?e(a):t(t({},a),e)),n},c=function(e){var a=p(e.components);return o.createElement(l.Provider,{value:a},e.children)},d={inlineCode:"code",wrapper:function(e){var a=e.children;return o.createElement(o.Fragment,{},a)}},u=o.forwardRef((function(e,a){var n=e.components,i=e.mdxType,r=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),u=p(n),m=i,g=u["".concat(l,".").concat(m)]||u[m]||d[m]||r;return n?o.createElement(g,t(t({ref:a},c),{},{components:n})):o.createElement(g,t({ref:a},c))}));function m(e,a){var n=arguments,i=a&&a.mdxType;if("string"==typeof e||i){var r=n.length,t=new Array(r);t[0]=u;var s={};for(var l in a)hasOwnProperty.call(a,l)&&(s[l]=a[l]);s.originalType=e,s.mdxType="string"==typeof e?e:i,t[1]=s;for(var p=2;p<r;p++)t[p]=n[p];return o.createElement.apply(null,t)}return o.createElement.apply(null,n)}u.displayName="MDXCreateElement"},7612:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>l,contentTitle:()=>t,default:()=>d,frontMatter:()=>r,metadata:()=>s,toc:()=>p});var o=n(87462),i=(n(67294),n(3905));const r={title:"Plugin Jenkins",description:"Usando o plugin Casdoor para seguran\xe7a do Jenkins",keywords:["plugin","Jenkins"],authors:["Abingcbc"]},t=void 0,s={unversionedId:"integration/java/jenkins-plugin",id:"integration/java/jenkins-plugin",title:"Plugin Jenkins",description:"Usando o plugin Casdoor para seguran\xe7a do Jenkins",source:"@site/i18n/pt/docusaurus-plugin-content-docs/current/integration/java/jenkins-plugin.md",sourceDirName:"integration/java",slug:"/integration/java/jenkins-plugin",permalink:"/pt/docs/integration/java/jenkins-plugin",draft:!1,editUrl:"https://github.com/casdoor/casdoor-website/edit/master/docs/integration/java/jenkins-plugin.md",tags:[],version:"current",frontMatter:{title:"Plugin Jenkins",description:"Usando o plugin Casdoor para seguran\xe7a do Jenkins",keywords:["plugin","Jenkins"],authors:["Abingcbc"]},sidebar:"tutorialSidebar",previous:{title:"Filtro de Seguran\xe7a Spring com integra\xe7\xe3o OIDC para Casdoor",permalink:"/pt/docs/integration/java/spring-security/spring-security-filter"},next:{title:"Jenkins OIDC",permalink:"/pt/docs/integration/java/jenkins-oidc"}},l={},p=[{value:"Passo 1: Implantar Casdoor e Jenkins",id:"passo-1-implantar-casdoor-e-jenkins",level:2},{value:"Passo 2: Configurar a Aplica\xe7\xe3o Casdoor",id:"passo-2-configurar-a-aplica\xe7\xe3o-casdoor",level:2},{value:"Passo 3: Configurar o Jenkins",id:"passo-3-configurar-o-jenkins",level:2}],c={toc:p};function d(e){let{components:a,...r}=e;return(0,i.kt)("wrapper",(0,o.Z)({},c,r,{components:a,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"O Casdoor fornece um plugin que permite aos usu\xe1rios fazer login no Jenkins. Aqui, mostraremos como usar o plugin Casdoor para seguran\xe7a do Jenkins."),(0,i.kt)("p",null,"As seguintes s\xe3o algumas das configura\xe7\xf5es:"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"CASDOOR_HOSTNAME"),": O nome de dom\xednio ou IP onde o servidor Casdoor est\xe1 implantado."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"JENKINS_HOSTNAME"),": O nome de dom\xednio ou IP onde o Jenkins est\xe1 implantado."),(0,i.kt)("h2",{id:"passo-1-implantar-casdoor-e-jenkins"},"Passo 1: Implantar Casdoor e Jenkins"),(0,i.kt)("p",null,"Primeiramente, implante ",(0,i.kt)("a",{parentName:"p",href:"/docs/basic/server-installation"},"Casdoor")," e ",(0,i.kt)("a",{parentName:"p",href:"https://www.jenkins.io/doc/book/installing/"},"Jenkins"),"."),(0,i.kt)("p",null,"Ap\xf3s uma implanta\xe7\xe3o bem-sucedida, certifique-se do seguinte:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Defina a URL do Jenkins (Gerenciar Jenkins -> Configurar Sistema -> Localiza\xe7\xe3o do Jenkins) para ",(0,i.kt)("inlineCode",{parentName:"li"},"JENKINS_HOSTNAME"),". ",(0,i.kt)("img",{alt:"URL do Jenkins",src:n(25742).Z,width:"1887",height:"825"})),(0,i.kt)("li",{parentName:"ol"},"Verifique se o Casdoor pode ser acessado e usado normalmente."),(0,i.kt)("li",{parentName:"ol"},"Defina o valor de ",(0,i.kt)("inlineCode",{parentName:"li"},"origin")," do Casdoor (conf/app.conf) para ",(0,i.kt)("inlineCode",{parentName:"li"},"CASDOOR_HOSTNAME"),". ",(0,i.kt)("img",{alt:"Configura\xe7\xe3o do Casdoor",src:n(66496).Z,width:"1013",height:"448"}))),(0,i.kt)("h2",{id:"passo-2-configurar-a-aplica\xe7\xe3o-casdoor"},"Passo 2: Configurar a Aplica\xe7\xe3o Casdoor"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Crie uma nova aplica\xe7\xe3o Casdoor ou use uma existente."),(0,i.kt)("li",{parentName:"ol"},"Adicione uma URL de redirecionamento: ",(0,i.kt)("inlineCode",{parentName:"li"},"http://JENKINS_HOSTNAME/securityRealm/finishLogin")," ",(0,i.kt)("img",{alt:"Configura\xe7\xe3o da Aplica\xe7\xe3o Casdoor",src:n(9871).Z,width:"1366",height:"581"})),(0,i.kt)("li",{parentName:"ol"},"Adicione o provedor desejado e forne\xe7a quaisquer configura\xe7\xf5es adicionais.")),(0,i.kt)("p",null,"Na p\xe1gina de configura\xe7\xf5es da aplica\xe7\xe3o, voc\xea encontrar\xe1 dois valores: ",(0,i.kt)("inlineCode",{parentName:"p"},"Client ID")," e ",(0,i.kt)("inlineCode",{parentName:"p"},"Client secret"),", conforme mostrado na imagem acima. Usaremos esses valores na pr\xf3xima etapa."),(0,i.kt)("p",null,"Abra seu navegador favorito e visite ",(0,i.kt)("strong",{parentName:"p"},"http://",(0,i.kt)("inlineCode",{parentName:"strong"},"CASDOOR_HOSTNAME"),"/.well-known/openid-configuration")," para visualizar a configura\xe7\xe3o OIDC do Casdoor."),(0,i.kt)("h2",{id:"passo-3-configurar-o-jenkins"},"Passo 3: Configurar o Jenkins"),(0,i.kt)("p",null,"Agora, voc\xea pode instalar o plugin Casdoor a partir do marketplace ou fazendo upload do arquivo ",(0,i.kt)("inlineCode",{parentName:"p"},"jar"),"."),(0,i.kt)("p",null,"Ap\xf3s a instala\xe7\xe3o estar completa, v\xe1 para Gerenciar Jenkins -> Configurar Seguran\xe7a Global."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Sugest\xe3o"),": Fa\xe7a backup do arquivo ",(0,i.kt)("inlineCode",{parentName:"p"},"config.xml")," do Jenkins e use-o para recupera\xe7\xe3o em caso de erros de configura\xe7\xe3o."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Configura\xe7\xe3o do Jenkins",src:n(72083).Z,width:"2408",height:"1352"})),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},'Na se\xe7\xe3o Realm de Seguran\xe7a, selecione "Plugin de Autentica\xe7\xe3o Casdoor".'),(0,i.kt)("li",{parentName:"ol"},"No campo Endpoint Casdoor, insira o ",(0,i.kt)("inlineCode",{parentName:"li"},"CASDOOR_HOSTNAME")," mencionado anteriormente."),(0,i.kt)("li",{parentName:"ol"},"No campo Client ID, insira o ",(0,i.kt)("inlineCode",{parentName:"li"},"Client ID")," mencionado anteriormente."),(0,i.kt)("li",{parentName:"ol"},"No campo Client secret, insira o ",(0,i.kt)("inlineCode",{parentName:"li"},"Client secret")," mencionado anteriormente."),(0,i.kt)("li",{parentName:"ol"},"No campo Chave P\xfablica JWT, forne\xe7a a chave p\xfablica usada para validar o token JWT. Voc\xea pode encontrar a chave p\xfablica no Casdoor clicando em ",(0,i.kt)("inlineCode",{parentName:"li"},"Cert")," no topo. Ap\xf3s clicar em ",(0,i.kt)("inlineCode",{parentName:"li"},"edit")," na sua aplica\xe7\xe3o, voc\xea pode copiar a chave p\xfablica da p\xe1gina seguinte. ",(0,i.kt)("img",{alt:"Chave P\xfablica JWT",src:n(82261).Z,width:"2184",height:"1180"})),(0,i.kt)("li",{parentName:"ol"},"Nome da Organiza\xe7\xe3o e Nome da Aplica\xe7\xe3o s\xe3o opcionais. Voc\xea pode especificar sua organiza\xe7\xe3o e aplica\xe7\xe3o para verificar usu\xe1rios em outras organiza\xe7\xf5es e aplica\xe7\xf5es. Se esses campos forem deixados em branco, o plugin usar\xe1 a organiza\xe7\xe3o e aplica\xe7\xe3o padr\xe3o."),(0,i.kt)("li",{parentName:"ol"},'Na se\xe7\xe3o de Autoriza\xe7\xe3o, marque "Usu\xe1rios logados podem fazer qualquer coisa". Desative "Permitir acesso de leitura an\xf4nimo".'),(0,i.kt)("li",{parentName:"ol"},"Clique em ",(0,i.kt)("inlineCode",{parentName:"li"},"Salvar"),".")),(0,i.kt)("p",null,"O Jenkins agora redirecionar\xe1 automaticamente para o Casdoor para autentica\xe7\xe3o."))}d.isMDXComponent=!0},66496:(e,a,n)=>{n.d(a,{Z:()=>o});const o=n.p+"assets/images/casdoor_origin-8f5d9e44f6b58828ce69e6e6d896e122.png"},9871:(e,a,n)=>{n.d(a,{Z:()=>o});const o=n.p+"assets/images/appseeting_jenkins-6e0a2968614d0735005951278f44c008.png"},82261:(e,a,n)=>{n.d(a,{Z:()=>o});const o=n.p+"assets/images/jenkins_cert-6ab012c3fd63b5d64bf09f182ae4a9c0.png"},72083:(e,a,n)=>{n.d(a,{Z:()=>o});const o=n.p+"assets/images/jenkins_plugin-e66dcae10b60bbe2b5ac25a804ccf3cd.png"},25742:(e,a,n)=>{n.d(a,{Z:()=>o});const o=n.p+"assets/images/jenkins_url-9e8f261138a88501bdfce79ee1c1f3fa.png"}}]);