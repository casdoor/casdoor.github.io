"use strict";(self.webpackChunkcasdoor_website=self.webpackChunkcasdoor_website||[]).push([[3694],{33882:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>r,contentTitle:()=>s,default:()=>c,frontMatter:()=>a,metadata:()=>l,toc:()=>p});var i=t(87462),o=(t(67294),t(3905));t(61839);const a={title:"Jenkins Plugin",description:"Using Casdoor plugin for your Jenkins security",keywords:["plugin","Jenkins"]},s=void 0,l={unversionedId:"integration/java/jenkins plugin",id:"integration/java/jenkins plugin",title:"Jenkins Plugin",description:"Using Casdoor plugin for your Jenkins security",source:"@site/docs/integration/java/jenkins plugin.md",sourceDirName:"integration/java",slug:"/integration/java/jenkins plugin",permalink:"/docs/integration/java/jenkins plugin",draft:!1,editUrl:"https://github.com/casdoor/casdoor-website/edit/master/docs/integration/java/jenkins plugin.md",tags:[],version:"current",lastUpdatedBy:"yoyo314",lastUpdatedAt:1665238617,formattedLastUpdatedAt:"Oct 8, 2022",frontMatter:{title:"Jenkins Plugin",description:"Using Casdoor plugin for your Jenkins security",keywords:["plugin","Jenkins"]},sidebar:"tutorialSidebar",previous:{title:"Spring Security Filter",permalink:"/docs/integration/java/spring-security/spring-security-filter"},next:{title:"Jenkins OIDC",permalink:"/docs/integration/java/jenkins oidc"}},r={},p=[{value:"Step1. Deploy Casdoor and Jenkins",id:"step1-deploy-casdoor-and-jenkins",level:2},{value:"Step2. Configure Casdoor application",id:"step2-configure-casdoor-application",level:2},{value:"Step3. Configure Jenkins",id:"step3-configure-jenkins",level:2}],d={toc:p};function c(e){let{components:n,...a}=e;return(0,o.kt)("wrapper",(0,i.Z)({},d,a,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Casdoor provides a plugin for users to login Jenkins. Here we will show you how to use Casdoor plugin for your Jenkins security."),(0,o.kt)("p",null,"The following are some of the names in the configuration:"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"CASDOOR_HOSTNAME"),": Domain name or IP where Casdoor server is deployed."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"JENKINS_HOSTNAME"),": Domain name or IP where Jenkins is deployed."),(0,o.kt)("h2",{id:"step1-deploy-casdoor-and-jenkins"},"Step1. Deploy Casdoor and Jenkins"),(0,o.kt)("p",null,"Firstly, the ",(0,o.kt)("a",{parentName:"p",href:"/docs/basic/server-installation"},"Casdoor")," and ",(0,o.kt)("a",{parentName:"p",href:"https://www.jenkins.io/doc/book/installing/"},"Jenkins")," should be deployed. "),(0,o.kt)("p",null,"After a successful deployment, you need to ensure:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Set Jenkins URL(Manage Jenkins -> Configure System -> Jenkins Location) to ",(0,o.kt)("inlineCode",{parentName:"li"},"JENKINS_HOSTNAME"),".\n",(0,o.kt)("img",{alt:"Jenkins URL",src:t(91992).Z,width:"1887",height:"825"})),(0,o.kt)("li",{parentName:"ol"},"Casdoor can be logged in and used normally."),(0,o.kt)("li",{parentName:"ol"},"Set Casdoor's ",(0,o.kt)("inlineCode",{parentName:"li"},"origin")," value (conf/app.conf) to ",(0,o.kt)("inlineCode",{parentName:"li"},"CASDOOR_HOSTNAME"),".\n",(0,o.kt)("img",{alt:"Casdoor conf",src:t(39936).Z,width:"1013",height:"448"}))),(0,o.kt)("h2",{id:"step2-configure-casdoor-application"},"Step2. Configure Casdoor application"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Create or use an existing Casdoor application."),(0,o.kt)("li",{parentName:"ol"},"Add a redirect url: ",(0,o.kt)("inlineCode",{parentName:"li"},"http://JENKINS_HOSTNAME/securityRealm/finishLogin"),(0,o.kt)("img",{alt:"Casdoor Application Setting",src:t(14466).Z,width:"1366",height:"581"})),(0,o.kt)("li",{parentName:"ol"},"Add provider you want and supplement other settings.")),(0,o.kt)("p",null,"Not surprisingly, you can get two values \u200b\u200bon the application settings page: ",(0,o.kt)("inlineCode",{parentName:"p"},"Client ID")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"Client secret")," like the picture above, we will use them in next step."),(0,o.kt)("p",null,"Open your favorite browser and visit: ",(0,o.kt)("strong",{parentName:"p"},"http://",(0,o.kt)("inlineCode",{parentName:"strong"},"CASDOOR_HOSTNAME"),"/.well-known/openid-configuration"),", you will see the OIDC configure of Casdoor."),(0,o.kt)("h2",{id:"step3-configure-jenkins"},"Step3. Configure Jenkins"),(0,o.kt)("p",null,"Now, you can install Casdoor plugin from the market or by uploading its ",(0,o.kt)("inlineCode",{parentName:"p"},"jar")," file."),(0,o.kt)("p",null,"After completing the installation, go to Manage Jenkins -> Configure Global Security."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Suggestion"),": Back up the Jenkins ",(0,o.kt)("inlineCode",{parentName:"p"},"config.xml")," file, and use it to recover in case of setup errors."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Jenkins&#39; Setting",src:t(89468).Z,width:"2408",height:"1352"})),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},'In Security Realm, select "Casdoor Authentication Plugin".'),(0,o.kt)("li",{parentName:"ol"},"In Casdoor Endpoint, specify the ",(0,o.kt)("inlineCode",{parentName:"li"},"CASDOOR_HOSTNAME")," noted above."),(0,o.kt)("li",{parentName:"ol"},"In Client ID, specify the ",(0,o.kt)("inlineCode",{parentName:"li"},"Client ID")," noted above."),(0,o.kt)("li",{parentName:"ol"},"In Client secret, specify the ",(0,o.kt)("inlineCode",{parentName:"li"},"Client secret")," noted above."),(0,o.kt)("li",{parentName:"ol"},"In JWT Public Key, specify the public key used to validate JWT token. You can find the public key in Casdoor by clicking ",(0,o.kt)("inlineCode",{parentName:"li"},"Cert")," at the top. After clicking ",(0,o.kt)("inlineCode",{parentName:"li"},"edit")," your application, you can copy your public key in the following page.\n",(0,o.kt)("img",{alt:"JWT Public Key",src:t(89083).Z,width:"2184",height:"1180"})),(0,o.kt)("li",{parentName:"ol"},"Organization Name and Application Name is optional. You can specify your organization and application to verify users in other organizations and applications. If they are empty, the plugin will use the default organization and application."),(0,o.kt)("li",{parentName:"ol"},"In the Authorization section, check \u201cLogged-in users can do anything\u201d. Disable \u201cAllow anonymous read access\u201d."),(0,o.kt)("li",{parentName:"ol"},"Click ",(0,o.kt)("inlineCode",{parentName:"li"},"save"),".")),(0,o.kt)("p",null,"Now, Jenkins will automatically redirect you to Casdoor for authentication."))}c.isMDXComponent=!0},14466:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/appseeting_jenkins-6e0a2968614d0735005951278f44c008.png"},39936:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/casdoor_origin-8f5d9e44f6b58828ce69e6e6d896e122.png"},89083:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/jenkins_cert-6ab012c3fd63b5d64bf09f182ae4a9c0.png"},89468:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/jenkins_plugin-e66dcae10b60bbe2b5ac25a804ccf3cd.png"},91992:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/jenkins_url-9e8f261138a88501bdfce79ee1c1f3fa.png"}}]);