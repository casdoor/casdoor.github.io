"use strict";(self.webpackChunkcasdoor_website=self.webpackChunkcasdoor_website||[]).push([[7916],{3905:(e,n,t)=>{t.d(n,{Zo:()=>c,kt:()=>p});var r=t(67294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var u=r.createContext({}),s=function(e){var n=r.useContext(u),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},c=function(e){var n=s(e.components);return r.createElement(u.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},f=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,i=e.originalType,u=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),f=s(t),p=a,g=f["".concat(u,".").concat(p)]||f[p]||d[p]||i;return t?r.createElement(g,o(o({ref:n},c),{},{components:t})):r.createElement(g,o({ref:n},c))}));function p(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var i=t.length,o=new Array(i);o[0]=f;var l={};for(var u in n)hasOwnProperty.call(n,u)&&(l[u]=n[u]);l.originalType=e,l.mdxType="string"==typeof e?e:a,o[1]=l;for(var s=2;s<i;s++)o[s]=t[s];return r.createElement.apply(null,o)}return r.createElement.apply(null,t)}f.displayName="MDXCreateElement"},70491:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>u,contentTitle:()=>o,default:()=>d,frontMatter:()=>i,metadata:()=>l,toc:()=>s});var r=t(87462),a=(t(67294),t(3905));const i={title:"Grafana",description:"Verwendung von Casdoor zur Authentifizierung in Grafana",keywords:["Grafana"],authors:["ComradeProgrammer"]},o=void 0,l={unversionedId:"integration/go/grafana",id:"integration/go/grafana",title:"Grafana",description:"Verwendung von Casdoor zur Authentifizierung in Grafana",source:"@site/i18n/de/docusaurus-plugin-content-docs/current/integration/go/grafana.md",sourceDirName:"integration/go",slug:"/integration/go/grafana",permalink:"/de/docs/integration/go/grafana",draft:!1,editUrl:"https://github.com/casdoor/casdoor-website/edit/master/docs/integration/go/grafana.md",tags:[],version:"current",frontMatter:{title:"Grafana",description:"Verwendung von Casdoor zur Authentifizierung in Grafana",keywords:["Grafana"],authors:["ComradeProgrammer"]},sidebar:"tutorialSidebar",previous:{title:"Gitea",permalink:"/de/docs/integration/go/gitea"},next:{title:"MinIO",permalink:"/de/docs/integration/go/minio"}},u={},s=[{value:"Verwendung von Casdoor zur Authentifizierung in Grafana",id:"verwendung-von-casdoor-zur-authentifizierung-in-grafana",level:2},{value:"Schritt 1: Erstellen Sie eine App f\xfcr Grafana in Casdoor",id:"schritt-1-erstellen-sie-eine-app-f\xfcr-grafana-in-casdoor",level:2},{value:"Schritt 2: Konfiguration von Grafana \xe4ndern",id:"schritt-2-konfiguration-von-grafana-\xe4ndern",level:2},{value:"\xdcber HTTPS",id:"\xfcber-https",level:3},{value:"\xdcber redirectURI nach Anmeldung mit Casdoor",id:"\xfcber-redirecturi-nach-anmeldung-mit-casdoor",level:3},{value:"\xdcber Rollenzuordnung",id:"\xfcber-rollenzuordnung",level:3},{value:"Schritt 3: \xdcberpr\xfcfen Sie, ob es funktioniert",id:"schritt-3-\xfcberpr\xfcfen-sie-ob-es-funktioniert",level:2}],c={toc:s};function d(e){let{components:n,...i}=e;return(0,a.kt)("wrapper",(0,r.Z)({},c,i,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"verwendung-von-casdoor-zur-authentifizierung-in-grafana"},"Verwendung von Casdoor zur Authentifizierung in Grafana"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://grafana.com/oss/grafana/"},"Grafana")," unterst\xfctzt Authentifizierung \xfcber OAuth. Daher ist es f\xfcr Benutzer extrem einfach, sich mit Casdoor bei Grafana anzumelden. Es sind nur einige Schritte und einfache Konfigurationen notwendig, um dies zu erreichen."),(0,a.kt)("p",null,"Hier ist ein Tutorial, wie man Casdoor zur Authentifizierung in Grafana verwendet. Bevor Sie fortfahren, stellen Sie bitte sicher, dass Sie Grafana installiert haben und es l\xe4uft."),(0,a.kt)("h2",{id:"schritt-1-erstellen-sie-eine-app-f\xfcr-grafana-in-casdoor"},"Schritt 1: Erstellen Sie eine App f\xfcr Grafana in Casdoor"),(0,a.kt)("p",null,"Hier ist ein Beispiel f\xfcr das Erstellen einer App in Casdoor:"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Erstellen Sie eine Anwendung in Casdoor",src:t(34709).Z,width:"1367",height:"810"})),(0,a.kt)("p",null,"Bitte kopieren Sie das Client Secret und die Client ID f\xfcr den n\xe4chsten Schritt."),(0,a.kt)("p",null,"Bitte f\xfcgen Sie die Callback-URL von Grafana hinzu. Standardm\xe4\xdfig ist der OAuth-Callback von Grafana ",(0,a.kt)("inlineCode",{parentName:"p"},"/login/generic_oauth"),". Bitte f\xfcgen Sie diese URL korrekt zusammen."),(0,a.kt)("h2",{id:"schritt-2-konfiguration-von-grafana-\xe4ndern"},"Schritt 2: Konfiguration von Grafana \xe4ndern"),(0,a.kt)("p",null,"Standardm\xe4\xdfig befindet sich die Konfigurationsdatei f\xfcr OAuth unter ",(0,a.kt)("inlineCode",{parentName:"p"},"conf/defaults.ini")," im Arbeitsverzeichnis von Grafana."),(0,a.kt)("p",null,"Bitte finden Sie den Abschnitt ",(0,a.kt)("inlineCode",{parentName:"p"},"[auth.generic_oauth]")," und \xe4ndern Sie die folgenden Felder:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ini"},"[auth.generic_oauth]\nname = Casdoor\nicon = signin\nenabled = true\nallow_sign_up = true\nclient_id = <client ID from previous step>\nclient_secret = <client secret from previous step>\nauth_url = <Casdoor endpoint>/login/oauth/authorize\ntoken_url = <Casdoor endpoint>/api/login/oauth/access_token\n\n")),(0,a.kt)("h3",{id:"\xfcber-https"},"\xdcber HTTPS"),(0,a.kt)("p",null,"Wenn Sie HTTPS f\xfcr Casdoor nicht aktivieren m\xf6chten oder wenn Sie Grafana ohne HTTPS aktiviert bereitstellen, setzen Sie bitte auch ",(0,a.kt)("inlineCode",{parentName:"p"},"tls_skip_verify_insecure = true"),"."),(0,a.kt)("h3",{id:"\xfcber-redirecturi-nach-anmeldung-mit-casdoor"},"\xdcber redirectURI nach Anmeldung mit Casdoor"),(0,a.kt)("p",null,"Wenn die Redirect-URI nach der Anmeldung mit Casdoor in Grafana nicht korrekt ist, m\xf6chten Sie vielleicht ",(0,a.kt)("a",{parentName:"p",href:"https://stackoverflow.com/a/69814805"},"root_url")," konfigurieren."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ini"},"[server]\nhttp_port = 3000\n# The public-facing domain name used to access Grafana from a browser\ndomain = <your IP here>\n# The full public-facing URL\nroot_url = %(protocol)s://%(domain)s:%(http_port)s/\n")),(0,a.kt)("p",null,"Verwandte Links:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("a",{parentName:"p",href:"https://grafana.com/docs/grafana/latest/setup-grafana/configure-grafana/#root_url"},"Grafana-Dokumentation"))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("a",{parentName:"p",href:"https://github.com/grafana/grafana/blob/main/conf/defaults.ini"},"Grafana defaults.ini")))),(0,a.kt)("h3",{id:"\xfcber-rollenzuordnung"},"\xdcber Rollenzuordnung"),(0,a.kt)("p",null,"Sie m\xf6chten vielleicht ",(0,a.kt)("inlineCode",{parentName:"p"},"role_attribute_path")," konfigurieren, um die Rolle Ihres Benutzers \xfcber ",(0,a.kt)("a",{parentName:"p",href:"https://grafana.com/docs/grafana/latest/setup-grafana/configure-security/configure-authentication/generic-oauth/#role-mapping"},"role_attribute_path")," auf Grafana abzubilden."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ini"},"[auth.generic_oauth]\nrole_attribute_path = contains(roles[*].name, 'admin') && 'Admin' || contains(roles[*].name, 'editor') && 'Editor' || 'Viewer'\nrole_attribute_strict = true\nallow_assign_grafana_admin = true\n")),(0,a.kt)("p",null,"Der JMESPath-Ausdruck nach ",(0,a.kt)("inlineCode",{parentName:"p"},"role_attribute_path")," ist hier sehr wichtig. Bitte schauen Sie in der Grafana-Dokumentation nach."),(0,a.kt)("h2",{id:"schritt-3-\xfcberpr\xfcfen-sie-ob-es-funktioniert"},"Schritt 3: \xdcberpr\xfcfen Sie, ob es funktioniert"),(0,a.kt)("p",null,"Schlie\xdfen Sie Grafana und starten Sie es neu."),(0,a.kt)("p",null,"Gehen Sie zur Anmeldeseite. Sie sollten so etwas sehen:"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Endergebnis",src:t(60591).Z,width:"1384",height:"739"})))}d.isMDXComponent=!0},34709:(e,n,t)=>{t.d(n,{Z:()=>r});const r=t.p+"assets/images/grafana_1-9f197ebf06da48585fe18ce1d66ce212.png"},60591:(e,n,t)=>{t.d(n,{Z:()=>r});const r=t.p+"assets/images/grafana_2-5136a37a917e1c899feedb23e218fa13.png"}}]);