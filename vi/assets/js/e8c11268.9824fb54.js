"use strict";(self.webpackChunkcasdoor_website=self.webpackChunkcasdoor_website||[]).push([[8233],{3905:(e,t,n)=>{n.d(t,{Zo:()=>l,kt:()=>g});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var u=r.createContext({}),c=function(e){var t=r.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},l=function(e){var t=c(e.components);return r.createElement(u.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,u=e.parentName,l=i(e,["components","mdxType","originalType","parentName"]),d=c(n),g=a,h=d["".concat(u,".").concat(g)]||d[g]||p[g]||o;return n?r.createElement(h,s(s({ref:t},l),{},{components:n})):r.createElement(h,s({ref:t},l))}));function g(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,s=new Array(o);s[0]=d;var i={};for(var u in t)hasOwnProperty.call(t,u)&&(i[u]=t[u]);i.originalType=e,i.mdxType="string"==typeof e?e:a,s[1]=i;for(var c=2;c<o;c++)s[c]=n[c];return r.createElement.apply(null,s)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},84878:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>s,default:()=>p,frontMatter:()=>o,metadata:()=>i,toc:()=>c});var r=n(87462),a=(n(67294),n(3905));const o={title:"Guest Authentication",description:"Create temporary users without credentials",keywords:["guest","authentication","temporary users","passwordless"],authors:["nomeguy"]},s=void 0,i={unversionedId:"how-to-connect/guest-auth",id:"how-to-connect/guest-auth",title:"Guest Authentication",description:"Create temporary users without credentials",source:"@site/docs/how-to-connect/guest-auth.md",sourceDirName:"how-to-connect",slug:"/how-to-connect/guest-auth",permalink:"/vi/docs/how-to-connect/guest-auth",draft:!1,editUrl:"https://github.com/casdoor/casdoor-website/edit/master/docs/how-to-connect/guest-auth.md",tags:[],version:"current",frontMatter:{title:"Guest Authentication",description:"Create temporary users without credentials",keywords:["guest","authentication","temporary users","passwordless"],authors:["nomeguy"]},sidebar:"tutorialSidebar",previous:{title:"OAuth 2.0",permalink:"/vi/docs/how-to-connect/oauth"},next:{title:"Using Casdoor as a CAS Server",permalink:"/vi/docs/how-to-connect/cas"}},u={},c=[{value:"Creating a Guest User",id:"creating-a-guest-user",level:2},{value:"Upgrading Guest Users",id:"upgrading-guest-users",level:2},{value:"Restrictions",id:"restrictions",level:2},{value:"Example Integration",id:"example-integration",level:2},{value:"Related Documentation",id:"related-documentation",level:2}],l={toc:c};function p(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,r.Z)({},l,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Guest authentication enables applications to create temporary users without requiring credentials upfront. This is useful for allowing users to access your application immediately while deferring registration until later."),(0,a.kt)("h2",{id:"creating-a-guest-user"},"Creating a Guest User"),(0,a.kt)("p",null,"To create a guest user and obtain an access token, send a POST request to the token endpoint:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"POST https://<CASDOOR_HOST>/api/login/oauth/access_token\n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Request Body:")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "grant_type": "authorization_code",\n    "client_id": "your_client_id",\n    "client_secret": "your_client_secret",\n    "code": "guest-user"\n}\n')),(0,a.kt)("admonition",{type:"note"},(0,a.kt)("p",{parentName:"admonition"},"The special code value ",(0,a.kt)("inlineCode",{parentName:"p"},'"guest-user"')," is a Casdoor-specific extension that triggers guest user creation instead of the standard OAuth authorization code flow.")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Response:")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "access_token": "eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9...",\n    "id_token": "eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9...",\n    "refresh_token": "eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9...",\n    "token_type": "Bearer",\n    "expires_in": 10080,\n    "scope": "openid"\n}\n')),(0,a.kt)("p",null,"The system automatically creates a guest user with:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"A randomly generated username in the format ",(0,a.kt)("inlineCode",{parentName:"li"},"guest_<uuid>")),(0,a.kt)("li",{parentName:"ul"},"A random password"),(0,a.kt)("li",{parentName:"ul"},"The tag ",(0,a.kt)("inlineCode",{parentName:"li"},"guest-user")," for identification")),(0,a.kt)("h2",{id:"upgrading-guest-users"},"Upgrading Guest Users"),(0,a.kt)("p",null,"Guest users are automatically upgraded to normal users when they update their credentials through the user update API."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Upgrade triggers:")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Changing the username to a non-guest format (not starting with ",(0,a.kt)("inlineCode",{parentName:"li"},"guest_"),")"),(0,a.kt)("li",{parentName:"ul"},"Setting or changing the password")),(0,a.kt)("p",null,"After upgrade, the user's tag changes from ",(0,a.kt)("inlineCode",{parentName:"p"},"guest-user")," to ",(0,a.kt)("inlineCode",{parentName:"p"},"normal-user"),", enabling standard authentication."),(0,a.kt)("h2",{id:"restrictions"},"Restrictions"),(0,a.kt)("p",null,"Guest users cannot sign in through the standard login flow. They must first upgrade their account by setting proper credentials. This ensures that guest users transition to permanent accounts before using password-based authentication."),(0,a.kt)("h2",{id:"example-integration"},"Example Integration"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},"// Create a guest user\nasync function createGuestUser() {\n  const response = await fetch('https://your-casdoor-host/api/login/oauth/access_token', {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify({\n      grant_type: 'authorization_code',\n      client_id: 'your_client_id',\n      client_secret: 'your_client_secret',\n      code: 'guest-user'\n    })\n  });\n  \n  const data = await response.json();\n  return data.access_token;\n}\n\n// Later, upgrade the guest user\nasync function upgradeGuestUser(accessToken, newUsername, newPassword) {\n  const response = await fetch('https://your-casdoor-host/api/update-user', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${accessToken}`\n    },\n    body: JSON.stringify({\n      name: newUsername,\n      password: newPassword\n    })\n  });\n  \n  return response.json();\n}\n")),(0,a.kt)("h2",{id:"related-documentation"},"Related Documentation"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"/docs/how-to-connect/oauth"},"OAuth 2.0")," - Standard OAuth flows"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"/docs/user/overview#user-tags"},"User Tags")," - Understanding user tags"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"/docs/application/tags"},"Application Tags")," - Restricting access by tags")))}p.isMDXComponent=!0}}]);