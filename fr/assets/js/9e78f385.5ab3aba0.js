"use strict";(self.webpackChunkcasdoor_website=self.webpackChunkcasdoor_website||[]).push([[4324],{3905:(e,t,a)=>{a.d(t,{Zo:()=>s,kt:()=>m});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=n.createContext({}),c=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):p(p({},t),e)),a},s=function(e){var t=c(e.components);return n.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,s=o(e,["components","mdxType","originalType","parentName"]),d=c(a),m=r,h=d["".concat(l,".").concat(m)]||d[m]||u[m]||i;return a?n.createElement(h,p(p({ref:t},s),{},{components:a})):n.createElement(h,p({ref:t},s))}));function m(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,p=new Array(i);p[0]=d;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o.mdxType="string"==typeof e?e:r,p[1]=o;for(var c=2;c<i;c++)p[c]=a[c];return n.createElement.apply(null,p)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},26368:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>p,default:()=>u,frontMatter:()=>i,metadata:()=>o,toc:()=>c});var n=a(87462),r=(a(67294),a(3905));const i={title:"WeChat Pay",description:"Ajoutez le fournisseur de paiement WeChat Pay \xe0 votre application",keywords:["WeChat Pay","paiement"],authors:["Wrapping-2000","Chinoholo0807"]},p=void 0,o={unversionedId:"provider/payment/WeChatPay",id:"provider/payment/WeChatPay",title:"WeChat Pay",description:"Ajoutez le fournisseur de paiement WeChat Pay \xe0 votre application",source:"@site/i18n/fr/docusaurus-plugin-content-docs/current/provider/payment/WeChatPay.md",sourceDirName:"provider/payment",slug:"/provider/payment/WeChatPay",permalink:"/fr/docs/provider/payment/WeChatPay",draft:!1,editUrl:"https://github.com/casdoor/casdoor-website/edit/master/docs/provider/payment/WeChatPay.md",tags:[],version:"current",frontMatter:{title:"WeChat Pay",description:"Ajoutez le fournisseur de paiement WeChat Pay \xe0 votre application",keywords:["WeChat Pay","paiement"],authors:["Wrapping-2000","Chinoholo0807"]},sidebar:"tutorialSidebar",previous:{title:"Alipay",permalink:"/fr/docs/provider/payment/Alipay"},next:{title:"Captcha",permalink:"/fr/docs/category/captcha"}},l={},c=[{value:"\xc9tape 1. Pr\xe9paration",id:"\xe9tape-1-pr\xe9paration",level:2},{value:"1.1 Obtenez la cl\xe9 API v3",id:"11-obtenez-la-cl\xe9-api-v3",level:3},{value:"1.2 Obtenez le certificat marchand",id:"12-obtenez-le-certificat-marchand",level:3},{value:"1.3 Obtenez l&#39;ID marchand et l&#39;ID d&#39;application",id:"13-obtenez-lid-marchand-et-lid-dapplication",level:3},{value:"\xc9tape 2.  Cr\xe9ez un fournisseur de paiement WeChat Pay",id:"\xe9tape-2--cr\xe9ez-un-fournisseur-de-paiement-wechat-pay",level:2},{value:"\xc9tape 3. Ajoutez le fournisseur de paiement WeChat Pay pour votre produit",id:"\xe9tape-3-ajoutez-le-fournisseur-de-paiement-wechat-pay-pour-votre-produit",level:2},{value:"Prise en charge du paiement JSAPI",id:"prise-en-charge-du-paiement-jsapi",level:2}],s={toc:c};function u(e){let{components:t,...i}=e;return(0,r.kt)("wrapper",(0,n.Z)({},s,i,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"\xe9tape-1-pr\xe9paration"},"\xc9tape 1. Pr\xe9paration"),(0,r.kt)("p",null,"Tout d'abord, vous devez avoir un compte marchand sur ",(0,r.kt)("a",{parentName:"p",href:"https://pay.weixin.qq.com/index.php/public/wechatpay_en"},"WeChat Merchant Platform"),"."),(0,r.kt)("p",null,"Avant d'acc\xe9der \xe0 WeChat Pay, il y a certaines pr\xe9parations \xe0 effectuer."),(0,r.kt)("p",null,"Vous pouvez vous r\xe9f\xe9rer \xe0 la documentation ",(0,r.kt)("a",{parentName:"p",href:"https://pay.weixin.qq.com/docs/merchant/products/native-payment/preparation.html"},"pr\xe9paration avant acc\xe8s")," pour plus d'informations."),(0,r.kt)("h3",{id:"11-obtenez-la-cl\xe9-api-v3"},"1.1 Obtenez la cl\xe9 API v3"),(0,r.kt)("p",null,"Connectez-vous \xe0 WeChat Merchant Platform, s\xe9lectionnez ",(0,r.kt)("inlineCode",{parentName:"p"},"Account Settings > API Security >Set APIv3 Secret"),", et cliquez sur ",(0,r.kt)("inlineCode",{parentName:"p"},"Set APIv3 secret")," pour obtenir la ",(0,r.kt)("inlineCode",{parentName:"p"},"API Key v3"),"."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"wechat api key v3",src:a(84888).Z,width:"2400",height:"1430"})),(0,r.kt)("p",null,"Comment obtenir ",(0,r.kt)("inlineCode",{parentName:"p"},"API Key v3")," : ",(0,r.kt)("a",{parentName:"p",href:"https://kf.qq.com/faq/180830E36vyQ180830AZFZvu.html"},"Param\xe8tres de la cl\xe9 APIv3")),(0,r.kt)("h3",{id:"12-obtenez-le-certificat-marchand"},"1.2 Obtenez le certificat marchand"),(0,r.kt)("p",null,"Vous pouvez vous connecter \xe0 WeChat Merchant Platform, et s\xe9lectionner ",(0,r.kt)("inlineCode",{parentName:"p"},"Account Settings > API Security > API Certificate")," pour t\xe9l\xe9charger le certificat."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"wechat merchant certificate",src:a(22923).Z,width:"2426",height:"1506"})),(0,r.kt)("p",null,"Apr\xe8s avoir t\xe9l\xe9charg\xe9 le certificat, obtenez le ",(0,r.kt)("inlineCode",{parentName:"p"},"Certificate Serial Number")," selon ",(0,r.kt)("a",{parentName:"p",href:"https://pay.weixin.qq.com/wiki/doc/apiv3/wechatpay/wechatpay7_0.shtml#part-5"},"Comment voir le num\xe9ro de s\xe9rie du certificat")," et la ",(0,r.kt)("inlineCode",{parentName:"p"},"Private Key")," selon ",(0,r.kt)("a",{parentName:"p",href:"https://pay.weixin.qq.com/wiki/doc/apiv3/wechatpay/wechatpay3_1.shtml"},"Comment obtenir la cl\xe9 priv\xe9e du certificat"),"."),(0,r.kt)("p",null,"Ensuite, cr\xe9ez un ",(0,r.kt)("inlineCode",{parentName:"p"},"Cert")," chez Casdoor et remplissez les informations n\xe9cessaires."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"wechat_cert",src:a(28673).Z,width:"3301",height:"1631"})),(0,r.kt)("h3",{id:"13-obtenez-lid-marchand-et-lid-dapplication"},"1.3 Obtenez l'ID marchand et l'ID d'application"),(0,r.kt)("p",null,"Comment obtenir ",(0,r.kt)("inlineCode",{parentName:"p"},"Merchant ID")," : ",(0,r.kt)("a",{parentName:"p",href:"https://kf.qq.com/faq/200729EZ7fEj200729aumYR7.html"},"Guide de requ\xeate de l'ID marchand WeChat Pay")),(0,r.kt)("p",null,"Comment obtenir ",(0,r.kt)("inlineCode",{parentName:"p"},"App ID")," : ",(0,r.kt)("a",{parentName:"p",href:"https://pay.weixin.qq.com/static/pay_setting/appid_protocol.shtml"},"Guide de requ\xeate de l'APPID WeChat Pay")),(0,r.kt)("h2",{id:"\xe9tape-2--cr\xe9ez-un-fournisseur-de-paiement-wechat-pay"},"\xc9tape 2.  Cr\xe9ez un fournisseur de paiement WeChat Pay"),(0,r.kt)("p",null,"Ensuite, cr\xe9ez un fournisseur de paiement WeChat Pay dans Casdoor en remplissant les informations n\xe9cessaires."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Nom"),(0,r.kt)("th",{parentName:"tr",align:null},"Nom dans WeChat Pay"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Category"),(0,r.kt)("td",{parentName:"tr",align:null},"choisissez ",(0,r.kt)("inlineCode",{parentName:"td"},"Payment"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Type"),(0,r.kt)("td",{parentName:"tr",align:null},"choisissez ",(0,r.kt)("inlineCode",{parentName:"td"},"WeChat Pay"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Client ID"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"Merchant ID")," obtenu \xe0 l'\xe9tape 1.3")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Client secret"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"API Key v3")," obtenu \xe0 l'\xe9tape 1.1")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"App ID"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"App ID")," obtenu \xe0 l'\xe9tape 1.3")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Cert"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"Cert")," configur\xe9 \xe0 l'\xe9tape 1.2")))),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"wechat pay provider",src:a(55713).Z,width:"1513",height:"1032"})),(0,r.kt)("h2",{id:"\xe9tape-3-ajoutez-le-fournisseur-de-paiement-wechat-pay-pour-votre-produit"},"\xc9tape 3. Ajoutez le fournisseur de paiement WeChat Pay pour votre produit"),(0,r.kt)("p",null,"Enfin, ajoutez le fournisseur de paiement WeChat Pay pour votre produit afin que les utilisateurs puissent acheter le produit en utilisant WeChat Pay."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"ajoutez le fournisseur de paiement WeChat Pay pour le produit",src:a(83255).Z,width:"3377",height:"1534"})),(0,r.kt)("video",{src:"/video/provider/payment/use_wechatpay_buy_product.mp4",controls:"controls",width:"100%"}),(0,r.kt)("h2",{id:"prise-en-charge-du-paiement-jsapi"},"Prise en charge du paiement JSAPI"),(0,r.kt)("p",null,"Actuellement, Casdoor prend en charge le ",(0,r.kt)("a",{parentName:"p",href:"https://pay.weixin.qq.com/docs/merchant/products/jsapi-payment/introduction.html"},"paiement JSAPI")," et le ",(0,r.kt)("a",{parentName:"p",href:"https://pay.weixin.qq.com/docs/merchant/products/native-payment/introduction.html"},"paiement natif")," dans WeChat Pay."),(0,r.kt)("p",null,"Pour prendre en charge le paiement JSAPI, vous devez configurer un ",(0,r.kt)("a",{parentName:"p",href:"/docs/provider/oauth/Wechat"},"fournisseur OAuth WeChat")," qui prend en charge ",(0,r.kt)("inlineCode",{parentName:"p"},"WeChat Media Platform"),". Le ",(0,r.kt)("inlineCode",{parentName:"p"},"Client ID 2")," du fournisseur OAuth WeChat et le ",(0,r.kt)("inlineCode",{parentName:"p"},"App ID")," du fournisseur de paiement WeChat Pay doivent \xeatre identiques."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"relation entre le fournisseur de paiement WeChat Pay et le fournisseur OAuth WeChat",src:a(63691).Z,width:"1975",height:"1158"})),(0,r.kt)("p",null,"Apr\xe8s s'\xeatre connect\xe9 via WeChat (dans le sc\xe9nario mobile : par exemple, le navigateur int\xe9gr\xe9 \xe0 l'application mobile WeChat), les utilisateurs peuvent acheter des produits en utilisant WeChat Pay bas\xe9 sur le paiement JSAPI."),(0,r.kt)("video",{src:"/video/provider/payment/use_wechatpay_via_jsapi.mp4",controls:"controls",width:"100%",align:"center"}))}u.isMDXComponent=!0},84888:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/wechat_apikey_v3-c95a86dcc7ab4dd7bbca9df233f0167f.png"},28673:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/wechat_cert-a4e0caadc44c30564ff97d9bc60d2499.png"},63691:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/wechat_jsapi_conf-18697c593f4bcdc7200d613cad1e1cb8.png"},22923:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/wechat_mch_cert-84e41b42ce7a3931f69bf07bb5376a9f.png"},55713:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/wechat_payment_provider-a0467c48adc3d33665c6ad4013ad9184.png"},83255:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/wechat_product-01ff65aff94711e2e1b53fa2e9593c8b.png"}}]);