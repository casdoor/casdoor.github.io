"use strict";(self.webpackChunkcasdoor_website=self.webpackChunkcasdoor_website||[]).push([[1509],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>k});var a=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=a.createContext({}),u=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},c=function(e){var t=u(e.components);return a.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),d=u(n),k=o,m=d["".concat(l,".").concat(k)]||d[k]||p[k]||i;return n?a.createElement(m,r(r({ref:t},c),{},{components:n})):a.createElement(m,r({ref:t},c))}));function k(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,r=new Array(i);r[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:o,r[1]=s;for(var u=2;u<i;u++)r[u]=n[u];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},80027:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>p,frontMatter:()=>i,metadata:()=>s,toc:()=>u});var a=n(87462),o=(n(67294),n(3905));const i={title:"Visi\xf3n general",description:"Introducci\xf3n a los tokens en Casdoor",keywords:["token","OAuth"],authors:["sh1luo"]},r=void 0,s={unversionedId:"token/overview",id:"token/overview",title:"Visi\xf3n general",description:"Introducci\xf3n a los tokens en Casdoor",source:"@site/i18n/es/docusaurus-plugin-content-docs/current/token/overview.md",sourceDirName:"token",slug:"/token/overview",permalink:"/es/docs/token/overview",draft:!1,editUrl:"https://github.com/casdoor/casdoor-website/edit/master/docs/token/overview.md",tags:[],version:"current",frontMatter:{title:"Visi\xf3n general",description:"Introducci\xf3n a los tokens en Casdoor",keywords:["token","OAuth"],authors:["sh1luo"]},sidebar:"tutorialSidebar",previous:{title:"Tokens",permalink:"/es/docs/category/tokens"},next:{title:"Sessions",permalink:"/es/docs/category/sessions"}},l={},u=[{value:"Access Token and ID Token",id:"access-token-and-id-token",level:2},{value:"Token Fields",id:"token-fields",level:2},{value:"Token Lifecycle and Invalidation",id:"token-lifecycle-and-invalidation",level:2},{value:"Token Format Options",id:"token-format-options",level:2},{value:"Custom Token Attributes",id:"custom-token-attributes",level:2}],c={toc:u};function p(e){let{components:t,...i}=e;return(0,o.kt)("wrapper",(0,a.Z)({},c,i,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Casdoor se construye sobre OAuth y utiliza tokens como tokens de OAuth de los usuarios."),(0,o.kt)("h2",{id:"access-token-and-id-token"},"Access Token and ID Token"),(0,o.kt)("p",null,"In Casdoor, the ",(0,o.kt)("inlineCode",{parentName:"p"},"access_token")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"id_token")," are ",(0,o.kt)("strong",{parentName:"p"},"identical"),". Both tokens contain the same JWT payload with user information and claims. This is a design choice in Casdoor that simplifies token management."),(0,o.kt)("p",null,"This approach means:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Both tokens contain the same user information and custom claims"),(0,o.kt)("li",{parentName:"ul"},"Both tokens can be used interchangeably for authentication and authorization"),(0,o.kt)("li",{parentName:"ul"},"The token format and expiration settings apply to both tokens equally"),(0,o.kt)("li",{parentName:"ul"},"You cannot configure separate claims for ",(0,o.kt)("inlineCode",{parentName:"li"},"access_token")," and ",(0,o.kt)("inlineCode",{parentName:"li"},"id_token"))),(0,o.kt)("h2",{id:"token-fields"},"Token Fields"),(0,o.kt)("p",null,"Los siguientes son los campos de token disponibles en Casdoor:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"Owner")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"Name")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"CreatedTime")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"Application")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"Organization")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"User")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"Code")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"AccessToken")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"ExpireIn")," (Los tokens expirar\xe1n en horas)"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"Scope")," (Alcance de la autorizaci\xf3n)"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"TokenType")," (por ejemplo, tipo ",(0,o.kt)("inlineCode",{parentName:"li"},"Bearer"),")")),(0,o.kt)("h2",{id:"token-lifecycle-and-invalidation"},"Token Lifecycle and Invalidation"),(0,o.kt)("p",null,"Tokens in Casdoor follow a specific lifecycle from creation through invalidation. When a user logs in, Casdoor generates both an access token and a refresh token. The access token is used for authentication, while the refresh token allows obtaining new access tokens without requiring the user to log in again."),(0,o.kt)("p",null,"During SSO logout, Casdoor invalidates tokens by setting their ",(0,o.kt)("inlineCode",{parentName:"p"},"ExpiresIn")," field to 0 or a negative value. Both the token introspection endpoint and the refresh token endpoint validate this field before processing requests. If a token has ",(0,o.kt)("inlineCode",{parentName:"p"},"ExpiresIn <= 0"),", it's considered invalid and rejected with an error, even if the token itself is structurally valid and hasn't reached its original expiration time. This approach ensures that refresh tokens cannot be used to obtain new access tokens after logout, providing complete session termination across all token types."),(0,o.kt)("h2",{id:"token-format-options"},"Token Format Options"),(0,o.kt)("p",null,"Despu\xe9s de iniciar sesi\xf3n en la aplicaci\xf3n, hay tres opciones para generar un Token JWT:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"JWT")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"JWT-Empty")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"JWT-Custom")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"JWT-Standard"))),(0,o.kt)("p",null,"Las opciones son las siguientes: JWT generar\xe1 un token que contiene todos los campos de Usuario, JWT-Empty generar\xe1 un token con todos los valores no vac\xedos para el usuario, y JWT-Custom generar\xe1 un token que contiene campos de Token de Usuario personalizados (puedes elegir atributos en los campos de Token). JWT-Standard will generate a token with some standard OIDC token fields include email, phone, gender and Address (Address value in other format is not standard)."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"JWT-Custom",src:n(36199).Z,width:"3646",height:"912"})),(0,o.kt)("h2",{id:"custom-token-attributes"},"Custom Token Attributes"),(0,o.kt)("p",null,"When using JWT-Custom format, you can define custom attributes with their data types. Each attribute has a ",(0,o.kt)("strong",{parentName:"p"},"Type")," field that controls how values are included in the JWT:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Array"),": The attribute value will always be returned as an array, even if it contains a single element. This ensures compatibility with OIDC clients that expect array types for fields like roles, groups, or permissions."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"String"),": The attribute value will be returned as a single string (the first element if multiple values exist).")),(0,o.kt)("p",null,"Empty attributes are automatically omitted from the token to keep the payload clean. When configuring attributes for roles, groups, or permissions, using the Array type is recommended for better OIDC compliance and compatibility with systems like Rancher and Keycloak."))}p.isMDXComponent=!0},36199:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/JWT-Custom-87a56a11ee5f6d9ade1af88a7eda22ba.png"}}]);