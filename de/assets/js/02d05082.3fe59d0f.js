"use strict";(self.webpackChunkcasdoor_website=self.webpackChunkcasdoor_website||[]).push([[9408],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>c});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),d=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=d(e.components);return r.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,s=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),m=d(n),c=a,k=m["".concat(s,".").concat(c)]||m[c]||u[c]||i;return n?r.createElement(k,l(l({ref:t},p),{},{components:n})):r.createElement(k,l({ref:t},p))}));function c(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,l=new Array(i);l[0]=m;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:a,l[1]=o;for(var d=2;d<i;d++)l[d]=n[d];return r.createElement.apply(null,l)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},58164:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>u,frontMatter:()=>i,metadata:()=>o,toc:()=>d});var r=n(87462),a=(n(67294),n(3905));const i={title:"LDAP-Server",description:"Wie man einen LDAP-Client in Casdoor verbindet",keywords:["LDAP-Server"],authors:["forestmgy"]},l=void 0,o={unversionedId:"ldap/ldapserver",id:"ldap/ldapserver",title:"LDAP-Server",description:"Wie man einen LDAP-Client in Casdoor verbindet",source:"@site/i18n/de/docusaurus-plugin-content-docs/current/ldap/ldapserver.md",sourceDirName:"ldap",slug:"/ldap/ldapserver",permalink:"/de/docs/ldap/ldapserver",draft:!1,editUrl:"https://github.com/casdoor/casdoor-website/edit/master/docs/ldap/ldapserver.md",tags:[],version:"current",frontMatter:{title:"LDAP-Server",description:"Wie man einen LDAP-Client in Casdoor verbindet",keywords:["LDAP-Server"],authors:["forestmgy"]},sidebar:"tutorialSidebar",previous:{title:"Konfigurieren und Synchronisieren von LDAP-Benutzern",permalink:"/de/docs/ldap/config"},next:{title:"RADIUS",permalink:"/de/docs/category/radius"}},s={},d=[{value:"LDAP-Server-Port",id:"ldap-server-port",level:3},{value:"Wie es funktioniert",id:"wie-es-funktioniert",level:3},{value:"Wie man bindet",id:"wie-man-bindet",level:3},{value:"Wie man sucht",id:"wie-man-sucht",level:3},{value:"User Attributes",id:"user-attributes",level:4},{value:"Supported RFC-Style Features",id:"supported-rfc-style-features",level:3},{value:"Partial Root DSE Query Support",id:"partial-root-dse-query-support",level:4},{value:"Schema Query Support",id:"schema-query-support",level:4},{value:"POSIX Filters",id:"posix-filters",level:4}],p={toc:d};function u(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Viele Systeme, wie ",(0,a.kt)("inlineCode",{parentName:"p"},"Nexus"),", unterst\xfctzen LDAP-Authentifizierung. Casdoor implementiert auch einen einfachen LDAP-Server, der Bind- und Suchoperationen unterst\xfctzt."),(0,a.kt)("p",null,"Dieses Dokument beschreibt, wie man sich mit dem LDAP-Server in Casdoor verbindet und eine einfache Login-Authentifizierung implementiert."),(0,a.kt)("h3",{id:"ldap-server-port"},"LDAP-Server-Port"),(0,a.kt)("p",null,"Der LDAP-Server h\xf6rt standardm\xe4\xdfig auf Port ",(0,a.kt)("inlineCode",{parentName:"p"},"389"),". You can change the default port by modifying the ",(0,a.kt)("inlineCode",{parentName:"p"},"ldapServerPort")," value in ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/casdoor/casdoor/blob/master/conf/app.conf#L27"},"conf/app.conf"),"."),(0,a.kt)("h3",{id:"wie-es-funktioniert"},"Wie es funktioniert"),(0,a.kt)("p",null,"\xc4hnlich wie der LDAP-Client in Casdoor sind alle Benutzer im LDAP-Server Unterklassen von ",(0,a.kt)("inlineCode",{parentName:"p"},"posixAccount"),"."),(0,a.kt)("p",null,"Wenn der Server einen Datensatz erh\xe4lt, der von LDAP \xfcbertragen wird, wird er den ",(0,a.kt)("inlineCode",{parentName:"p"},"cn")," und ",(0,a.kt)("inlineCode",{parentName:"p"},"ou")," analysieren, wobei ",(0,a.kt)("inlineCode",{parentName:"p"},"cn")," den Benutzernamen und ",(0,a.kt)("inlineCode",{parentName:"p"},"ou")," den Organisationsnamen darstellt. Der ",(0,a.kt)("inlineCode",{parentName:"p"},"dc")," spielt keine Rolle."),(0,a.kt)("p",null,"Wenn es sich um eine Bind-Operation handelt, wird der Server Casdoor verwenden, um den Benutzernamen und das Passwort zu \xfcberpr\xfcfen und dem Benutzer in Casdoor die Berechtigung zu erteilen."),(0,a.kt)("p",null,"Wenn es sich um eine Suchoperation handelt, wird der Server \xfcberpr\xfcfen, ob die Suchoperation gem\xe4\xdf den Berechtigungen, die dem Client durch die Bind-Operation gew\xe4hrt wurden, legal ist und eine Antwort zur\xfcckgeben."),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},"Wir unterst\xfctzen nur ",(0,a.kt)("strong",{parentName:"p"},"Einfache Authentifizierung"),".")),(0,a.kt)("h3",{id:"wie-man-bindet"},"Wie man bindet"),(0,a.kt)("p",null,"Im Casdoor LDAP-Server erkennen wir nur ",(0,a.kt)("inlineCode",{parentName:"p"},"DN")," in einem Format \xe4hnlich diesem: ",(0,a.kt)("inlineCode",{parentName:"p"},"cn=admin,ou=built-in,dc=example,dc=com"),"."),(0,a.kt)("p",null,"Bitte setzen Sie den ",(0,a.kt)("inlineCode",{parentName:"p"},"DN")," des Admin-Benutzers auf das oben genannte Format. Dann k\xf6nnen Sie diesen ",(0,a.kt)("inlineCode",{parentName:"p"},"DN")," verwenden, um sich mit dem Passwort des Benutzers an den LDAP-Server zu binden, um sich bei Casdoor zur \xdcberpr\xfcfung anzumelden. Wenn die Server\xfcberpr\xfcfung erfolgreich ist, wird dem Benutzer in Casdoor Autorit\xe4t gew\xe4hrt."),(0,a.kt)("h3",{id:"wie-man-sucht"},"Wie man sucht"),(0,a.kt)("p",null,"Sobald die Bind-Operation erfolgreich abgeschlossen ist, k\xf6nnen Sie die Suchoperation durchf\xfchren. Es gibt einige Unterschiede zwischen Such- und Bind-Operationen."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"To search for a certain user, such as ",(0,a.kt)("inlineCode",{parentName:"li"},"Alice")," under the ",(0,a.kt)("inlineCode",{parentName:"li"},"built-in")," organization, you should use a ",(0,a.kt)("inlineCode",{parentName:"li"},"DN")," like this: ",(0,a.kt)("inlineCode",{parentName:"li"},"ou=built-in,dc=example,dc=com"),", and add ",(0,a.kt)("inlineCode",{parentName:"li"},"cn=Alice")," in the Filter field."),(0,a.kt)("li",{parentName:"ul"},"To search for all users under a certain organization, such as all users in ",(0,a.kt)("inlineCode",{parentName:"li"},"built-in"),", you should use a ",(0,a.kt)("inlineCode",{parentName:"li"},"DN")," like this: ",(0,a.kt)("inlineCode",{parentName:"li"},"ou=built-in,dc=example,dc=com"),", and add ",(0,a.kt)("inlineCode",{parentName:"li"},"cn=*")," in the Filter field."),(0,a.kt)("li",{parentName:"ul"},"To search for all users in all organizations (assuming the user has sufficient permissions), you should use a ",(0,a.kt)("inlineCode",{parentName:"li"},"DN")," like this: ",(0,a.kt)("inlineCode",{parentName:"li"},"ou=*,dc=example,dc=com"),", and add ",(0,a.kt)("inlineCode",{parentName:"li"},"cn=*")," in the Filter field."),(0,a.kt)("li",{parentName:"ul"},"To search for all users in a specific group, you should use a filter query like this: ",(0,a.kt)("inlineCode",{parentName:"li"},"(memberOf=organization_name/group_name)")," in the Filter field.")),(0,a.kt)("h4",{id:"user-attributes"},"User Attributes"),(0,a.kt)("p",null,"When searching for users, the LDAP server returns the following attributes for each user entry:"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Attribute"),(0,a.kt)("th",{parentName:"tr",align:null},"Description"),(0,a.kt)("th",{parentName:"tr",align:null},"Mapped from"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"cn")),(0,a.kt)("td",{parentName:"tr",align:null},"Common name"),(0,a.kt)("td",{parentName:"tr",align:null},"User's name")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"uid")),(0,a.kt)("td",{parentName:"tr",align:null},"User ID"),(0,a.kt)("td",{parentName:"tr",align:null},"User's unique identifier")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"homeDirectory")),(0,a.kt)("td",{parentName:"tr",align:null},"Home directory path"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"/home/{username}"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"mail")),(0,a.kt)("td",{parentName:"tr",align:null},"Email address"),(0,a.kt)("td",{parentName:"tr",align:null},"User's email")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"mobile")),(0,a.kt)("td",{parentName:"tr",align:null},"Mobile phone number"),(0,a.kt)("td",{parentName:"tr",align:null},"User's phone")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"sn")),(0,a.kt)("td",{parentName:"tr",align:null},"Surname (last name)"),(0,a.kt)("td",{parentName:"tr",align:null},"User's last name")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"givenName")),(0,a.kt)("td",{parentName:"tr",align:null},"Given name (first name)"),(0,a.kt)("td",{parentName:"tr",align:null},"User's first name")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"memberOf")),(0,a.kt)("td",{parentName:"tr",align:null},"Group memberships"),(0,a.kt)("td",{parentName:"tr",align:null},"User's groups")))),(0,a.kt)("h3",{id:"supported-rfc-style-features"},"Supported RFC-Style Features"),(0,a.kt)("h4",{id:"partial-root-dse-query-support"},"Partial Root DSE Query Support"),(0,a.kt)("p",null,'The Root DSE (baseDN="") provides directory capabilities.'),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Query namingContexts (organization list): ",(0,a.kt)("inlineCode",{parentName:"p"},'ldapsearch -x -H ldap://<casdoor-host>:389 -D "cn=admin,ou=built-in" -w <passwd> -b "" -s base "(objectClass=*)" namingContexts'),(0,a.kt)("br",{parentName:"p"}),"\n","Returns visible organization DNs.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Query subschemaSubentry: ",(0,a.kt)("inlineCode",{parentName:"p"},'ldapsearch -x -H ldap://<casdoor-host>:389 -D "cn=admin,ou=built-in" -w <passwd> -b "" -s base "(objectClass=*)" subschemaSubentry'),(0,a.kt)("br",{parentName:"p"}),"\n","Returns ",(0,a.kt)("inlineCode",{parentName:"p"},"subschemaSubentry: cn=Subschema"),"."))),(0,a.kt)("h4",{id:"schema-query-support"},"Schema Query Support"),(0,a.kt)("p",null,"Query objectClasses: ",(0,a.kt)("inlineCode",{parentName:"p"},'ldapsearch -x -H ldap://<casdoor-host>:389 -D "cn=admin,ou=built-in" -w <passwd> -b "cn=Subschema" -s base "(objectClass=*)" objectClasses'),(0,a.kt)("br",{parentName:"p"}),"\n","Returns definitions for posixAccount and posixGroup."),(0,a.kt)("h4",{id:"posix-filters"},"POSIX Filters"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"(objectClass=posixAccount)")," returns user list."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"(objectClass=posixGroup)")," returns group list under organization (e.g., ",(0,a.kt)("inlineCode",{parentName:"li"},'ldapsearch -x -H ldap://<casdoor-server>:389 -D "cn=admin,ou=built-in" -w <passwd> -b "ou=<org>" "(objectClass=posixGroup)"'),").")),(0,a.kt)("p",null,"Note: ",(0,a.kt)("inlineCode",{parentName:"p"},"(objectClass=posixGroup)")," Does not support combined searches like ",(0,a.kt)("inlineCode",{parentName:"p"},"(&(objectClass=posixGroup)(cn=<group>))"),". Please use ",(0,a.kt)("inlineCode",{parentName:"p"},"memberOf")," for searching members in a group."))}u.isMDXComponent=!0}}]);