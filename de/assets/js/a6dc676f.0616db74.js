"use strict";(self.webpackChunkcasdoor_website=self.webpackChunkcasdoor_website||[]).push([[7189],{3905:(e,n,t)=>{t.d(n,{Zo:()=>d,kt:()=>c});var i=t(67294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,i,a=function(e,n){if(null==e)return{};var t,i,a={},r=Object.keys(e);for(i=0;i<r.length;i++)t=r[i],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)t=r[i],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var o=i.createContext({}),p=function(e){var n=i.useContext(o),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},d=function(e){var n=p(e.components);return i.createElement(o.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return i.createElement(i.Fragment,{},n)}},m=i.forwardRef((function(e,n){var t=e.components,a=e.mdxType,r=e.originalType,o=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),m=p(t),c=a,k=m["".concat(o,".").concat(c)]||m[c]||u[c]||r;return t?i.createElement(k,l(l({ref:n},d),{},{components:t})):i.createElement(k,l({ref:n},d))}));function c(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var r=t.length,l=new Array(r);l[0]=m;var s={};for(var o in n)hasOwnProperty.call(n,o)&&(s[o]=n[o]);s.originalType=e,s.mdxType="string"==typeof e?e:a,l[1]=s;for(var p=2;p<r;p++)l[p]=t[p];return i.createElement.apply(null,l)}return i.createElement.apply(null,t)}m.displayName="MDXCreateElement"},46671:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>u,frontMatter:()=>r,metadata:()=>s,toc:()=>p});var i=t(87462),a=(t(67294),t(3905));const r={title:"AWS Client VPN",description:"Casdoor als SAML IdP verwenden",keywords:["SAML","IdP"],authors:["UsherFall"]},l=void 0,s={unversionedId:"how-to-connect/saml/aws",id:"how-to-connect/saml/aws",title:"AWS Client VPN",description:"Casdoor als SAML IdP verwenden",source:"@site/i18n/de/docusaurus-plugin-content-docs/current/how-to-connect/saml/aws.md",sourceDirName:"how-to-connect/saml",slug:"/how-to-connect/saml/aws",permalink:"/de/docs/how-to-connect/saml/aws",draft:!1,editUrl:"https://github.com/casdoor/casdoor-website/edit/master/docs/how-to-connect/saml/aws.md",tags:[],version:"current",frontMatter:{title:"AWS Client VPN",description:"Casdoor als SAML IdP verwenden",keywords:["SAML","IdP"],authors:["UsherFall"]},sidebar:"tutorialSidebar",previous:{title:"\xdcbersicht",permalink:"/de/docs/how-to-connect/saml/overview"},next:{title:"Keycloak",permalink:"/de/docs/how-to-connect/saml/keycloak"}},o={},p=[{value:"Casdoor als SAML IdP in AWS Client VPN",id:"casdoor-als-saml-idp-in-aws-client-vpn",level:2},{value:"Voraussetzungen",id:"voraussetzungen",level:2},{value:"SAML-Anwendung konfigurieren",id:"saml-anwendung-konfigurieren",level:2},{value:"AWS konfigurieren",id:"aws-konfigurieren",level:2},{value:"Casdoor als AWS Identity Provider konfigurieren",id:"casdoor-als-aws-identity-provider-konfigurieren",level:3},{value:"Einen AWS Client VPN-Endpunkt erstellen",id:"einen-aws-client-vpn-endpunkt-erstellen",level:3},{value:"Ein Client VPN mit einem Ziel-VPC verkn\xfcpfen",id:"ein-client-vpn-mit-einem-ziel-vpc-verkn\xfcpfen",level:3},{value:"SAML gruppen-spezifische Autorisierung konfigurieren",id:"saml-gruppen-spezifische-autorisierung-konfigurieren",level:3},{value:"Mit Client VPN verbinden",id:"mit-client-vpn-verbinden",level:2}],d={toc:p};function u(e){let{components:n,...r}=e;return(0,a.kt)("wrapper",(0,i.Z)({},d,r,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"casdoor-als-saml-idp-in-aws-client-vpn"},"Casdoor als SAML IdP in AWS Client VPN"),(0,a.kt)("p",null,"Dieser Leitfaden zeigt Ihnen, wie Sie Casdoor und AWS Client VPN konfigurieren, um Casdoor als SAML IdP in AWS Client VPN hinzuzuf\xfcgen."),(0,a.kt)("h2",{id:"voraussetzungen"},"Voraussetzungen"),(0,a.kt)("p",null,"Um diese Einrichtung abzuschlie\xdfen, ben\xf6tigen Sie:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Ein AWS-Konto mit administrativen Rechten, um auf die Konfigurationseinstellungen des Dienstanbieters zugreifen zu k\xf6nnen.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Ein Amazon VPC mit einer EC2-Instanz"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://docs.aws.amazon.com/zh_cn/vpc/latest/userguide/vpc-getting-started.html"},"Das VPC einrichten")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://docs.aws.amazon.com/zh_cn/AWSEC2/latest/UserGuide/EC2_GetStarted.html"},"Eine EC2-Instanz starten"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"In der Sicherheitsgruppe der Instanz erlauben Sie ICMP-Datenverkehr aus dem VPC CIDR-Bereich - dies ist f\xfcr Tests erforderlich."))))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Ein privates Zertifikat, das in den ",(0,a.kt)("a",{parentName:"p",href:"https://aws.amazon.com/cn/certificate-manager/"},"AWS Certificate Manager (ACM)")," importiert wurde"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://docs.aws.amazon.com/zh_cn/vpn/latest/clientvpn-admin/what-is.html"},"Ein Zertifikat generieren und in ACM importieren")))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Ein Windows- oder Mac-System mit der neuesten AWS Client VPN Software."),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://aws.amazon.com/cn/vpn/client-vpn-download/"},"Software herunterladen"))))),(0,a.kt)("h2",{id:"saml-anwendung-konfigurieren"},"SAML-Anwendung konfigurieren"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"In der Casdoor-Anwendung setzen Sie die ",(0,a.kt)("inlineCode",{parentName:"li"},"Redirect URL")," auf ",(0,a.kt)("inlineCode",{parentName:"li"},"urn:amazon:webservices:clientvpn"),".")),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"saml_aws_redirect_url.png",src:t(29984).Z,width:"1676",height:"1144"})),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Setzen Sie die ",(0,a.kt)("inlineCode",{parentName:"li"},"SAML reply URL")," auf ",(0,a.kt)("inlineCode",{parentName:"li"},"http://127.0.0.1:35001"),".")),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"saml_aws_reply_url.png",src:t(44307).Z,width:"1506",height:"840"})),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Speichern Sie den Inhalt im ",(0,a.kt)("inlineCode",{parentName:"li"},"SAML-Metadaten")," als XML-Datei.")),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"saml_aws_metadata.png",src:t(96587).Z,width:"2780",height:"748"})),(0,a.kt)("h2",{id:"aws-konfigurieren"},"AWS konfigurieren"),(0,a.kt)("h3",{id:"casdoor-als-aws-identity-provider-konfigurieren"},"Casdoor als AWS Identity Provider konfigurieren"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"\xd6ffnen Sie die IAM-Konsole und w\xe4hlen Sie ",(0,a.kt)("strong",{parentName:"p"},"Identit\xe4tsanbieter")," aus der Navigationsleiste.")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Klicken Sie auf ",(0,a.kt)("strong",{parentName:"p"},"Anbieter erstellen"),".")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Geben Sie SAML f\xfcr den Anbietertyp an, f\xfcgen Sie einen eindeutigen Namen f\xfcr diesen Anbieter hinzu und laden Sie das Metadatendokument hoch - dieselbe Datei, die Sie von der Casdoor-Anwendung im vorherigen Abschnitt gespeichert haben.")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Klicken Sie auf ",(0,a.kt)("strong",{parentName:"p"},"N\xe4chster Schritt"),". Auf dem n\xe4chsten Bildschirm klicken Sie auf ",(0,a.kt)("strong",{parentName:"p"},"Erstellen"),"."))),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"saml_aws_create.png",src:t(89004).Z,width:"2720",height:"1206"})),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"saml_aws_choose_metadata.png",src:t(26080).Z,width:"1810",height:"1104"})),(0,a.kt)("h3",{id:"einen-aws-client-vpn-endpunkt-erstellen"},"Einen AWS Client VPN-Endpunkt erstellen"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"\xd6ffnen Sie die Amazon VPC-Konsole in einer AWS-Region Ihrer Wahl.")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"W\xe4hlen Sie auf der linken Navigationsseite ",(0,a.kt)("strong",{parentName:"p"},"Client VPN-Endpunkte")," unter ",(0,a.kt)("strong",{parentName:"p"},"Virtual Private Network (VPN)"),".")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Klicken Sie auf ",(0,a.kt)("strong",{parentName:"p"},"Client VPN-Endpunkt erstellen"),".")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Geben Sie den IP-Bereich f\xfcr Ihre Remote-Benutzer im Feld ",(0,a.kt)("strong",{parentName:"p"},"Client IPv4 CIDR")," ein, um einen IP-Bereich zuzuweisen.")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"W\xe4hlen Sie f\xfcr ",(0,a.kt)("strong",{parentName:"p"},"Serverzertifikat ARN")," das von Ihnen erstellte Zertifikat.")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"F\xfcr Authentifizierungsoptionen w\xe4hlen Sie ",(0,a.kt)("strong",{parentName:"p"},"Benutzerbasierte Authentifizierung verwenden"),", dann ",(0,a.kt)("strong",{parentName:"p"},"Verbundauthentifizierung"),".")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"W\xe4hlen Sie f\xfcr ",(0,a.kt)("strong",{parentName:"p"},"SAML-Anbieter ARN")," den von Ihnen erstellten Identit\xe4tsanbieter.")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Klicken Sie auf ",(0,a.kt)("strong",{parentName:"p"},"Client VPN-Endpunkt erstellen"),"."))),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"saml_aws_vpn_endpoint.png",src:t(23539).Z,width:"2800",height:"704"})),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"saml_aws_create_vpn.png",src:t(81674).Z,width:"1596",height:"1232"})),(0,a.kt)("h3",{id:"ein-client-vpn-mit-einem-ziel-vpc-verkn\xfcpfen"},"Ein Client VPN mit einem Ziel-VPC verkn\xfcpfen"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"W\xe4hlen Sie ",(0,a.kt)("strong",{parentName:"p"},"Zielnetzwerk-Verkn\xfcpfungen")," in den Client VPN-Optionen und klicken Sie dann auf ",(0,a.kt)("strong",{parentName:"p"},"Zielnetzwerk verkn\xfcpfen"),".")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"W\xe4hlen Sie aus dem Dropdown-Men\xfc das Ziel-VPC und das Subnetz, mit dem Sie Ihren Endpunkt verkn\xfcpfen m\xf6chten."))),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"saml_aws_target_network.png",src:t(21010).Z,width:"2792",height:"1226"})),(0,a.kt)("h3",{id:"saml-gruppen-spezifische-autorisierung-konfigurieren"},"SAML gruppen-spezifische Autorisierung konfigurieren"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"W\xe4hlen Sie die Registerkarte ",(0,a.kt)("strong",{parentName:"p"},"Autorisierungsregeln")," in Ihren Client VPN-Optionen und klicken Sie auf ",(0,a.kt)("strong",{parentName:"p"},"Autorisierungsregel hinzuf\xfcgen"),".")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Geben Sie f\xfcr das zu aktivierende Zielnetzwerk die IP-Adresse Ihrer im Voraussetzungen erstellten EC2-Instanz an. Zum Beispiel ",(0,a.kt)("inlineCode",{parentName:"p"},"172.31.16.0/20"),".")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"W\xe4hlen Sie unter Zugriff gew\xe4hren die Option ",(0,a.kt)("strong",{parentName:"p"},"Zugriff f\xfcr Benutzer in einer bestimmten Zugriffsgruppe erlauben"),". Zum Beispiel ",(0,a.kt)("inlineCode",{parentName:"p"},"casdoor"),".")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Geben Sie eine optionale Beschreibung ein und klicken Sie auf ",(0,a.kt)("strong",{parentName:"p"},"Autorisierungsregel hinzuf\xfcgen"),"."))),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"saml_aws_rule.png",src:t(60420).Z,width:"1636",height:"1228"})),(0,a.kt)("h2",{id:"mit-client-vpn-verbinden"},"Mit Client VPN verbinden"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"W\xe4hlen Sie den Client VPN-Endpunkt, den Sie gerade erstellt haben. Es sollte nun im verf\xfcgbaren Zustand sein.")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Klicken Sie auf ",(0,a.kt)("strong",{parentName:"p"},"Client-Konfiguration herunterladen"),", um das Konfigurationsprofil auf Ihren Desktop herunterzuladen.")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"\xd6ffnen Sie die AWS Client VPN Desktop-App auf Ihrem Ger\xe4t.")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Im oberen Men\xfc w\xe4hlen Sie Datei und Profile verwalten.")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Klicken Sie auf Profil hinzuf\xfcgen und weisen Sie auf die k\xfcrzlich heruntergeladene Datei.")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Sie sollten nun das Profil in der Liste der AWS Client VPN-Software sehen. W\xe4hlen Sie es aus und klicken Sie auf Verbinden."))),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"saml_aws_download.png",src:t(19303).Z,width:"2762",height:"1202"})),(0,a.kt)("video",{src:"/video/saml_aws.mp4",controls:"controls",width:"100%"}))}u.isMDXComponent=!0},26080:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/saml_aws_choose_metadata-03a549be89dc751e9fd2d7010b3c1e64.png"},89004:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/saml_aws_create-7ba7254466b4227d6e54ef961afa667d.png"},81674:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/saml_aws_create_vpn-d8bbc595d25d862d98c407867d78a5b9.png"},19303:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/saml_aws_download-90aa0d174201c9b1f5dd07dfaeffc2ac.png"},96587:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/saml_aws_metadata-3e50a3c4d4eb20b91f65e4360bc24f1b.png"},29984:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/saml_aws_redirect_url-0f2682850b9a51fec5b58831f4f91566.png"},44307:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/saml_aws_reply_url-bdeed2e8e71987a8378c75016fec2b0d.png"},60420:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/saml_aws_rule-92a9e746b662c901dab47f7f80949371.png"},21010:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/saml_aws_target_network-f29fac01d7049a42983061212ba83ef7.png"},23539:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/saml_aws_vpn_endpoint-8c18603d3d8947a56ccbbb4773450715.png"}}]);