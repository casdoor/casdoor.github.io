"use strict";(self.webpackChunkcasdoor_website=self.webpackChunkcasdoor_website||[]).push([[9604],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>m});var r=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=r.createContext({}),c=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},p=function(e){var t=c(e.components);return r.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,s=e.originalType,l=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),d=c(n),m=o,b=d["".concat(l,".").concat(m)]||d[m]||u[m]||s;return n?r.createElement(b,a(a({ref:t},p),{},{components:n})):r.createElement(b,a({ref:t},p))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var s=n.length,a=new Array(s);a[0]=d;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:o,a[1]=i;for(var c=2;c<s;c++)a[c]=n[c];return r.createElement.apply(null,a)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},57668:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>u,frontMatter:()=>s,metadata:()=>i,toc:()=>c});var r=n(87462),o=(n(67294),n(3905));const s={title:"Casbin Enforcement",description:"Using exposed Casbin APIs to manage users' access rights in organization",keywords:["permission","Casbin"]},a=void 0,i={unversionedId:"permission/casbin-enforcement",id:"permission/casbin-enforcement",title:"Casbin Enforcement",description:"Using exposed Casbin APIs to manage users' access rights in organization",source:"@site/docs/permission/casbin-enforcement.md",sourceDirName:"permission",slug:"/permission/casbin-enforcement",permalink:"/docs/permission/casbin-enforcement",draft:!1,editUrl:"https://github.com/casdoor/casdoor-website/edit/master/docs/permission/casbin-enforcement.md",tags:[],version:"current",lastUpdatedBy:"YunShu",lastUpdatedAt:1667395331,formattedLastUpdatedAt:"Nov 2, 2022",frontMatter:{title:"Casbin Enforcement",description:"Using exposed Casbin APIs to manage users' access rights in organization",keywords:["permission","Casbin"]},sidebar:"tutorialSidebar",previous:{title:"Overview",permalink:"/docs/permission/overview"},next:{title:"Providers",permalink:"/docs/category/providers"}},l={},c=[{value:"Exposed Casbin APIs",id:"exposed-casbin-apis",level:2},{value:"Enforce",id:"enforce",level:3},{value:"BatchEnforce",id:"batchenforce",level:3},{value:"GetAllObjects",id:"getallobjects",level:3},{value:"GetAllActions",id:"getallactions",level:3},{value:"GetAllRoles",id:"getallroles",level:3}],p={toc:c};function u(e){let{components:t,...s}=e;return(0,o.kt)("wrapper",(0,r.Z)({},p,s,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"exposed-casbin-apis"},"Exposed Casbin APIs"),(0,o.kt)("p",null,"At the underlying of casdoor, each permission corresponds to a casbin enforcer. We provide some APIs to call these enforcers directly. You can use them to achieve more flexible permission management functions."),(0,o.kt)("p",null,"We will show some examples of using these APIs, the permission is shown below."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"permission_edit",src:n(86261).Z,width:"2560",height:"1366"})),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"You should log in to the Casdoor and get ",(0,o.kt)("inlineCode",{parentName:"p"},"casdoor_session_id")," from cookies.")),(0,o.kt)("h3",{id:"enforce"},"Enforce"),(0,o.kt)("p",null,"Request:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},'curl --location --request POST \'http://localhost:8000/api/enforce\' \\\n--header \'Content-Type: text/plain\' \\\n--header \'Cookie: casdoor_session_id=b1888c74a7903f1813bf8c34269b0118\' \\\n--data-raw \'{"id":"built-in/permission-built-in", "v1":"app-built-in", "v2":"write"}\'\n')),(0,o.kt)("p",null,"Response:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"true\n")),(0,o.kt)("h3",{id:"batchenforce"},"BatchEnforce"),(0,o.kt)("p",null,"Request:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},'curl --location --request POST \'http://localhost:8000/api/batch-enforce\' \\\n--header \'Content-Type: text/plain\' \\\n--header \'Cookie: casdoor_session_id=b1888c74a7903f1813bf8c34269b0118\' \\\n--data-raw \'[{"id":"built-in/permission-built-in", "v1":"app-built-in", "v2":"write"}, {"id":"built-in/permission-built-in", "v1":"app-built-in", "v2":"read"}, {"id":"built-in/permission-built-in", "v1":"app-casnode", "v2":"write"}]\'\n')),(0,o.kt)("p",null,"Response:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"[\n    true,\n    true,\n    false\n]\n")),(0,o.kt)("h3",{id:"getallobjects"},"GetAllObjects"),(0,o.kt)("p",null,"Request:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"curl --location --request GET 'http://localhost:8000/api/get-all-objects' \\\n--header 'Cookie: casdoor_session_id=b1888c74a7903f1813bf8c34269b0118'\n")),(0,o.kt)("p",null,"Response:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'[\n    "app-built-in"\n]\n')),(0,o.kt)("h3",{id:"getallactions"},"GetAllActions"),(0,o.kt)("p",null,"Request:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"curl --location --request GET 'http://localhost:8000/api/get-all-actions' \\\n--header 'Cookie: casdoor_session_id=b1888c74a7903f1813bf8c34269b0118'\n")),(0,o.kt)("p",null,"Response:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'[\n    "read",\n    "write",\n    "admin"\n]\n')),(0,o.kt)("h3",{id:"getallroles"},"GetAllRoles"),(0,o.kt)("p",null,"Request: "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"curl --location --request GET 'http://localhost:8000/api/get-all-roles' \\\n--header 'Cookie: casdoor_session_id=b1888c74a7903f1813bf8c34269b0118'\n")),(0,o.kt)("p",null,"Response:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'[\n    "role_kcx66l"\n]\n')))}u.isMDXComponent=!0},86261:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/permission_edit-3eaca9b9eddd684cc840a0e986ba50d8.png"}}]);