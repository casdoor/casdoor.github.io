"use strict";(self.webpackChunkcasdoor_website=self.webpackChunkcasdoor_website||[]).push([[5021],{74480:(a,e,t)=>{t.r(e),t.d(e,{assets:()=>l,contentTitle:()=>r,default:()=>c,frontMatter:()=>i,metadata:()=>s,toc:()=>d});var n=t(87462),o=(t(67294),t(3905));t(61839);const i={title:"Grafana",description:"Using Casdoor for authentication in Grafana",keywords:["Grafana"]},r=void 0,s={unversionedId:"integration/go/grafana",id:"integration/go/grafana",title:"Grafana",description:"Using Casdoor for authentication in Grafana",source:"@site/docs/integration/go/grafana.md",sourceDirName:"integration/go",slug:"/integration/go/grafana",permalink:"/docs/integration/go/grafana",draft:!1,editUrl:"https://github.com/casdoor/casdoor-website/edit/master/docs/integration/go/grafana.md",tags:[],version:"current",lastUpdatedBy:"Yibo He",lastUpdatedAt:1664797953,formattedLastUpdatedAt:"Oct 3, 2022",frontMatter:{title:"Grafana",description:"Using Casdoor for authentication in Grafana",keywords:["Grafana"]},sidebar:"tutorialSidebar",previous:{title:"Gitea",permalink:"/docs/integration/go/gitea"},next:{title:"MinIO",permalink:"/docs/integration/go/minio"}},l={},d=[{value:"Using Casdoor for authentication in Grafana",id:"using-casdoor-for-authentication-in-grafana",level:2},{value:"Step 1 Create an app for grafana in Casdoor",id:"step-1-create-an-app-for-grafana-in-casdoor",level:2},{value:"Step 2: Modify the configuration of grafana",id:"step-2-modify-the-configuration-of-grafana",level:2},{value:"Step3: See whether it works.",id:"step3-see-whether-it-works",level:2}],f={toc:d};function c(a){let{components:e,...i}=a;return(0,o.kt)("wrapper",(0,n.Z)({},f,i,{components:e,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"using-casdoor-for-authentication-in-grafana"},"Using Casdoor for authentication in Grafana"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://grafana.com/oss/grafana/"},"Grafana")," supports authentication via Oauth. Therefore it is extremely easy for uses to use casdoor to log in in Grafana. Only several steps and simple configurations can achieve that."),(0,o.kt)("p",null,"Here is a tutorial to use Casdoor for authentication in Grafana. Before you proceed, please ensure that you have grafana installed and running."),(0,o.kt)("h2",{id:"step-1-create-an-app-for-grafana-in-casdoor"},"Step 1 Create an app for grafana in Casdoor"),(0,o.kt)("p",null,"Here is an example of creating an app in Casdoor\n",(0,o.kt)("img",{src:t(11997).Z,width:"1367",height:"810"})),(0,o.kt)("p",null,"Please copy the client secret and client id for next step."),(0,o.kt)("p",null,"Please add the callback url of grafana. By default, grafana's oauth callback is ",(0,o.kt)("inlineCode",{parentName:"p"},"/login/generic_oauth"),". So please concatenate this url correctly."),(0,o.kt)("h2",{id:"step-2-modify-the-configuration-of-grafana"},"Step 2: Modify the configuration of grafana"),(0,o.kt)("p",null,"By default the configuration file for oauth locates at ",(0,o.kt)("inlineCode",{parentName:"p"},"conf/defaults.ini")," in the workdir of grafana."),(0,o.kt)("p",null,"Please find the section ",(0,o.kt)("inlineCode",{parentName:"p"},"auth.generic_oauth")," and modify the following field:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ini"},"[auth.generic_oauth]\nname = Casdoor\nicon = signin\nenabled = true\nallow_sign_up = true\nclient_id = <client id in previous step>\nclient_secret = <client secret in previous step>\nauth_url = <endpoint of casdoor>/login/oauth/authorize\ntoken_url = <endpoint of casdoor>/api/login/oauth/access_token\n\n")),(0,o.kt)("p",null,"If you don want https enabled for casdoor, please also set ",(0,o.kt)("inlineCode",{parentName:"p"},"tls_skip_verify_insecure = true")),(0,o.kt)("h2",{id:"step3-see-whether-it-works"},"Step3: See whether it works."),(0,o.kt)("p",null,"Shutdown grafana and restart it."),(0,o.kt)("p",null,"Go to see the login page, you are supposed to see something like this\n",(0,o.kt)("img",{src:t(28623).Z,width:"1384",height:"739"})))}c.isMDXComponent=!0},11997:(a,e,t)=>{t.d(e,{Z:()=>n});const n=t.p+"assets/images/grafana_1-9f197ebf06da48585fe18ce1d66ce212.png"},28623:(a,e,t)=>{t.d(e,{Z:()=>n});const n=t.p+"assets/images/grafana_2-5136a37a917e1c899feedb23e218fa13.png"}}]);