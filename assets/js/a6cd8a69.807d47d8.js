"use strict";(self.webpackChunkcasdoor_website=self.webpackChunkcasdoor_website||[]).push([[4389],{17004:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>r,default:()=>c,frontMatter:()=>o,metadata:()=>l,toc:()=>d});var i=n(87462),a=(n(67294),n(3905));n(61839);const o={title:"LDAP Server",description:"How to connect ldap client in Casdoor",keywords:["ldapserver"]},r=void 0,l={unversionedId:"ldap/ldapserver",id:"ldap/ldapserver",title:"LDAP Server",description:"How to connect ldap client in Casdoor",source:"@site/docs/ldap/ldapserver.md",sourceDirName:"ldap",slug:"/ldap/ldapserver",permalink:"/docs/ldap/ldapserver",draft:!1,editUrl:"https://github.com/casdoor/casdoor-website/edit/master/docs/ldap/ldapserver.md",tags:[],version:"current",lastUpdatedBy:"YunShu",lastUpdatedAt:1665334576,formattedLastUpdatedAt:"Oct 9, 2022",frontMatter:{title:"LDAP Server",description:"How to connect ldap client in Casdoor",keywords:["ldapserver"]},sidebar:"tutorialSidebar",previous:{title:"Config",permalink:"/docs/ldap/config"},next:{title:"Integrations",permalink:"/docs/category/integrations"}},s={},d=[{value:"LDAP Server Port",id:"ldap-server-port",level:3},{value:"How it works",id:"how-it-works",level:3},{value:"How to bind",id:"how-to-bind",level:3},{value:"How to search",id:"how-to-search",level:3}],p={toc:d};function c(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,i.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Many systems like ",(0,a.kt)("inlineCode",{parentName:"p"},"Nexus")," support ",(0,a.kt)("inlineCode",{parentName:"p"},"ldap")," authentication. A simple ldap server is also implemented in Casdoor, which supports bind and search operations. "),(0,a.kt)("p",null,"The following describes how to connect to the ldap server in Casdoor and implement simple login authentication."),(0,a.kt)("h3",{id:"ldap-server-port"},"LDAP Server Port"),(0,a.kt)("p",null,"The LDAP server listens on port ",(0,a.kt)("inlineCode",{parentName:"p"},"389")," by default, you can change the default port by changing ",(0,a.kt)("inlineCode",{parentName:"p"},"ldapServerPort")," in ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/casdoor/casdoor/blob/28b381e01eebac66e39e20179ed95282695ecd75/conf/app.conf#L22"},"conf/app.conf"),"."),(0,a.kt)("h3",{id:"how-it-works"},"How it works"),(0,a.kt)("p",null,"Similar to the ldap client in Casdoor, the users in the ldap server are all subclasses of ",(0,a.kt)("inlineCode",{parentName:"p"},"poxisAccount"),"."),(0,a.kt)("p",null,"When the server receives a set of data transmitted by the ldap, it will parse the ",(0,a.kt)("inlineCode",{parentName:"p"},"cn")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"ou"),", where ",(0,a.kt)("inlineCode",{parentName:"p"},"cn")," represents the username, ",(0,a.kt)("inlineCode",{parentName:"p"},"ou")," represents the organization name. It doesn't matter what ",(0,a.kt)("inlineCode",{parentName:"p"},"dc")," is."),(0,a.kt)("p",null,"If it is a bind operation, the server will use Casdoor to verify the username and password and give the user permission in Casdoor."),(0,a.kt)("p",null,"If it is a search operation, the server will check whether the Search operation is legal according to the permissions given to the client by the bind operation and return a response."),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},"We only support ",(0,a.kt)("strong",{parentName:"p"},(0,a.kt)("inlineCode",{parentName:"strong"},"Simple Authentication"),"."))),(0,a.kt)("h3",{id:"how-to-bind"},"How to bind"),(0,a.kt)("p",null,"In Casdoor ldapserver, we only recognize ",(0,a.kt)("inlineCode",{parentName:"p"},"DN")," similar to this: ",(0,a.kt)("inlineCode",{parentName:"p"},"cn=admin,ou=built-in,dc=example,dc=com"),". "),(0,a.kt)("p",null,"So please set the ",(0,a.kt)("inlineCode",{parentName:"p"},"DN")," of the admin user to the above form. Then you can use this",(0,a.kt)("inlineCode",{parentName:"p"},"DN")," to bind to ldap server with the user's password to log in to casdoor for verification. If the server verification is passed, the user will be granted the authority in Casdoor."),(0,a.kt)("h3",{id:"how-to-search"},"How to search"),(0,a.kt)("p",null,"Once the bind operation completes successfully, you can perform the correct search operation. There are some differences between search and bind."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"If you want to search for a certain user, such as ",(0,a.kt)("inlineCode",{parentName:"li"},"Alice")," under the ",(0,a.kt)("inlineCode",{parentName:"li"},"built-in")," organization, you should use ",(0,a.kt)("inlineCode",{parentName:"li"},"DN")," like this :",(0,a.kt)("inlineCode",{parentName:"li"},"ou=built-in,dc=example,dc=com"),", and add ",(0,a.kt)("inlineCode",{parentName:"li"},"cn=Alice")," in the Filter field."),(0,a.kt)("li",{parentName:"ul"},"If you want to search for all users under a certain organization, such as all users in ",(0,a.kt)("inlineCode",{parentName:"li"},"built-in"),",  you should use ",(0,a.kt)("inlineCode",{parentName:"li"},"DN")," like this :",(0,a.kt)("inlineCode",{parentName:"li"},"ou=built-in,dc=example,dc=com"),", and add ",(0,a.kt)("inlineCode",{parentName:"li"},"cn=*")," in the Filter field."),(0,a.kt)("li",{parentName:"ul"},"If you want to search for all users for all organizations (the premise is that the user has sufficient permissions),  you should use ",(0,a.kt)("inlineCode",{parentName:"li"},"DN")," like this :",(0,a.kt)("inlineCode",{parentName:"li"},"ou=*,dc=example,dc=com"),", and add ",(0,a.kt)("inlineCode",{parentName:"li"},"cn=*")," in the Filter field.")))}c.isMDXComponent=!0}}]);