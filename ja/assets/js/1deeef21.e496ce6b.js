"use strict";(self.webpackChunkcasdoor_website=self.webpackChunkcasdoor_website||[]).push([[1184],{3905:(e,a,t)=>{t.d(a,{Zo:()=>p,kt:()=>f});var r=t(67294);function n(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function o(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,r)}return t}function i(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?o(Object(t),!0).forEach((function(a){n(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function l(e,a){if(null==e)return{};var t,r,n=function(e,a){if(null==e)return{};var t,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],a.indexOf(t)>=0||(n[t]=e[t]);return n}(e,a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}var s=r.createContext({}),c=function(e){var a=r.useContext(s),t=a;return e&&(t="function"==typeof e?e(a):i(i({},a),e)),t},p=function(e){var a=c(e.components);return r.createElement(s.Provider,{value:a},e.children)},u={inlineCode:"code",wrapper:function(e){var a=e.children;return r.createElement(r.Fragment,{},a)}},d=r.forwardRef((function(e,a){var t=e.components,n=e.mdxType,o=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),d=c(t),f=n,g=d["".concat(s,".").concat(f)]||d[f]||u[f]||o;return t?r.createElement(g,i(i({ref:a},p),{},{components:t})):r.createElement(g,i({ref:a},p))}));function f(e,a){var t=arguments,n=a&&a.mdxType;if("string"==typeof e||n){var o=t.length,i=new Array(o);i[0]=d;var l={};for(var s in a)hasOwnProperty.call(a,s)&&(l[s]=a[s]);l.originalType=e,l.mdxType="string"==typeof e?e:n,i[1]=l;for(var c=2;c<o;c++)i[c]=t[c];return r.createElement.apply(null,i)}return r.createElement.apply(null,t)}d.displayName="MDXCreateElement"},51678:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>s,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>l,toc:()=>c});var r=t(87462),n=(t(67294),t(3905));const o={title:"Grafana",description:"\u30b0\u30e9\u30d5\u30a1\u30ca\u3067\u306e\u8a8d\u8a3c\u306bCasdoor\u3092\u4f7f\u7528\u3059\u308b",keywords:["Grafana"],authors:["ComradeProgrammer"]},i=void 0,l={unversionedId:"integration/go/grafana",id:"integration/go/grafana",title:"Grafana",description:"\u30b0\u30e9\u30d5\u30a1\u30ca\u3067\u306e\u8a8d\u8a3c\u306bCasdoor\u3092\u4f7f\u7528\u3059\u308b",source:"@site/i18n/ja/docusaurus-plugin-content-docs/current/integration/go/grafana.md",sourceDirName:"integration/go",slug:"/integration/go/grafana",permalink:"/ja/docs/integration/go/grafana",draft:!1,editUrl:"https://github.com/casdoor/casdoor-website/edit/master/docs/integration/go/grafana.md",tags:[],version:"current",frontMatter:{title:"Grafana",description:"\u30b0\u30e9\u30d5\u30a1\u30ca\u3067\u306e\u8a8d\u8a3c\u306bCasdoor\u3092\u4f7f\u7528\u3059\u308b",keywords:["Grafana"],authors:["ComradeProgrammer"]},sidebar:"tutorialSidebar",previous:{title:"Gitea",permalink:"/ja/docs/integration/go/gitea"},next:{title:"MinIO",permalink:"/ja/docs/integration/go/minio"}},s={},c=[{value:"\u30b0\u30e9\u30d5\u30a1\u30ca\u3067\u306e\u8a8d\u8a3c\u306bCasdoor\u3092\u4f7f\u7528\u3059\u308b",id:"\u30b0\u30e9\u30d5\u30a1\u30ca\u3067\u306e\u8a8d\u8a3c\u306bcasdoor\u3092\u4f7f\u7528\u3059\u308b",level:2},{value:"\u30b9\u30c6\u30c3\u30d71\uff1aCasdoor\u3067Grafana\u7528\u306e\u30a2\u30d7\u30ea\u3092\u4f5c\u6210\u3059\u308b",id:"\u30b9\u30c6\u30c3\u30d71casdoor\u3067grafana\u7528\u306e\u30a2\u30d7\u30ea\u3092\u4f5c\u6210\u3059\u308b",level:2},{value:"\u30b9\u30c6\u30c3\u30d72\uff1a\u30b0\u30e9\u30d5\u30a1\u30ca\u306e\u8a2d\u5b9a\u3092\u5909\u66f4\u3059\u308b",id:"\u30b9\u30c6\u30c3\u30d72\u30b0\u30e9\u30d5\u30a1\u30ca\u306e\u8a2d\u5b9a\u3092\u5909\u66f4\u3059\u308b",level:2},{value:"HTTPS\u306b\u3064\u3044\u3066",id:"https\u306b\u3064\u3044\u3066",level:3},{value:"Casdoor\u3067\u30b5\u30a4\u30f3\u30a4\u30f3\u3057\u305f\u5f8c\u306eredirectURI\u306b\u3064\u3044\u3066",id:"casdoor\u3067\u30b5\u30a4\u30f3\u30a4\u30f3\u3057\u305f\u5f8c\u306eredirecturi\u306b\u3064\u3044\u3066",level:3},{value:"\u30ed\u30fc\u30eb\u30de\u30c3\u30d4\u30f3\u30b0\u306b\u3064\u3044\u3066",id:"\u30ed\u30fc\u30eb\u30de\u30c3\u30d4\u30f3\u30b0\u306b\u3064\u3044\u3066",level:3},{value:"\u30b9\u30c6\u30c3\u30d73\uff1a\u52d5\u4f5c\u3059\u308b\u304b\u78ba\u8a8d\u3059\u308b",id:"\u30b9\u30c6\u30c3\u30d73\u52d5\u4f5c\u3059\u308b\u304b\u78ba\u8a8d\u3059\u308b",level:2}],p={toc:c};function u(e){let{components:a,...o}=e;return(0,n.kt)("wrapper",(0,r.Z)({},p,o,{components:a,mdxType:"MDXLayout"}),(0,n.kt)("h2",{id:"\u30b0\u30e9\u30d5\u30a1\u30ca\u3067\u306e\u8a8d\u8a3c\u306bcasdoor\u3092\u4f7f\u7528\u3059\u308b"},"\u30b0\u30e9\u30d5\u30a1\u30ca\u3067\u306e\u8a8d\u8a3c\u306bCasdoor\u3092\u4f7f\u7528\u3059\u308b"),(0,n.kt)("p",null,(0,n.kt)("a",{parentName:"p",href:"https://grafana.com/oss/grafana/"},"Grafana"),"\u306fOAuth\u3092\u4ecb\u3057\u305f\u8a8d\u8a3c\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u3059\u3002 \u3057\u305f\u304c\u3063\u3066\u3001\u30e6\u30fc\u30b6\u30fc\u306fCasdoor\u3092\u4f7f\u7528\u3057\u3066Grafana\u306b\u30ed\u30b0\u30a4\u30f3\u3059\u308b\u3053\u3068\u304c\u975e\u5e38\u306b\u7c21\u5358\u3067\u3059\u3002 \u305d\u308c\u3092\u5b9f\u73fe\u3059\u308b\u305f\u3081\u306b\u306f\u3001\u3044\u304f\u3064\u304b\u306e\u30b9\u30c6\u30c3\u30d7\u3068\u7c21\u5358\u306a\u8a2d\u5b9a\u304c\u5fc5\u8981\u3067\u3059\u3002"),(0,n.kt)("p",null,"\u3053\u3061\u3089\u306fGrafana\u3067\u306e\u8a8d\u8a3c\u306bCasdoor\u3092\u4f7f\u7528\u3059\u308b\u65b9\u6cd5\u306b\u3064\u3044\u3066\u306e\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u3067\u3059\u3002 \u9032\u3080\u524d\u306b\u3001Grafana\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u5b9f\u884c\u4e2d\u3067\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),(0,n.kt)("h2",{id:"\u30b9\u30c6\u30c3\u30d71casdoor\u3067grafana\u7528\u306e\u30a2\u30d7\u30ea\u3092\u4f5c\u6210\u3059\u308b"},"\u30b9\u30c6\u30c3\u30d71\uff1aCasdoor\u3067Grafana\u7528\u306e\u30a2\u30d7\u30ea\u3092\u4f5c\u6210\u3059\u308b"),(0,n.kt)("p",null,"\u3053\u3061\u3089\u306fCasdoor\u3067\u30a2\u30d7\u30ea\u3092\u4f5c\u6210\u3059\u308b\u4f8b\u3067\u3059\uff1a"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Casdoor\u3067\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u3059\u308b",src:t(34709).Z,width:"1367",height:"810"})),(0,n.kt)("p",null,"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7\u306e\u305f\u3081\u306b\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u3068\u30af\u30e9\u30a4\u30a2\u30f3\u30c8ID\u3092\u30b3\u30d4\u30fc\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),(0,n.kt)("p",null,"Grafana\u306e\u30b3\u30fc\u30eb\u30d0\u30c3\u30afURL\u3092\u8ffd\u52a0\u3057\u3066\u304f\u3060\u3055\u3044\u3002 \u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3001Grafana\u306eOAuth\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u306f",(0,n.kt)("inlineCode",{parentName:"p"},"/login/generic_oauth"),"\u3067\u3059\u3002 \u3057\u305f\u304c\u3063\u3066\u3001\u3053\u306eURL\u3092\u6b63\u3057\u304f\u9023\u7d50\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),(0,n.kt)("h2",{id:"\u30b9\u30c6\u30c3\u30d72\u30b0\u30e9\u30d5\u30a1\u30ca\u306e\u8a2d\u5b9a\u3092\u5909\u66f4\u3059\u308b"},"\u30b9\u30c6\u30c3\u30d72\uff1a\u30b0\u30e9\u30d5\u30a1\u30ca\u306e\u8a2d\u5b9a\u3092\u5909\u66f4\u3059\u308b"),(0,n.kt)("p",null,"\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3001OAuth\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306fGrafana\u306e\u4f5c\u696d\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5185\u306e",(0,n.kt)("inlineCode",{parentName:"p"},"conf/defaults.ini"),"\u306b\u3042\u308a\u307e\u3059\u3002"),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"[auth.generic_oauth]"),"\u30bb\u30af\u30b7\u30e7\u30f3\u3092\u63a2\u3057\u3066\u3001\u4ee5\u4e0b\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u5909\u66f4\u3057\u3066\u304f\u3060\u3055\u3044\uff1a"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-ini"},"[auth.generic_oauth]\nname = Casdoor\nicon = signin\nenabled = true\nallow_sign_up = true\nclient_id = <client ID from previous step>\nclient_secret = <client secret from previous step>\nauth_url = <Casdoor endpoint>/login/oauth/authorize\ntoken_url = <Casdoor endpoint>/api/login/oauth/access_token\n\n")),(0,n.kt)("h3",{id:"https\u306b\u3064\u3044\u3066"},"HTTPS\u306b\u3064\u3044\u3066"),(0,n.kt)("p",null,"Casdoor\u3067HTTPS\u3092\u6709\u52b9\u306b\u3057\u305f\u304f\u306a\u3044\u5834\u5408\u3001\u307e\u305f\u306fHTTPS\u3092\u6709\u52b9\u306b\u305b\u305a\u306bGrafana\u3092\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u5834\u5408\u306f\u3001",(0,n.kt)("inlineCode",{parentName:"p"},"tls_skip_verify_insecure = true"),"\u3082\u8a2d\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),(0,n.kt)("h3",{id:"casdoor\u3067\u30b5\u30a4\u30f3\u30a4\u30f3\u3057\u305f\u5f8c\u306eredirecturi\u306b\u3064\u3044\u3066"},"Casdoor\u3067\u30b5\u30a4\u30f3\u30a4\u30f3\u3057\u305f\u5f8c\u306eredirectURI\u306b\u3064\u3044\u3066"),(0,n.kt)("p",null,"Grafana\u3067Casdoor\u3067\u30b5\u30a4\u30f3\u30a4\u30f3\u3057\u305f\u5f8c\u306b\u30ea\u30c0\u30a4\u30ec\u30af\u30c8URI\u304c\u6b63\u3057\u304f\u306a\u3044\u5834\u5408\u306f\u3001",(0,n.kt)("a",{parentName:"p",href:"https://stackoverflow.com/a/69814805"},"root_url"),"\u3092\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u3092\u691c\u8a0e\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-ini"},"[server]\nhttp_port = 3000\n# The public-facing domain name used to access Grafana from a browser\ndomain = <your IP here>\n# The full public-facing URL\nroot_url = %(protocol)s://%(domain)s:%(http_port)s/\n")),(0,n.kt)("p",null,"\u95a2\u9023\u30ea\u30f3\u30af\uff1a"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("a",{parentName:"p",href:"https://grafana.com/docs/grafana/latest/setup-grafana/configure-grafana/#root_url"},"Grafana\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8"))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("a",{parentName:"p",href:"https://github.com/grafana/grafana/blob/main/conf/defaults.ini"},"Grafana defaults.ini")))),(0,n.kt)("h3",{id:"\u30ed\u30fc\u30eb\u30de\u30c3\u30d4\u30f3\u30b0\u306b\u3064\u3044\u3066"},"\u30ed\u30fc\u30eb\u30de\u30c3\u30d4\u30f3\u30b0\u306b\u3064\u3044\u3066"),(0,n.kt)("p",null,(0,n.kt)("a",{parentName:"p",href:"https://grafana.com/docs/grafana/latest/setup-grafana/configure-security/configure-authentication/generic-oauth/#role-mapping"},"role_attribute_path"),"\u3092\u8a2d\u5b9a\u3057\u3066\u3001\u30e6\u30fc\u30b6\u30fc\u306e\u30ed\u30fc\u30eb\u3092Grafana\u306b\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\u3053\u3068\u3092\u691c\u8a0e\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-ini"},"[auth.generic_oauth]\nrole_attribute_path = contains(roles[*].name, 'admin') && 'Admin' || contains(roles[*].name, 'editor') && 'Editor' || 'Viewer'\nrole_attribute_strict = true\nallow_assign_grafana_admin = true\n")),(0,n.kt)("p",null,"\u3053\u3053\u3067\u306e",(0,n.kt)("inlineCode",{parentName:"p"},"role_attribute_path"),"\u306e\u5f8c\u306eJMESPath\u5f0f\u306f\u975e\u5e38\u306b\u91cd\u8981\u3067\u3059\u3002 Grafana\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),(0,n.kt)("h2",{id:"\u30b9\u30c6\u30c3\u30d73\u52d5\u4f5c\u3059\u308b\u304b\u78ba\u8a8d\u3059\u308b"},"\u30b9\u30c6\u30c3\u30d73\uff1a\u52d5\u4f5c\u3059\u308b\u304b\u78ba\u8a8d\u3059\u308b"),(0,n.kt)("p",null,"Grafana\u3092\u30b7\u30e3\u30c3\u30c8\u30c0\u30a6\u30f3\u3057\u3066\u3001\u518d\u8d77\u52d5\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),(0,n.kt)("p",null,"\u30ed\u30b0\u30a4\u30f3\u30da\u30fc\u30b8\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u304f\u3060\u3055\u3044\u3002 \u6b21\u306e\u3088\u3046\u306a\u3082\u306e\u304c\u8868\u793a\u3055\u308c\u308b\u306f\u305a\u3067\u3059\uff1a"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"\u6700\u7d42\u7d50\u679c",src:t(60591).Z,width:"1384",height:"739"})))}u.isMDXComponent=!0},34709:(e,a,t)=>{t.d(a,{Z:()=>r});const r=t.p+"assets/images/grafana_1-9f197ebf06da48585fe18ce1d66ce212.png"},60591:(e,a,t)=>{t.d(a,{Z:()=>r});const r=t.p+"assets/images/grafana_2-5136a37a917e1c899feedb23e218fa13.png"}}]);