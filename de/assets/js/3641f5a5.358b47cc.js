"use strict";(self.webpackChunkcasdoor_website=self.webpackChunkcasdoor_website||[]).push([[2795],{3905:(e,n,t)=>{t.d(n,{Zo:()=>p,kt:()=>g});var i=t(67294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,i,r=function(e,n){if(null==e)return{};var t,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)t=a[i],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)t=a[i],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var s=i.createContext({}),d=function(e){var n=i.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},p=function(e){var n=d(e.components);return i.createElement(s.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return i.createElement(i.Fragment,{},n)}},m=i.forwardRef((function(e,n){var t=e.components,r=e.mdxType,a=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),m=d(t),g=r,c=m["".concat(s,".").concat(g)]||m[g]||u[g]||a;return t?i.createElement(c,o(o({ref:n},p),{},{components:t})):i.createElement(c,o({ref:n},p))}));function g(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var a=t.length,o=new Array(a);o[0]=m;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var d=2;d<a;d++)o[d]=t[d];return i.createElement.apply(null,o)}return i.createElement.apply(null,t)}m.displayName="MDXCreateElement"},30276:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>o,default:()=>u,frontMatter:()=>a,metadata:()=>l,toc:()=>d});var i=t(87462),r=(t(67294),t(3905));const a={title:"Nginx",description:"Verwendung von Casdoor mit Nginx",keywords:["nginx","plus","nginx-plus"],authors:["SkipperQ"]},o=void 0,l={unversionedId:"integration/C++/Nginx",id:"integration/C++/Nginx",title:"Nginx",description:"Verwendung von Casdoor mit Nginx",source:"@site/i18n/de/docusaurus-plugin-content-docs/current/integration/C++/Nginx.md",sourceDirName:"integration/C++",slug:"/integration/C++/Nginx",permalink:"/de/docs/integration/C++/Nginx",draft:!1,editUrl:"https://github.com/casdoor/casdoor-website/edit/master/docs/integration/C++/Nginx.md",tags:[],version:"current",frontMatter:{title:"Nginx",description:"Verwendung von Casdoor mit Nginx",keywords:["nginx","plus","nginx-plus"],authors:["SkipperQ"]},sidebar:"tutorialSidebar",previous:{title:"C++",permalink:"/de/docs/category/cpp"},next:{title:"NginxCommunityVersion",permalink:"/de/docs/integration/C++/NginxCommunityVersion"}},s={},d=[{value:"Voraussetzungen",id:"voraussetzungen",level:2},{value:"Konfigurieren von Casdoor",id:"konfigurieren-von-casdoor",level:2},{value:"Konfigurieren von NGINX Plus",id:"konfigurieren-von-nginx-plus",level:2},{value:"Testen",id:"testen",level:2},{value:"Fehlerbehebung",id:"fehlerbehebung",level:2}],p={toc:d};function u(e){let{components:n,...a}=e;return(0,r.kt)("wrapper",(0,i.Z)({},p,a,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Aktivieren Sie OpenID Connect-basiertes Single Sign-On f\xfcr Anwendungen, die von NGINX Plus mit Casdoor als Identity Provider (IdP) bereitgestellt werden."),(0,r.kt)("p",null,"Dieser Leitfaden erkl\xe4rt, wie Sie Single Sign-On (SSO) f\xfcr Anwendungen aktivieren, die von NGINX Plus bereitgestellt werden. Die L\xf6sung verwendet OpenID Connect als Authentifizierungsmechanismus, mit ",(0,r.kt)("a",{parentName:"p",href:"https://casdoor.org/"},"Casdoor")," als Identity Provider (IdP) und NGINX Plus als vertrauende Partei."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Siehe auch: Weitere Informationen zur NGINX Plus OpenID Connect-Integration finden Sie im GitHub-Repository des Projekts.")),(0,r.kt)("h2",{id:"voraussetzungen"},"Voraussetzungen"),(0,r.kt)("p",null,"Die Anweisungen gehen davon aus, dass Sie folgendes haben:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Ein laufender Casdoor-Server. Siehe die Casdoor-Dokumentation f\xfcr ",(0,r.kt)("a",{parentName:"p",href:"https://casdoor.org/docs/basic/server-installation"},"Serverinstallation")," und ",(0,r.kt)("a",{parentName:"p",href:"https://casdoor.org/docs/basic/try-with-docker"},"Ausprobieren mit Docker"),".")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Ein NGINX Plus-Abonnement und NGINX Plus R15 oder sp\xe4ter. F\xfcr Installationsanweisungen siehe das ",(0,r.kt)("a",{parentName:"p",href:"https://docs.nginx.com/nginx/admin-guide/installing-nginx/installing-nginx-plus/"},"NGINX Plus Admin Guide"),".")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Das ",(0,r.kt)("a",{parentName:"p",href:"https://www.nginx.com/blog/introduction-nginscript/"},"NGINX JavaScript-Modul"),", das f\xfcr die Handhabung der Interaktion zwischen NGINX Plus und dem IdP erforderlich ist. Nach der Installation von NGINX Plus installieren Sie das Modul mit dem f\xfcr Ihr Betriebssystem geeigneten Befehl."),(0,r.kt)("p",{parentName:"li"},"  F\xfcr Debian und Ubuntu:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"sudo apt install nginx-plus-module-njs\n")),(0,r.kt)("p",{parentName:"li"},"  F\xfcr CentOS, RHEL und Oracle Linux:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"sudo yum install nginx-plus-module-njs\n"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},'Die folgende Direktive sollte im obersten ("main") Konfigurationskontext in ',(0,r.kt)("strong",{parentName:"p"},"/etc/nginx/nginx.conf")," enthalten sein, um das NGINX JavaScript-Modul zu laden:"),(0,r.kt)("p",{parentName:"li"},"  ",(0,r.kt)("inlineCode",{parentName:"p"},"load_module modules/ngx_http_js_module.so;")))),(0,r.kt)("h2",{id:"konfigurieren-von-casdoor"},"Konfigurieren von Casdoor"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Hinweis:")," Das folgende Verfahren spiegelt die Casdoor-GUI zum Zeitpunkt der Ver\xf6ffentlichung wider, aber die GUI kann sich \xe4ndern. Verwenden Sie diese Anleitung als Referenz und passen Sie sie bei Bedarf an die aktuelle Casdoor-GUI an."),(0,r.kt)("p",null,"Um einen Casdoor-Client f\xfcr NGINX Plus in der Casdoor-GUI zu erstellen, folgen Sie diesen Schritten:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Melden Sie sich bei Ihrem Casdoor-Konto an unter ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"http://your-casdoor-url.com/login/"},"http://your-casdoor-url.com/login/")),".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Klicken Sie in der oberen Navigationsleiste auf ",(0,r.kt)("strong",{parentName:"p"},"Anwendung"),". Auf der sich \xf6ffnenden Seite ",(0,r.kt)("strong",{parentName:"p"},"Anwendung")," klicken Sie oben links auf die Schaltfl\xe4che ",(0,r.kt)("strong",{parentName:"p"},"Hinzuf\xfcgen"),"."),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{alt:"addApp",src:t(38655).Z,width:"1974",height:"228"}))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Auf der sich \xf6ffnenden Seite ",(0,r.kt)("strong",{parentName:"p"},"Anwendung bearbeiten")," \xe4ndern Sie den Wert in den Feldern ",(0,r.kt)("strong",{parentName:"p"},"Name")," und ",(0,r.kt)("strong",{parentName:"p"},"Anzeigename")," auf den Namen der Anwendung, f\xfcr die Sie SSO aktivieren. Hier verwenden wir NGINX Plus."),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{alt:"appName",src:t(82431).Z,width:"570",height:"214"})),(0,r.kt)("p",{parentName:"li"},"Im Feld ",(0,r.kt)("strong",{parentName:"p"},"Weiterleitungs-URLs")," geben Sie die URL der NGINX Plus-Instanz einschlie\xdflich der Portnummer ein und enden mit ",(0,r.kt)("strong",{parentName:"p"},"/_codexch")," (in dieser Anleitung ist es ",(0,r.kt)("a",{parentName:"p",href:"https://your-site-url.com/_codexch"},"https://your-site-url.com:443/_codexch"),")."),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{alt:"redirectURL",src:t(4124).Z,width:"988",height:"252"})),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Notizen:")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"F\xfcr den Produktiveinsatz empfehlen wir dringend die Verwendung von SSL/TLS (Port 443)."),(0,r.kt)("li",{parentName:"ul"},"Die Portnummer ist auch dann obligatorisch, wenn Sie den Standardport f\xfcr HTTP (80) oder HTTPS (443) verwenden."))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Notieren Sie die Werte in den Feldern ",(0,r.kt)("strong",{parentName:"p"},"Client-ID")," und ",(0,r.kt)("strong",{parentName:"p"},"Client Secret"),". Sie werden diese in die NGINX Plus-Konfigurationsdatei in ",(0,r.kt)("a",{parentName:"p",href:"#jump1"},"Schritt 4 von ",(0,r.kt)("em",{parentName:"a"},"Konfigurieren von NGINX Plus"))," kopieren.",(0,r.kt)("span",{id:"jump3"})),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{alt:"Client",src:t(42405).Z,width:"1004",height:"216"}))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Klicken Sie in der oberen Navigationsleiste auf ",(0,r.kt)("strong",{parentName:"p"},"Rollen"),", dann klicken Sie oben links auf der sich \xf6ffnenden Seite auf die Schaltfl\xe4che ",(0,r.kt)("strong",{parentName:"p"},"Hinzuf\xfcgen"),"."),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{alt:"addRole",src:t(80816).Z,width:"1986",height:"224"}))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Auf der sich \xf6ffnenden Seite ",(0,r.kt)("strong",{parentName:"p"},"Hinzuf\xfcgen")," geben Sie einen Wert in die Felder ",(0,r.kt)("strong",{parentName:"p"},"Name")," und ",(0,r.kt)("strong",{parentName:"p"},"Anzeigename")," ein (hier ist es nginx-casdoor-role) und klicken Sie auf die Schaltfl\xe4che ",(0,r.kt)("strong",{parentName:"p"},"Speichern"),"."),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{alt:"roleName",src:t(88165).Z,width:"670",height:"204"}))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Klicken Sie in der oberen Navigationsleiste auf ",(0,r.kt)("strong",{parentName:"p"},"Benutzer"),". Auf der sich \xf6ffnenden Seite ",(0,r.kt)("strong",{parentName:"p"},"Benutzer")," klicken Sie entweder auf ",(0,r.kt)("strong",{parentName:"p"},"Bearbeiten"),", um einen der vorhandenen Benutzer zu bearbeiten, oder oben links auf die Schaltfl\xe4che ",(0,r.kt)("strong",{parentName:"p"},"Hinzuf\xfcgen"),", um einen neuen Benutzer zu erstellen.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Auf der sich \xf6ffnenden Seite ",(0,r.kt)("strong",{parentName:"p"},"Hinzuf\xfcgen")," \xe4ndern Sie den ",(0,r.kt)("strong",{parentName:"p"},"Name")," und ",(0,r.kt)("strong",{parentName:"p"},"Anzeigename")," nach Belieben (hier ist es user1)."),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{alt:"userName",src:t(17830).Z,width:"436",height:"230"})),(0,r.kt)("p",{parentName:"li"},"W\xe4hlen Sie ",(0,r.kt)("strong",{parentName:"p"},"NGINX Plus")," im Feld ",(0,r.kt)("strong",{parentName:"p"},"Anwendung f\xfcr die Anmeldung"),"."),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{alt:"signupApp",src:t(30614).Z,width:"432",height:"108"})),(0,r.kt)("p",{parentName:"li"},"Im Feld ",(0,r.kt)("strong",{parentName:"p"},"Verwaltete Konten")," w\xe4hlen Sie ",(0,r.kt)("strong",{parentName:"p"},"NGINX Plus")," unter ",(0,r.kt)("strong",{parentName:"p"},"Anwendung")," und f\xfcllen Sie den Benutzernamen und das Passwort aus."),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{alt:"managedAcc",src:t(15943).Z,width:"1694",height:"238"}))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Gehen Sie zur\xfcck zur Seite ",(0,r.kt)("strong",{parentName:"p"},"Rollen")," und klicken Sie auf ",(0,r.kt)("strong",{parentName:"p"},"Bearbeiten")," in der Zeile ",(0,r.kt)("strong",{parentName:"p"},"nginx-casdoor-role"),". Auf der sich \xf6ffnenden Seite w\xe4hlen Sie im Feld ",(0,r.kt)("strong",{parentName:"p"},"Untergeordnete Benutzer")," den Benutzernamen aus, den Sie gerade erstellt haben (hier ist es built-in/user1)."),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{alt:"subUsers",src:t(95856).Z,width:"528",height:"106"})))),(0,r.kt)("h2",{id:"konfigurieren-von-nginx-plus"},"Konfigurieren von NGINX Plus"),(0,r.kt)("p",null,"Um NGINX Plus als OpenID Connect vertrauende Partei zu konfigurieren, folgen Sie diesen Schritten:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Beginnen Sie damit, einen Klon des ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/nginxinc/nginx-openid-connect"},"nginx-openid-connect")," GitHub-Repositorys zu erstellen:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"git clone https://github.com/nginxinc/nginx-openid-connect\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Kopieren Sie die folgenden Dateien aus dem Klon in das Verzeichnis ",(0,r.kt)("strong",{parentName:"p"},"/etc/nginx/conf.d"),":"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"frontend.conf")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"openid_connect.js")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"openid_connect.server_conf")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"openid_connect_configuration.conf")))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Rufen Sie die URLs f\xfcr den Autorisierungsendpunkt, den Token-Endpunkt und die JSON Web Key (JWK)-Datei aus der Casdoor-Konfiguration ab. \xd6ffnen Sie ein Terminal und f\xfchren Sie den folgenden ",(0,r.kt)("inlineCode",{parentName:"p"},"curl"),"-Befehl aus, leiten Sie die Ausgabe an den angegebenen ",(0,r.kt)("inlineCode",{parentName:"p"},"python"),"-Befehl weiter, um ein lesbares Konfigurationsformat zu erzeugen. Aus Gr\xfcnden der K\xfcrze haben wir die Ausgabe auf nur die relevanten Felder beschr\xe4nkt. ",(0,r.kt)("span",{id:"jump1"})),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'curl http://<casdoor-server-address>/.well-known/openid-configuration | python -m json.tool\n{\n    "authorization_endpoint": "https://<casdoor-server-address>/login/oauth/authorize",\n    "...":"...",\n    "token_endpoint": "http://<casdoor-server-address>/api/login/oauth/access_token",\n    "...":"...",\n    "jwks_uri": "http://<casdoor-server-address>/.well-known/jwks",\n    "...":"...",\n}\n'))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\xd6ffnen Sie ",(0,r.kt)("strong",{parentName:"p"},"/etc/nginx/conf.d/openid_connect_configuration.conf"),' mit Ihrem bevorzugten Texteditor. \xc4ndern Sie den "default"-Parameterwert f\xfcr jede der folgenden ',(0,r.kt)("a",{parentName:"p",href:"https://nginx.org/en/docs/http/ngx_http_map_module.html#map"},"map"),"-Direktiven mit den angegebenen Werten:",(0,r.kt)("span",{id:"jump2"})),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"map $host $oidc_authz_endpoint")," \u2013 Verwenden Sie den Wert des ",(0,r.kt)("inlineCode",{parentName:"li"},"authorization_endpoint")," aus ",(0,r.kt)("a",{parentName:"li",href:"#jump1"},"Schritt 3")," (in dieser Anleitung, ",(0,r.kt)("inlineCode",{parentName:"li"},"https://<casdoor-server-address>/login/oauth/authorize"),")"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"map $host $oidc_token_endpoint")," \u2013 Verwenden Sie den Wert des ",(0,r.kt)("inlineCode",{parentName:"li"},"token_endpoint")," aus ",(0,r.kt)("a",{parentName:"li",href:"#jump1"},"Schritt 3")," (in dieser Anleitung, ",(0,r.kt)("inlineCode",{parentName:"li"},"http://<casdoor-server-address>/api/login/oauth/access_token"),")"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"map $host $oidc_client")," \u2013 Verwenden Sie den Wert im Feld ",(0,r.kt)("strong",{parentName:"li"},"Client ID")," aus ",(0,r.kt)("a",{parentName:"li",href:"#jump3"},"Schritt 4 von ",(0,r.kt)("em",{parentName:"a"},"Konfigurieren von Casdoor"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"map $host $oidc_client_secret")," \u2013 Verwenden Sie den Wert im Feld ",(0,r.kt)("strong",{parentName:"li"},"Client Secret")," aus ",(0,r.kt)("a",{parentName:"li",href:"#jump3"},"Schritt 2 von ",(0,r.kt)("em",{parentName:"a"},"Konfigurieren von Casdoor"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"map $host $oidc_hmac_key")," \u2013 Verwenden Sie einen einzigartigen, langen und sicheren Ausdruck"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Konfigurieren Sie die JWK-Datei basierend auf der verwendeten Version von NGINX Plus:"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"In NGINX Plus R17 und sp\xe4ter kann NGINX Plus die JWK-Datei direkt von der als ",(0,r.kt)("inlineCode",{parentName:"li"},"jwks_uri")," in ",(0,r.kt)("a",{parentName:"li",href:"#jump2"},"Schritt 3")," angegebenen URL lesen. Nehmen Sie die folgenden \xc4nderungen an ",(0,r.kt)("strong",{parentName:"li"},"/etc/nginx/conf.d/frontend.conf")," vor:",(0,r.kt)("ol",{parentName:"li"},(0,r.kt)("li",{parentName:"ol"},"Kommentieren Sie die ",(0,r.kt)("a",{parentName:"li",href:"http://nginx.org/en/docs/http/ngx_http_auth_jwt_module.html#auth_jwt_key_file"},"auth_jwt_key_file"),"-Direktive aus (oder entfernen Sie sie)."),(0,r.kt)("li",{parentName:"ol"},"Heben Sie die Kommentierung der ",(0,r.kt)("a",{parentName:"li",href:"http://nginx.org/en/docs/http/ngx_http_auth_jwt_module.html#auth_jwt_key_request"},"auth_jwt_key_request"),"-Direktive auf. (Der Parameter ",(0,r.kt)("inlineCode",{parentName:"li"},"/_jwks_uri")," bezieht sich auf den Wert der Variablen ",(0,r.kt)("inlineCode",{parentName:"li"},"$oidc_jwt_keyfile"),", der im n\xe4chsten Schritt festgelegt wird.)"),(0,r.kt)("li",{parentName:"ol"},'Aktualisieren Sie den "default"-Parameter der ',(0,r.kt)("inlineCode",{parentName:"li"},"map $host $oidc_jwt_keyfile"),"-Direktive auf den Wert, der aus dem Feld ",(0,r.kt)("inlineCode",{parentName:"li"},"jwks_uri")," in ",(0,r.kt)("a",{parentName:"li",href:"#jump2"},"Schritt 3")," erhalten wurde (in dieser Anleitung, ",(0,r.kt)("inlineCode",{parentName:"li"},"http://<casdoor-server-address>/.well-known/jwks"),")."))),(0,r.kt)("li",{parentName:"ul"},"In NGINX Plus R16 und fr\xfcher oder falls bevorzugt, muss die JWK-Datei auf der lokalen Festplatte liegen. Folgen Sie diesen Schritten:",(0,r.kt)("ol",{parentName:"li"},(0,r.kt)("li",{parentName:"ol"},"Kopieren Sie den JSON-Inhalt aus der JWK-Datei, die im Feld ",(0,r.kt)("inlineCode",{parentName:"li"},"jwks_uri")," in ",(0,r.kt)("a",{parentName:"li",href:"#jump2"},"Schritt 3")," angegeben ist (in dieser Anleitung, ",(0,r.kt)("inlineCode",{parentName:"li"},"http://<casdoor-server-address>/.well-known/jwks"),"), in eine lokale Datei (z.B. ",(0,r.kt)("inlineCode",{parentName:"li"},"/etc/nginx/my_casdoor_jwk.json"),")."),(0,r.kt)("li",{parentName:"ol"},"\xc4ndern Sie in ",(0,r.kt)("strong",{parentName:"li"},"/etc/nginx/conf.d/openid_connect_configuration.conf"),' den "default"-Parameter der ',(0,r.kt)("inlineCode",{parentName:"li"},"map $host $oidc_jwt_keyfile"),"-Direktive auf den Pfad der lokalen Datei."))))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Stellen Sie sicher, dass der Benutzer, der in der ",(0,r.kt)("a",{parentName:"p",href:"http://nginx.org/en/docs/ngx_core_module.html#user"},"user"),"-Direktive innerhalb der NGINX Plus-Konfigurationsdatei (normalerweise ",(0,r.kt)("strong",{parentName:"p"},"/etc/nginx/nginx.conf"),") angegeben ist, Leseberechtigungen f\xfcr die JWK-Datei hat."))),(0,r.kt)("h2",{id:"testen"},"Testen"),(0,r.kt)("p",null,"\xd6ffnen Sie einen Browser und geben Sie die Adresse Ihrer NGINX Plus-Instanz ein. Versuchen Sie dann, sich mit den Anmeldeinformationen eines Benutzers anzumelden, dem die NGINX Plus-Rolle zugewiesen wurde."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"test",src:t(68185).Z,width:"734",height:"710"})),(0,r.kt)("h2",{id:"fehlerbehebung"},"Fehlerbehebung"),(0,r.kt)("p",null,"Bitte beachten Sie den Abschnitt ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"https://github.com/nginxinc/nginx-openid-connect#troubleshooting"},"Fehlerbehebung"))," im ",(0,r.kt)("strong",{parentName:"p"},"nginx-openid-connect"),"-Repository auf GitHub."))}u.isMDXComponent=!0},42405:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/Client-a96b885b28b974e3594d8cc621e20d26.png"},38655:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/addApp-f0c3c3804e0f0c7c46099a967b140011.png"},80816:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/addRole-0472f1742fb90683f03e7754f6b443c9.png"},82431:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/appName-e76303a2d8f848e2cb82e8244580be67.png"},15943:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/managedAcc-2c79bf01d04970685e1db9e8800ab613.png"},4124:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/redirectURL-94f6fbadde9bd1dce2447f42ab5cd556.png"},88165:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/roleName-e4bb131db4aa1457aec6894f674c54c5.png"},30614:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/signupApp-f3444949e6ce9f7becbda49f59490a7f.png"},95856:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/subUsers-c5bcd4229c84f7b62e169783e8418a1a.png"},68185:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/test-61892faf0c0e4fbe4c43b277c0eab745.png"},17830:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/userName-0244eca3ebd618b68ad03ae9cda14dee.png"}}]);