"use strict";(self.webpackChunkcasdoor_website=self.webpackChunkcasdoor_website||[]).push([[4209],{3905:(e,t,r)=>{r.d(t,{Zo:()=>u,kt:()=>m});var n=r(67294);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var l=n.createContext({}),c=function(e){var t=n.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},u=function(e){var t=c(e.components);return n.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},p=n.forwardRef((function(e,t){var r=e.components,o=e.mdxType,a=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),p=c(r),m=o,b=p["".concat(l,".").concat(m)]||p[m]||d[m]||a;return r?n.createElement(b,i(i({ref:t},u),{},{components:r})):n.createElement(b,i({ref:t},u))}));function m(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=r.length,i=new Array(a);i[0]=p;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:o,i[1]=s;for(var c=2;c<a;c++)i[c]=r[c];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}p.displayName="MDXCreateElement"},37611:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>d,frontMatter:()=>a,metadata:()=>s,toc:()=>c});var n=r(87462),o=(r(67294),r(3905));const a={title:"Alibaba Cloud OSS",description:"Using Alibaba Cloud OSS as a storage provider for Casdoor",keywords:["Alibaba Cloud OSS","storage","provider","RRSA","RAM roles"],authors:["leo220yuyaodog"]},i=void 0,s={unversionedId:"provider/storage/aliyun-oss",id:"provider/storage/aliyun-oss",title:"Alibaba Cloud OSS",description:"Using Alibaba Cloud OSS as a storage provider for Casdoor",source:"@site/docs/provider/storage/aliyun-oss.md",sourceDirName:"provider/storage",slug:"/provider/storage/aliyun-oss",permalink:"/pl/docs/provider/storage/aliyun-oss",draft:!1,editUrl:"https://github.com/casdoor/casdoor-website/edit/master/docs/provider/storage/aliyun-oss.md",tags:[],version:"current",frontMatter:{title:"Alibaba Cloud OSS",description:"Using Alibaba Cloud OSS as a storage provider for Casdoor",keywords:["Alibaba Cloud OSS","storage","provider","RRSA","RAM roles"],authors:["leo220yuyaodog"]},sidebar:"tutorialSidebar",previous:{title:"MinIO",permalink:"/pl/docs/provider/storage/minio"},next:{title:"Tencent Cloud COS",permalink:"/pl/docs/provider/storage/tencentCloudCOS"}},l={},c=[{value:"Authentication Methods",id:"authentication-methods",level:2},{value:"Using Static Credentials",id:"using-static-credentials",level:3},{value:"Using RRSA (RAM Roles for Service Accounts)",id:"using-rrsa-ram-roles-for-service-accounts",level:3}],u={toc:c};function d(e){let{components:t,...a}=e;return(0,o.kt)("wrapper",(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Casdoor supports Alibaba Cloud OSS (Object Storage Service) for file storage, offering two authentication methods: static credentials and RRSA (RAM Roles for Service Accounts)."),(0,o.kt)("h2",{id:"authentication-methods"},"Authentication Methods"),(0,o.kt)("h3",{id:"using-static-credentials"},"Using Static Credentials"),(0,o.kt)("p",null,"The traditional approach uses an AccessKey to authenticate with Alibaba Cloud API. This requires full account permissions and is suitable for most deployment scenarios."),(0,o.kt)("p",null,"To create an AccessKey, follow the instructions in the ",(0,o.kt)("a",{parentName:"p",href:"https://help.aliyun.com/document_detail/53045.html"},"Alibaba Cloud workbench"),"."),(0,o.kt)("p",null,"Create the OSS service:"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Create OSS",src:r(56381).Z,width:"1000",height:"381"})),(0,o.kt)("p",null,"Fill in the necessary information in Casdoor and save:"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"OSS",src:r(29446).Z,width:"783",height:"729"})),(0,o.kt)("h3",{id:"using-rrsa-ram-roles-for-service-accounts"},"Using RRSA (RAM Roles for Service Accounts)"),(0,o.kt)("p",null,"RRSA enables zero-credential authentication by exchanging OIDC tokens for temporary STS credentials. This is particularly useful in Kubernetes environments where managing static credentials becomes cumbersome."),(0,o.kt)("p",null,"When running Casdoor in an environment that provides OIDC tokens (like Alibaba Cloud ACK with RRSA enabled), you can authenticate without storing long-term credentials. Configure these environment variables with values from your Alibaba Cloud RAM console:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"ALIBABA_CLOUD_ROLE_ARN=acs:ram::YOUR_ACCOUNT_ID:role/YOUR_ROLE_NAME\nALIBABA_CLOUD_OIDC_PROVIDER_ARN=acs:ram::YOUR_ACCOUNT_ID:oidc-provider/YOUR_PROVIDER_NAME\nALIBABA_CLOUD_OIDC_TOKEN_FILE=/var/run/secrets/tokens/oidc-token\n")),(0,o.kt)("p",null,"Replace ",(0,o.kt)("inlineCode",{parentName:"p"},"YOUR_ACCOUNT_ID"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"YOUR_ROLE_NAME"),", and ",(0,o.kt)("inlineCode",{parentName:"p"},"YOUR_PROVIDER_NAME")," with your actual values from the ",(0,o.kt)("a",{parentName:"p",href:"https://ram.console.aliyun.com/"},"RAM console"),". The token file path is typically mounted automatically by the Kubernetes service account system."),(0,o.kt)("p",null,"In the Casdoor storage provider configuration, leave the Client ID and Client Secret fields empty. Casdoor will automatically detect the RRSA environment and handle authentication using the OIDC token."),(0,o.kt)("p",null,"If RRSA credentials cannot be obtained, Casdoor gracefully falls back to static credentials, ensuring your application continues to work even during configuration changes."),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"For production deployments in Alibaba Cloud ACK, RRSA is the recommended approach as it eliminates credential management overhead and enhances security through short-lived tokens.")),(0,o.kt)("p",null,"You can now use Alibaba Cloud storage services in your application with improved security and flexibility."))}d.isMDXComponent=!0},56381:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/images/createaliyunoss-2f0ded75b6da7e6b9b0c5cdf45216814.png"},29446:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/images/oss-70b82c0e7a824707fd84db54bbc7edc5.png"}}]);