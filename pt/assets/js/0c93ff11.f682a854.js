"use strict";(self.webpackChunkcasdoor_website=self.webpackChunkcasdoor_website||[]).push([[7054],{3905:(e,a,n)=>{n.d(a,{Zo:()=>c,kt:()=>u});var t=n(67294);function o(e,a,n){return a in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}function i(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),n.push.apply(n,t)}return n}function r(e){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{};a%2?i(Object(n),!0).forEach((function(a){o(e,a,n[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))}))}return e}function s(e,a){if(null==e)return{};var n,t,o=function(e,a){if(null==e)return{};var n,t,o={},i=Object.keys(e);for(t=0;t<i.length;t++)n=i[t],a.indexOf(n)>=0||(o[n]=e[n]);return o}(e,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)n=i[t],a.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var p=t.createContext({}),l=function(e){var a=t.useContext(p),n=a;return e&&(n="function"==typeof e?e(a):r(r({},a),e)),n},c=function(e){var a=l(e.components);return t.createElement(p.Provider,{value:a},e.children)},d={inlineCode:"code",wrapper:function(e){var a=e.children;return t.createElement(t.Fragment,{},a)}},m=t.forwardRef((function(e,a){var n=e.components,o=e.mdxType,i=e.originalType,p=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),m=l(n),u=o,k=m["".concat(p,".").concat(u)]||m[u]||d[u]||i;return n?t.createElement(k,r(r({ref:a},c),{},{components:n})):t.createElement(k,r({ref:a},c))}));function u(e,a){var n=arguments,o=a&&a.mdxType;if("string"==typeof e||o){var i=n.length,r=new Array(i);r[0]=m;var s={};for(var p in a)hasOwnProperty.call(a,p)&&(s[p]=a[p]);s.originalType=e,s.mdxType="string"==typeof e?e:o,r[1]=s;for(var l=2;l<i;l++)r[l]=n[l];return t.createElement.apply(null,r)}return t.createElement.apply(null,n)}m.displayName="MDXCreateElement"},82378:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>p,contentTitle:()=>r,default:()=>d,frontMatter:()=>i,metadata:()=>s,toc:()=>l});var t=n(87462),o=(n(67294),n(3905));const i={title:"Jenkins OIDC",description:"Usando o protocolo OIDC como um IDP para conectar v\xe1rias aplica\xe7\xf5es, como Jenkins",keywords:["OIDC","Jenkins","IDP"],authors:["Abingcbc"]},r=void 0,s={unversionedId:"integration/java/jenkins-oidc",id:"integration/java/jenkins-oidc",title:"Jenkins OIDC",description:"Usando o protocolo OIDC como um IDP para conectar v\xe1rias aplica\xe7\xf5es, como Jenkins",source:"@site/i18n/pt/docusaurus-plugin-content-docs/current/integration/java/jenkins-oidc.md",sourceDirName:"integration/java",slug:"/integration/java/jenkins-oidc",permalink:"/pt/docs/integration/java/jenkins-oidc",draft:!1,editUrl:"https://github.com/casdoor/casdoor-website/edit/master/docs/integration/java/jenkins-oidc.md",tags:[],version:"current",frontMatter:{title:"Jenkins OIDC",description:"Usando o protocolo OIDC como um IDP para conectar v\xe1rias aplica\xe7\xf5es, como Jenkins",keywords:["OIDC","Jenkins","IDP"],authors:["Abingcbc"]},sidebar:"tutorialSidebar",previous:{title:"Plugin Jenkins",permalink:"/pt/docs/integration/java/jenkins-plugin"},next:{title:"Jira",permalink:"/pt/docs/category/jira"}},p={},l=[{value:"Passo 1: Implantar Casdoor e Jenkins",id:"passo-1-implantar-casdoor-e-jenkins",level:2},{value:"Passo 2: Configurar a aplica\xe7\xe3o Casdoor",id:"passo-2-configurar-a-aplica\xe7\xe3o-casdoor",level:2},{value:"Passo 3: Configurar o Jenkins",id:"passo-3-configurar-o-jenkins",level:2}],c={toc:l};function d(e){let{components:a,...i}=e;return(0,o.kt)("wrapper",(0,t.Z)({},c,i,{components:a,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"O Casdoor pode usar o protocolo OIDC como um IDP para conectar v\xe1rias aplica\xe7\xf5es. Neste exemplo, usaremos o Jenkins para demonstrar como usar o OIDC para se conectar \xe0s suas aplica\xe7\xf5es."),(0,o.kt)("p",null,"A seguir est\xe3o alguns dos nomes usados na configura\xe7\xe3o:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"CASDOOR_HOSTNAME"),": O nome de dom\xednio ou IP onde o servidor Casdoor est\xe1 implantado.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"JENKINS_HOSTNAME"),": O nome de dom\xednio ou IP onde o Jenkins est\xe1 implantado."))),(0,o.kt)("h2",{id:"passo-1-implantar-casdoor-e-jenkins"},"Passo 1: Implantar Casdoor e Jenkins"),(0,o.kt)("p",null,"Primeiramente, implante ",(0,o.kt)("a",{parentName:"p",href:"/docs/basic/server-installation"},"Casdoor")," e ",(0,o.kt)("a",{parentName:"p",href:"https://www.jenkins.io/doc/book/installing/"},"Jenkins"),"."),(0,o.kt)("p",null,"Ap\xf3s uma implanta\xe7\xe3o bem-sucedida, certifique-se do seguinte:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Defina a URL do Jenkins (Gerenciar Jenkins -> Configurar Sistema -> Localiza\xe7\xe3o do Jenkins) para ",(0,o.kt)("inlineCode",{parentName:"p"},"JENKINS_HOSTNAME"),". ",(0,o.kt)("img",{alt:"URL do Jenkins",src:n(25742).Z,width:"1887",height:"825"}))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Certifique-se de que o Casdoor possa ser acessado e usado normalmente.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Defina o valor de ",(0,o.kt)("inlineCode",{parentName:"p"},"origin")," do Casdoor (conf/app.conf) para ",(0,o.kt)("inlineCode",{parentName:"p"},"CASDOOR_HOSTNAME"),". ",(0,o.kt)("img",{alt:"Configura\xe7\xe3o do Casdoor",src:n(66496).Z,width:"1013",height:"448"})))),(0,o.kt)("h2",{id:"passo-2-configurar-a-aplica\xe7\xe3o-casdoor"},"Passo 2: Configurar a aplica\xe7\xe3o Casdoor"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Crie uma nova aplica\xe7\xe3o Casdoor ou use uma existente.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Adicione uma URL de redirecionamento: ",(0,o.kt)("inlineCode",{parentName:"p"},"http://JENKINS_HOSTNAME/securityRealm/finishLogin")," ",(0,o.kt)("img",{alt:"Configura\xe7\xe3o da Aplica\xe7\xe3o Casdoor",src:n(9871).Z,width:"1366",height:"581"}))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Adicione o provedor que deseja e forne\xe7a quaisquer configura\xe7\xf5es adicionais."))),(0,o.kt)("p",null,"Voc\xea obter\xe1 dois valores da p\xe1gina de configura\xe7\xf5es da aplica\xe7\xe3o: ",(0,o.kt)("inlineCode",{parentName:"p"},"Client ID")," e ",(0,o.kt)("inlineCode",{parentName:"p"},"Client secret"),". Usaremos esses valores na pr\xf3xima etapa."),(0,o.kt)("p",null,"Abra seu navegador favorito e visite: ",(0,o.kt)("strong",{parentName:"p"},"http://",(0,o.kt)("inlineCode",{parentName:"strong"},"CASDOOR_HOSTNAME"),"/.well-known/openid-configuration")," para visualizar a configura\xe7\xe3o OIDC do Casdoor."),(0,o.kt)("h2",{id:"passo-3-configurar-o-jenkins"},"Passo 3: Configurar o Jenkins"),(0,o.kt)("p",null,"Primeiro, precisamos instalar ",(0,o.kt)("a",{parentName:"p",href:"https://plugins.jenkins.io/oic-auth/"},"Autentica\xe7\xe3o OpenId Connect")," pois o Jenkins n\xe3o suporta nativamente OIDC."),(0,o.kt)("p",null,"Ap\xf3s a instala\xe7\xe3o estar completa, v\xe1 para ",(0,o.kt)("strong",{parentName:"p"},"Gerenciar Jenkins")," -> ",(0,o.kt)("strong",{parentName:"p"},"Configurar Seguran\xe7a Global"),". ",(0,o.kt)("img",{alt:"seguran\xe7a global do jenkins",src:n(4289).Z,width:"1902",height:"876"})),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"Certifique-se de fazer um backup do arquivo ",(0,o.kt)("inlineCode",{parentName:"p"},"config.xml")," do Jenkins para recuperar em caso de erros de configura\xe7\xe3o.")),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Em Controle de Acesso, selecione ",(0,o.kt)("inlineCode",{parentName:"p"},"Login with Openid Connect")," como o ",(0,o.kt)("strong",{parentName:"p"},"Realm de Seguran\xe7a"),".")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Especifique o ",(0,o.kt)("inlineCode",{parentName:"p"},"Client ID")," anotado acima no campo ",(0,o.kt)("strong",{parentName:"p"},"Client ID"),".")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Especifique o ",(0,o.kt)("inlineCode",{parentName:"p"},"Client secret")," anotado acima no campo ",(0,o.kt)("strong",{parentName:"p"},"Client secret"),".")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"No modo de Configura\xe7\xe3o, selecione ",(0,o.kt)("inlineCode",{parentName:"p"},"Configura\xe7\xe3o autom\xe1tica")," e insira ",(0,o.kt)("strong",{parentName:"p"},"http://",(0,o.kt)("inlineCode",{parentName:"strong"},"CASDOOR_HOSTNAME"),"/.well-known/openid-configuration")," como o ponto final de configura\xe7\xe3o conhecido. ",(0,o.kt)("img",{alt:"Configura\xe7\xe3o do Jenkins",src:n(2498).Z,width:"1410",height:"631"})),(0,o.kt)("p",{parentName:"li"},"Se o seu Casdoor estiver implantado localmente, talvez seja necess\xe1rio selecionar ",(0,o.kt)("inlineCode",{parentName:"p"},"Configura\xe7\xe3o manual")," e fornecer as seguintes informa\xe7\xf5es:"),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"URL do servidor de token: ",(0,o.kt)("strong",{parentName:"li"},"http://",(0,o.kt)("inlineCode",{parentName:"strong"},"CASDOOR_HOSTNAME"),"/api/login/oauth/access_token")),(0,o.kt)("li",{parentName:"ul"},"URL do servidor de autoriza\xe7\xe3o: ",(0,o.kt)("strong",{parentName:"li"},"http://",(0,o.kt)("inlineCode",{parentName:"strong"},"CASDOOR_HOSTNAME"),"/login/oauth/authorize")),(0,o.kt)("li",{parentName:"ul"},"URL do servidor UserInfo: ",(0,o.kt)("strong",{parentName:"li"},"http://",(0,o.kt)("inlineCode",{parentName:"strong"},"CASDOOR_HOSTNAME"),"/api/get-account")),(0,o.kt)("li",{parentName:"ul"},"Escopos: ",(0,o.kt)("inlineCode",{parentName:"li"},"address phone openid profile offline_access email")," ",(0,o.kt)("img",{alt:"Configura\xe7\xe3o manual",src:n(38517).Z,width:"1361",height:"548"})))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Clique em ",(0,o.kt)("strong",{parentName:"p"},"Configura\xe7\xf5es avan\xe7adas")," e preencha o seguinte:"),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"No campo Nome de usu\xe1rio, especifique ",(0,o.kt)("inlineCode",{parentName:"li"},"name"),"."),(0,o.kt)("li",{parentName:"ul"},"No campo Nome completo, especifique ",(0,o.kt)("inlineCode",{parentName:"li"},"displayName"),"."),(0,o.kt)("li",{parentName:"ul"},"No campo Email, especifique ",(0,o.kt)("inlineCode",{parentName:"li"},"email"),".")),(0,o.kt)("p",{parentName:"li"},(0,o.kt)("img",{alt:"Configura\xe7\xe3o do Campo Userinfo",src:n(80215).Z,width:"1550",height:"613"}))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Na se\xe7\xe3o ",(0,o.kt)("strong",{parentName:"p"},"Autoriza\xe7\xe3o"),", habilite \u201cUsu\xe1rios logados podem fazer qualquer coisa\u201d e desabilite \u201cPermitir acesso de leitura an\xf4nimo\u201d. Voc\xea pode configurar autoriza\xe7\xf5es mais complexas mais tarde, mas por agora, verifique se o OpenID funciona corretamente."),(0,o.kt)("p",{parentName:"li"},"Deslogue do Jenkins, e voc\xea dever\xe1 ser redirecionado para o Casdoor para autentica\xe7\xe3o.",(0,o.kt)("img",{alt:"P\xe1gina de Login do Jenkins",src:n(2845).Z,width:"1383",height:"769"})))))}d.isMDXComponent=!0},66496:(e,a,n)=>{n.d(a,{Z:()=>t});const t=n.p+"assets/images/casdoor_origin-8f5d9e44f6b58828ce69e6e6d896e122.png"},9871:(e,a,n)=>{n.d(a,{Z:()=>t});const t=n.p+"assets/images/appseeting_jenkins-6e0a2968614d0735005951278f44c008.png"},2498:(e,a,n)=>{n.d(a,{Z:()=>t});const t=n.p+"assets/images/jenkins_auto-acde42e269bf8ed09bf57320d1eecdc0.png"},80215:(e,a,n)=>{n.d(a,{Z:()=>t});const t=n.p+"assets/images/jenkins_field-31b28e80dce83b780c934c68648ed0e1.png"},4289:(e,a,n)=>{n.d(a,{Z:()=>t});const t=n.p+"assets/images/jenkins_global_security-0f4feee9caf8c58579f9275e1f281333.png"},2845:(e,a,n)=>{n.d(a,{Z:()=>t});const t=n.p+"assets/images/jenkins_login-d7c2179fcdc73e29ca6b90c494cba55b.png"},38517:(e,a,n)=>{n.d(a,{Z:()=>t});const t=n.p+"assets/images/jenkins_manual-e28d6e6af536025049ea2a3a22f38eb3.png"},25742:(e,a,n)=>{n.d(a,{Z:()=>t});const t=n.p+"assets/images/jenkins_url-9e8f261138a88501bdfce79ee1c1f3fa.png"}}]);