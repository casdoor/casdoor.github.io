(self.webpackChunkcasdoor_website=self.webpackChunkcasdoor_website||[]).push([[8383],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return p},kt:function(){return h}});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=r.createContext({}),c=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},p=function(e){var t=c(e.components);return r.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),d=c(n),h=a,m=d["".concat(l,".").concat(h)]||d[h]||u[h]||o;return n?r.createElement(m,s(s({ref:t},p),{},{components:n})):r.createElement(m,s({ref:t},p))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,s=new Array(o);s[0]=d;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:a,s[1]=i;for(var c=2;c<o;c++)s[c]=n[c];return r.createElement.apply(null,s)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},2681:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return i},contentTitle:function(){return l},metadata:function(){return c},toc:function(){return p},default:function(){return d}});var r=n(4034),a=n(9973),o=(n(7294),n(3905)),s=["components"],i={sidebar_position:3,title:"SDKs Usage"},l=void 0,c={unversionedId:"basic/SDKs",id:"basic/SDKs",isDocsHomePage:!1,title:"SDKs Usage",description:"Once casdoor is started, you can access user information on casdoor in your application.",source:"@site/i18n/fr/docusaurus-plugin-content-docs/current/basic/SDKs.md",sourceDirName:"basic",slug:"/basic/SDKs",permalink:"/fr/docs/basic/SDKs",editUrl:"https://github.com/casdoor/casdoor-website/tree/master/docs/basic/SDKs.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3,title:"SDKs Usage"},sidebar:"tutorialSidebar",previous:{title:"Basic Introduction",permalink:"/fr/docs/basic/basic-concept-introduction"},next:{title:"Overview",permalink:"/fr/docs/organization/overview"}},p=[{value:"Step1. Init",id:"step1-init",children:[],level:2},{value:"Step2. SDK access Casdoor",id:"step2-sdk-access-casdoor",children:[],level:2},{value:"Step3. Get token and parse",id:"step3-get-token-and-parse",children:[],level:2},{value:"Step4. Set Session in your app",id:"step4-set-session-in-your-app",children:[],level:2},{value:"Step5. Interact with the users table",id:"step5-interact-with-the-users-table",children:[],level:2},{value:"Summary",id:"summary",children:[],level:2}],u={toc:p};function d(e){var t=e.components,n=(0,a.Z)(e,s);return(0,o.kt)("wrapper",(0,r.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Once casdoor is started, you can access user information on casdoor in your application."),(0,o.kt)("p",null,"In order to facilitate users to quickly access the data on the casdoor server, we provide ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/casdoor?q=sdk&type=&language=&sort="},"SDKs"),"(",(0,o.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Software_development_kit"},"what is the SDK?"),") for many languages, such as ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/casdoor/casdoor-go-sdk"},"Golang"),", ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/casdoor/casdoor-js-sdk"},"JavaScript"),", ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/casdoor/casdoor-php-sdk"},"PHP"),", ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/casdoor/casdoor-java-sdk"},"Java"),", etc."),(0,o.kt)("p",null," In this chapter we will show you how to use these SDKs, that is, the basic/general steps for using them."),(0,o.kt)("h2",{id:"step1-init"},"Step1. Init"),(0,o.kt)("p",null,"The first step is to get in touch with the casdoor server. You need to provide the address of the casdoor server, the credential ClientId and ClientSecret of the application, the jwt secret, and the name of the organization where the application is located, which are all string type."),(0,o.kt)("p",null,"Roughly like this:"),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"Name (in order)"),(0,o.kt)("th",{parentName:"tr",align:null},"Must"),(0,o.kt)("th",{parentName:"tr",align:null},"Description"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"endpoint"),(0,o.kt)("td",{parentName:"tr",align:null},"Yes"),(0,o.kt)("td",{parentName:"tr",align:null},"Casdoor Server Url, such as ",(0,o.kt)("inlineCode",{parentName:"td"},"http://localhost:8000"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"clientId"),(0,o.kt)("td",{parentName:"tr",align:null},"Yes"),(0,o.kt)("td",{parentName:"tr",align:null},"Application.client_id")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"clientSecret"),(0,o.kt)("td",{parentName:"tr",align:null},"Yes"),(0,o.kt)("td",{parentName:"tr",align:null},"Application.client_secret")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"jwtSecret"),(0,o.kt)("td",{parentName:"tr",align:null},"Yes"),(0,o.kt)("td",{parentName:"tr",align:null},"Read from token_jwt_key.pem file")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"organizationName"),(0,o.kt)("td",{parentName:"tr",align:null},"Yes"),(0,o.kt)("td",{parentName:"tr",align:null},"Application.organization")))),(0,o.kt)("p",null,"The function signature in Go is as follows, similar to other languages:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-go"},"func InitConfig(endpoint string, clientId string, clientSecret string, jwtSecret string, organizationName string)\n")),(0,o.kt)("p",null,"You can refer to the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/casbin/casnode/blob/master/controllers/account.go#L32"},"usage in Casnode"),","),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-go"},'var CasdoorEndpoint = "http://localhost:8000"\nvar ClientId = "541738959670d221d59d"\nvar ClientSecret = "66863369a64a5863827cf949bab70ed560ba24bf"\nvar JwtSecret = "CasdoorSecret"\nvar CasdoorOrganization = "casbin-forum"\n\nfunc init() {\n    auth.InitConfig(CasdoorEndpoint, ClientId, ClientSecret, JwtSecret, CasdoorOrganization)\n}\n')),(0,o.kt)("p",null,"More specific behavior can refer to ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/casdoor/casdoor-go-sdk"},"the source codes of casdoor-go-sdk"),"."),(0,o.kt)("h2",{id:"step2-sdk-access-casdoor"},"Step2. SDK access Casdoor"),(0,o.kt)("p",null,"With previous configured ",(0,o.kt)("inlineCode",{parentName:"p"},"authConfig"),", Casdoor SDK now can turn to casdoor server to verify users, note that SDK uses ",(0,o.kt)("inlineCode",{parentName:"p"},"SetBasicAuth")," method in net/http library to get ",(0,o.kt)("inlineCode",{parentName:"p"},"ClientId")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"ClientSecret")," from Casdoor server and verify users in your application."),(0,o.kt)("p",null,"More details please refer to ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/casdoor/casdoor-go-sdk/blob/master/auth/base.go#L42"},"https://github.com/casdoor/casdoor-go-sdk/blob/master/auth/base.go#L42")),(0,o.kt)("h2",{id:"step3-get-token-and-parse"},"Step3. Get token and parse"),(0,o.kt)("p",null,"After casdoor verification passed, it will be redirected to your application with code and state, like ",(0,o.kt)("inlineCode",{parentName:"p"},"http://forum.casbin.org?code=xxx&state=yyyy"),"."),(0,o.kt)("p",null,"Your web application can get the ",(0,o.kt)("inlineCode",{parentName:"p"},"code"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"state")," and call ",(0,o.kt)("inlineCode",{parentName:"p"},"GetOAuthToken(code, state)"),", then parse out jwt token."),(0,o.kt)("p",null,"See ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/casbin/casnode/blob/master/controllers/auth.go#L36"},"Usage in Casnode")," as a reference:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-go"},'code := c.Input().Get("code")\nstate := c.Input().Get("state")\n\ntoken, err := auth.GetOAuthToken(code, state)\nif err != nil {\n    panic(err)\n}\n\nclaims, err := auth.ParseJwtToken(token.AccessToken)\nif err != nil {\n    panic(err)\n}\n')),(0,o.kt)("h2",{id:"step4-set-session-in-your-app"},"Step4. Set Session in your app"),(0,o.kt)("p",null,"You need to verify the information parsed from the third step. After it is correct (it may be modified), it proves that the user verification has passed, and you can set up the session in your own application."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"At this point, the user login is actually completed"),"."),(0,o.kt)("p",null,"The Method to set session varies greatly depending on the languages and frameworks, casnode uses the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/beego/beego/"},"beego framework")," and set session by encapsulation method ",(0,o.kt)("inlineCode",{parentName:"p"},"c.SetSessionUser()"),", ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/casbin/casnode/blob/master/controllers/base.go#L44"},"source code"),"."),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://github.com/casbin/casnode/blob/master/controllers/auth.go#L47"},"Usage in Casnode"),","),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-go"},"token, err := auth.GetOAuthToken(code, state)\nif err != nil {\n    panic(err)\n}\n\nclaims, err := auth.ParseJwtToken(token.AccessToken)\nif err != nil {\n    panic(err)\n}\n\nclaims.AccessToken = token.AccessToken\nc.SetSessionUser(claims)                // see here\n")),(0,o.kt)("p",null,"That's it!"),(0,o.kt)("h2",{id:"step5-interact-with-the-users-table"},"Step5. Interact with the users table"),(0,o.kt)("p",null,"You may not only need to log in, but you will also get user details, or update users information, etc."),(0,o.kt)("p",null,"The SDK provides several key functions, and you need to customize them in more detail, or report an issue!"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"GetUser(name string)"),", get one user by user name."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"GetUsers()"),", get all users."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"UpdateUser(auth.User)/AddUser(auth.User)/DeleteUser(auth.User)"),", write user to database."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"CheckUserPassword(auth.User)"),", check user's password.")),(0,o.kt)("h2",{id:"summary"},"Summary"),(0,o.kt)("p",null,"casdoor SDKs are very convenient for casdoor application development. It does not require us to learn how to interact with the casdoor server from 0, which reduces our burden."),(0,o.kt)("p",null,"Of course, these SDKs are still in the development stage (you can see that most of the versions are still in 0.1\ud83d\ude04), if you have any suggestions, welcome to communicate with us in the community!"))}d.isMDXComponent=!0}}]);