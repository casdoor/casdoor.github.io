"use strict";(self.webpackChunkcasdoor_website=self.webpackChunkcasdoor_website||[]).push([[7227],{3905:(e,n,a)=>{a.d(n,{Zo:()=>c,kt:()=>u});var t=a(67294);function i(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function r(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,t)}return a}function o(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?r(Object(a),!0).forEach((function(n){i(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function s(e,n){if(null==e)return{};var a,t,i=function(e,n){if(null==e)return{};var a,t,i={},r=Object.keys(e);for(t=0;t<r.length;t++)a=r[t],n.indexOf(a)>=0||(i[a]=e[a]);return i}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(t=0;t<r.length;t++)a=r[t],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var l=t.createContext({}),p=function(e){var n=t.useContext(l),a=n;return e&&(a="function"==typeof e?e(n):o(o({},n),e)),a},c=function(e){var n=p(e.components);return t.createElement(l.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},m=t.forwardRef((function(e,n){var a=e.components,i=e.mdxType,r=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),m=p(a),u=i,k=m["".concat(l,".").concat(u)]||m[u]||d[u]||r;return a?t.createElement(k,o(o({ref:n},c),{},{components:a})):t.createElement(k,o({ref:n},c))}));function u(e,n){var a=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var r=a.length,o=new Array(r);o[0]=m;var s={};for(var l in n)hasOwnProperty.call(n,l)&&(s[l]=n[l]);s.originalType=e,s.mdxType="string"==typeof e?e:i,o[1]=s;for(var p=2;p<r;p++)o[p]=a[p];return t.createElement.apply(null,o)}return t.createElement.apply(null,a)}m.displayName="MDXCreateElement"},85598:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>d,frontMatter:()=>r,metadata:()=>s,toc:()=>p});var t=a(87462),i=(a(67294),a(3905));const r={title:"Jenkins OIDC",description:"Usando el protocolo OIDC como un IDP para conectar varias aplicaciones, como Jenkins",keywords:["OIDC","Jenkins","IDP"],authors:["Abingcbc"]},o=void 0,s={unversionedId:"integration/java/jenkins-oidc",id:"integration/java/jenkins-oidc",title:"Jenkins OIDC",description:"Usando el protocolo OIDC como un IDP para conectar varias aplicaciones, como Jenkins",source:"@site/i18n/es/docusaurus-plugin-content-docs/current/integration/java/jenkins-oidc.md",sourceDirName:"integration/java",slug:"/integration/java/jenkins-oidc",permalink:"/es/docs/integration/java/jenkins-oidc",draft:!1,editUrl:"https://github.com/casdoor/casdoor-website/edit/master/docs/integration/java/jenkins-oidc.md",tags:[],version:"current",frontMatter:{title:"Jenkins OIDC",description:"Usando el protocolo OIDC como un IDP para conectar varias aplicaciones, como Jenkins",keywords:["OIDC","Jenkins","IDP"],authors:["Abingcbc"]},sidebar:"tutorialSidebar",previous:{title:"Complemento de Jenkins",permalink:"/es/docs/integration/java/jenkins-plugin"},next:{title:"Jira",permalink:"/es/docs/category/jira"}},l={},p=[{value:"Paso 1: Desplegar Casdoor y Jenkins",id:"paso-1-desplegar-casdoor-y-jenkins",level:2},{value:"Paso 2: Configurar la aplicaci\xf3n Casdoor",id:"paso-2-configurar-la-aplicaci\xf3n-casdoor",level:2},{value:"Paso 3: Configurar Jenkins",id:"paso-3-configurar-jenkins",level:2}],c={toc:p};function d(e){let{components:n,...r}=e;return(0,i.kt)("wrapper",(0,t.Z)({},c,r,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"Casdoor puede usar el protocolo OIDC como un IDP para conectar varias aplicaciones. En este ejemplo, usaremos Jenkins para demostrar c\xf3mo usar OIDC para conectarse a sus aplicaciones."),(0,i.kt)("p",null,"Los siguientes son algunos de los nombres utilizados en la configuraci\xf3n:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"CASDOOR_HOSTNAME"),": El nombre de dominio o IP donde se despliega el servidor de Casdoor.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"JENKINS_HOSTNAME"),": El nombre de dominio o IP donde se despliega Jenkins."))),(0,i.kt)("h2",{id:"paso-1-desplegar-casdoor-y-jenkins"},"Paso 1: Desplegar Casdoor y Jenkins"),(0,i.kt)("p",null,"Primero, despliega ",(0,i.kt)("a",{parentName:"p",href:"/docs/basic/server-installation"},"Casdoor")," y ",(0,i.kt)("a",{parentName:"p",href:"https://www.jenkins.io/doc/book/installing/"},"Jenkins"),"."),(0,i.kt)("p",null,"Despu\xe9s de un despliegue exitoso, aseg\xfarate de lo siguiente:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Establece la URL de Jenkins (Administrar Jenkins -> Configurar Sistema -> Ubicaci\xf3n de Jenkins) a ",(0,i.kt)("inlineCode",{parentName:"p"},"JENKINS_HOSTNAME"),". ",(0,i.kt)("img",{alt:"URL de Jenkins",src:a(25742).Z,width:"1887",height:"825"}))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Aseg\xfarate de que Casdoor pueda iniciarse sesi\xf3n y usarse normalmente.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Establece el valor de ",(0,i.kt)("inlineCode",{parentName:"p"},"origin")," de Casdoor (conf/app.conf) a ",(0,i.kt)("inlineCode",{parentName:"p"},"CASDOOR_HOSTNAME"),". ",(0,i.kt)("img",{alt:"Configuraci\xf3n de Casdoor",src:a(66496).Z,width:"1013",height:"448"})))),(0,i.kt)("h2",{id:"paso-2-configurar-la-aplicaci\xf3n-casdoor"},"Paso 2: Configurar la aplicaci\xf3n Casdoor"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Crea una nueva aplicaci\xf3n Casdoor o usa una existente.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"A\xf1ade una URL de redirecci\xf3n: ",(0,i.kt)("inlineCode",{parentName:"p"},"http://JENKINS_HOSTNAME/securityRealm/finishLogin")," ",(0,i.kt)("img",{alt:"Configuraci\xf3n de la Aplicaci\xf3n Casdoor",src:a(9871).Z,width:"1366",height:"581"}))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"A\xf1ade el proveedor que desees y proporciona cualquier configuraci\xf3n adicional."))),(0,i.kt)("p",null,"Obtendr\xe1s dos valores de la p\xe1gina de configuraci\xf3n de la aplicaci\xf3n: ",(0,i.kt)("inlineCode",{parentName:"p"},"Client ID")," y ",(0,i.kt)("inlineCode",{parentName:"p"},"Client secret"),". Usaremos estos valores en el siguiente paso."),(0,i.kt)("p",null,"Abre tu navegador favorito y visita: ",(0,i.kt)("strong",{parentName:"p"},"http://",(0,i.kt)("inlineCode",{parentName:"strong"},"CASDOOR_HOSTNAME"),"/.well-known/openid-configuration")," para ver la configuraci\xf3n OIDC de Casdoor."),(0,i.kt)("h2",{id:"paso-3-configurar-jenkins"},"Paso 3: Configurar Jenkins"),(0,i.kt)("p",null,"Primero, necesitamos instalar ",(0,i.kt)("a",{parentName:"p",href:"https://plugins.jenkins.io/oic-auth/"},"Autenticaci\xf3n OpenId Connect")," ya que Jenkins no soporta OIDC de forma nativa."),(0,i.kt)("p",null,"Despu\xe9s de la instalaci\xf3n, ve a ",(0,i.kt)("strong",{parentName:"p"},"Administrar Jenkins")," -> ",(0,i.kt)("strong",{parentName:"p"},"Configurar Seguridad Global"),". ",(0,i.kt)("img",{alt:"seguridad global de jenkins",src:a(4289).Z,width:"1902",height:"876"})),(0,i.kt)("admonition",{type:"tip"},(0,i.kt)("p",{parentName:"admonition"},"Aseg\xfarate de hacer una copia de seguridad del archivo ",(0,i.kt)("inlineCode",{parentName:"p"},"config.xml")," de Jenkins para recuperarlo en caso de errores de configuraci\xf3n.")),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"En Control de Acceso, selecciona ",(0,i.kt)("inlineCode",{parentName:"p"},"Login with Openid Connect")," como el ",(0,i.kt)("strong",{parentName:"p"},"Reino de Seguridad"),".")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Especifica el ",(0,i.kt)("inlineCode",{parentName:"p"},"Client ID")," anotado arriba en el campo ",(0,i.kt)("strong",{parentName:"p"},"Client ID"),".")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Especifica el ",(0,i.kt)("inlineCode",{parentName:"p"},"Client secret")," anotado arriba en el campo ",(0,i.kt)("strong",{parentName:"p"},"Client secret"),".")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"En el modo de Configuraci\xf3n, selecciona ",(0,i.kt)("inlineCode",{parentName:"p"},"Configuraci\xf3n autom\xe1tica")," e introduce ",(0,i.kt)("strong",{parentName:"p"},"http://",(0,i.kt)("inlineCode",{parentName:"strong"},"CASDOOR_HOSTNAME"),"/.well-known/openid-configuration")," como el punto final de configuraci\xf3n conocido. ",(0,i.kt)("img",{alt:"Configuraci\xf3n de Jenkins",src:a(2498).Z,width:"1410",height:"631"})),(0,i.kt)("p",{parentName:"li"},"Si tu Casdoor est\xe1 desplegado localmente, es posible que necesites seleccionar ",(0,i.kt)("inlineCode",{parentName:"p"},"Configuraci\xf3n manual")," y proporcionar la siguiente informaci\xf3n:"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"URL del servidor de tokens: ",(0,i.kt)("strong",{parentName:"li"},"http://",(0,i.kt)("inlineCode",{parentName:"strong"},"CASDOOR_HOSTNAME"),"/api/login/oauth/access_token")),(0,i.kt)("li",{parentName:"ul"},"URL del servidor de autorizaci\xf3n: ",(0,i.kt)("strong",{parentName:"li"},"http://",(0,i.kt)("inlineCode",{parentName:"strong"},"CASDOOR_HOSTNAME"),"/login/oauth/authorize")),(0,i.kt)("li",{parentName:"ul"},"URL del servidor UserInfo: ",(0,i.kt)("strong",{parentName:"li"},"http://",(0,i.kt)("inlineCode",{parentName:"strong"},"CASDOOR_HOSTNAME"),"/api/get-account")),(0,i.kt)("li",{parentName:"ul"},"Alcances: ",(0,i.kt)("inlineCode",{parentName:"li"},"address phone openid profile offline_access email")," ",(0,i.kt)("img",{alt:"Configuraci\xf3n manual",src:a(38517).Z,width:"1361",height:"548"})))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Haz clic en ",(0,i.kt)("strong",{parentName:"p"},"Configuraci\xf3n avanzada")," y completa lo siguiente:"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"En el campo de Nombre de usuario, especifica ",(0,i.kt)("inlineCode",{parentName:"li"},"name"),"."),(0,i.kt)("li",{parentName:"ul"},"En el campo de Nombre completo, especifica ",(0,i.kt)("inlineCode",{parentName:"li"},"displayName"),"."),(0,i.kt)("li",{parentName:"ul"},"En el campo de Email, especifica ",(0,i.kt)("inlineCode",{parentName:"li"},"email"),".")),(0,i.kt)("p",{parentName:"li"},(0,i.kt)("img",{alt:"Configuraci\xf3n del Campo Userinfo",src:a(80215).Z,width:"1550",height:"613"}))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"En la secci\xf3n ",(0,i.kt)("strong",{parentName:"p"},"Autorizaci\xf3n"),", habilita \u201cLos usuarios registrados pueden hacer cualquier cosa\u201d y deshabilita \u201cPermitir acceso de lectura an\xf3nimo\u201d. Puedes configurar una autorizaci\xf3n m\xe1s compleja m\xe1s tarde, pero por ahora, verifica si OpenID funciona correctamente."),(0,i.kt)("p",{parentName:"li"},"Cierra sesi\xf3n en Jenkins, y deber\xeda redirigirte a Casdoor para autenticaci\xf3n.",(0,i.kt)("img",{alt:"P\xe1gina de Inicio de Sesi\xf3n de Jenkins",src:a(2845).Z,width:"1383",height:"769"})))))}d.isMDXComponent=!0},66496:(e,n,a)=>{a.d(n,{Z:()=>t});const t=a.p+"assets/images/casdoor_origin-8f5d9e44f6b58828ce69e6e6d896e122.png"},9871:(e,n,a)=>{a.d(n,{Z:()=>t});const t=a.p+"assets/images/appseeting_jenkins-6e0a2968614d0735005951278f44c008.png"},2498:(e,n,a)=>{a.d(n,{Z:()=>t});const t=a.p+"assets/images/jenkins_auto-acde42e269bf8ed09bf57320d1eecdc0.png"},80215:(e,n,a)=>{a.d(n,{Z:()=>t});const t=a.p+"assets/images/jenkins_field-31b28e80dce83b780c934c68648ed0e1.png"},4289:(e,n,a)=>{a.d(n,{Z:()=>t});const t=a.p+"assets/images/jenkins_global_security-0f4feee9caf8c58579f9275e1f281333.png"},2845:(e,n,a)=>{a.d(n,{Z:()=>t});const t=a.p+"assets/images/jenkins_login-d7c2179fcdc73e29ca6b90c494cba55b.png"},38517:(e,n,a)=>{a.d(n,{Z:()=>t});const t=a.p+"assets/images/jenkins_manual-e28d6e6af536025049ea2a3a22f38eb3.png"},25742:(e,n,a)=>{a.d(n,{Z:()=>t});const t=a.p+"assets/images/jenkins_url-9e8f261138a88501bdfce79ee1c1f3fa.png"}}]);