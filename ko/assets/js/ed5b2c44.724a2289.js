(self.webpackChunkcasdoor_website=self.webpackChunkcasdoor_website||[]).push([[221],{3905:function(e,t,a){"use strict";a.d(t,{Zo:function(){return l},kt:function(){return m}});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var d=n.createContext({}),p=function(e){var t=n.useContext(d),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},l=function(e){var t=p(e.components);return n.createElement(d.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,d=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),u=p(a),m=r,k=u["".concat(d,".").concat(m)]||u[m]||c[m]||o;return a?n.createElement(k,i(i({ref:t},l),{},{components:a})):n.createElement(k,i({ref:t},l))}));function m(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,i=new Array(o);i[0]=u;var s={};for(var d in t)hasOwnProperty.call(t,d)&&(s[d]=t[d]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var p=2;p<o;p++)i[p]=a[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},5372:function(e,t,a){"use strict";a.r(t),a.d(t,{frontMatter:function(){return s},contentTitle:function(){return d},metadata:function(){return p},toc:function(){return l},default:function(){return u}});var n=a(4034),r=a(9973),o=(a(7294),a(3905)),i=["components"],s={sidebar_position:3,title:"Frontend & Backend SDK Setup"},d=void 0,p={unversionedId:"basic/SDKs",id:"basic/SDKs",isDocsHomePage:!1,title:"Frontend & Backend SDK Setup",description:"Introduction",source:"@site/i18n/ko/docusaurus-plugin-content-docs/current/basic/SDKs.md",sourceDirName:"basic",slug:"/basic/SDKs",permalink:"/ko/docs/basic/SDKs",editUrl:"https://github.com/casdoor/casdoor-website/tree/master/docs/basic/SDKs.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3,title:"Frontend & Backend SDK Setup"},sidebar:"tutorialSidebar",previous:{title:"Casdoor Public API",permalink:"/ko/docs/basic/public-api"},next:{title:"Frontend",permalink:"/ko/docs/developer-guide/frontend"}},l=[{value:"Introduction",id:"introduction",children:[],level:2}],c={toc:l};function u(e){var t=e.components,a=(0,r.Z)(e,i);return(0,o.kt)("wrapper",(0,n.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"introduction"},"Introduction"),(0,o.kt)("p",null,"As Service Provider (SP), Casdoor supports two authentication protocols:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"OAuth 2.0 (OIDC)")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"SAML"))),(0,o.kt)("p",null,"As Identity Provider (IdP), Casdoor supports one authentication protocol:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"OAuth 2.0 (OIDC)"))),(0,o.kt)("p",null,"When your application uses Casdoor as Identity Provider, they are connected via OIDC. Casdoor fulfills the OIDC standard completely. As an application developer, you can always use a standard OIDC client library for your language to connect to Casdoor. However, we also provide a series of Casdoor SDKs for popular languages to simplify the OIDC interaction and provide easy-to-use wrappers for ",(0,o.kt)("inlineCode",{parentName:"p"},"Casdoor Public API"),"."),(0,o.kt)("p",null,"To use Casdoor, you need to integrate both the frontend SDK and the backend SDK. Casdoor supports providing authentication for both web and mobile applications."),(0,o.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"If your web application is developed in a frontend and backend separated manner, then you can use the Javascript SDK: ",(0,o.kt)("inlineCode",{parentName:"h5"},"casdoor-js-sdk")," to integrate Casdoor in frontend. If your web application is a traditional website developed by JSP or PHP, you can just use the backend SDKs only. :::")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("table",{parentName:"div"},(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"Frontend SDK"),(0,o.kt)("th",{parentName:"tr",align:null},"Description"),(0,o.kt)("th",{parentName:"tr",align:null},"Source code"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"Javascript SDK"),(0,o.kt)("td",{parentName:"tr",align:null},"For web apps (websites)"),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("a",{parentName:"td",href:"https://github.com/casdoor/casdoor-js-sdk"},"https://github.com/casdoor/casdoor-js-sdk"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"Android SDK"),(0,o.kt)("td",{parentName:"tr",align:null},"For Android apps"),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("a",{parentName:"td",href:"https://github.com/casdoor/casdoor-android-sdk"},"https://github.com/casdoor/casdoor-android-sdk"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"iOS SDK"),(0,o.kt)("td",{parentName:"tr",align:null},"For iOS apps"),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("a",{parentName:"td",href:"https://github.com/casdoor/casdoor-ios-sdk"},"https://github.com/casdoor/casdoor-ios-sdk"))))),(0,o.kt)("p",{parentName:"div"},"Next, use one of the following backend SDKs based on the language of your backend code:"),(0,o.kt)("table",{parentName:"div"},(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"Backend SDK"),(0,o.kt)("th",{parentName:"tr",align:null},"Source code"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"Go SDK"),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("a",{parentName:"td",href:"https://github.com/casdoor/casdoor-go-sdk"},"https://github.com/casdoor/casdoor-go-sdk"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"Java SDK"),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("a",{parentName:"td",href:"https://github.com/casdoor/casdoor-java-sdk"},"https://github.com/casdoor/casdoor-java-sdk"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"Node.js SDK"),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("a",{parentName:"td",href:"https://github.com/casdoor/casdoor-nodejs-sdk"},"https://github.com/casdoor/casdoor-nodejs-sdk"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"Python SDK"),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("a",{parentName:"td",href:"https://github.com/casdoor/casdoor-python-sdk"},"https://github.com/casdoor/casdoor-python-sdk"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"PHP SDK"),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("a",{parentName:"td",href:"https://github.com/casdoor/casdoor-php-sdk"},"https://github.com/casdoor/casdoor-php-sdk"))))),(0,o.kt)("p",{parentName:"div"},"In this chapter we will show you how to use these SDKs, that is, the basic/general steps for using them."),(0,o.kt)("h2",{parentName:"div",id:"how-to-setup"},"How to setup"),(0,o.kt)("h3",{parentName:"div",id:"1-initialization"},"1. Initialization"),(0,o.kt)("p",{parentName:"div"},"The first step is to get in touch with the casdoor server. You need to provide the address of the casdoor server, the credential ClientId and ClientSecret of the application, the jwt secret, and the name of the organization where the application is located, which are all string type."),(0,o.kt)("p",{parentName:"div"},"Roughly like this:"),(0,o.kt)("table",{parentName:"div"},(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"Name (in order)"),(0,o.kt)("th",{parentName:"tr",align:null},"Must"),(0,o.kt)("th",{parentName:"tr",align:null},"Description"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"endpoint"),(0,o.kt)("td",{parentName:"tr",align:null},"Yes"),(0,o.kt)("td",{parentName:"tr",align:null},"Casdoor Server Url, such as ",(0,o.kt)("inlineCode",{parentName:"td"},"http://localhost:8000"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"clientId"),(0,o.kt)("td",{parentName:"tr",align:null},"Yes"),(0,o.kt)("td",{parentName:"tr",align:null},"Application.client_id")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"clientSecret"),(0,o.kt)("td",{parentName:"tr",align:null},"Yes"),(0,o.kt)("td",{parentName:"tr",align:null},"Application.client_secret")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"jwtSecret"),(0,o.kt)("td",{parentName:"tr",align:null},"Yes"),(0,o.kt)("td",{parentName:"tr",align:null},"Read from token_jwt_key.pem file")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"organizationName"),(0,o.kt)("td",{parentName:"tr",align:null},"Yes"),(0,o.kt)("td",{parentName:"tr",align:null},"Application.organization")))),(0,o.kt)("p",{parentName:"div"},"The function signature in Go is as follows, similar to other languages:"),(0,o.kt)("pre",{parentName:"div"},(0,o.kt)("code",{parentName:"pre",className:"language-go"},"func InitConfig(endpoint string, clientId string, clientSecret string, jwtSecret string, organizationName string)\n")),(0,o.kt)("p",{parentName:"div"},"You can refer to the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/casbin/casnode/blob/master/controllers/account.go#L32"},"usage in Casnode"),","),(0,o.kt)("pre",{parentName:"div"},(0,o.kt)("code",{parentName:"pre",className:"language-go"},'var CasdoorEndpoint = "http://localhost:8000"\nvar ClientId = "541738959670d221d59d"\nvar ClientSecret = "66863369a64a5863827cf949bab70ed560ba24bf"\nvar JwtSecret = "CasdoorSecret"\nvar CasdoorOrganization = "casbin-forum"\n\nfunc init() {\n    auth.InitConfig(CasdoorEndpoint, ClientId, ClientSecret, JwtSecret, CasdoorOrganization)\n}\n')),(0,o.kt)("p",{parentName:"div"},"More specific behavior can refer to ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/casdoor/casdoor-go-sdk"},"the source codes of casdoor-go-sdk"),"."),(0,o.kt)("h3",{parentName:"div",id:"2-sdk-access-casdoor"},"2. SDK access Casdoor"),(0,o.kt)("p",{parentName:"div"},"With previous configured ",(0,o.kt)("inlineCode",{parentName:"p"},"authConfig"),", Casdoor SDK now can turn to casdoor server to verify users, note that SDK uses ",(0,o.kt)("inlineCode",{parentName:"p"},"SetBasicAuth")," method in net/http library to get ",(0,o.kt)("inlineCode",{parentName:"p"},"ClientId")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"ClientSecret")," from Casdoor server and verify users in your application."),(0,o.kt)("p",{parentName:"div"},"More details please refer to ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/casdoor/casdoor-go-sdk/blob/master/auth/base.go#L42"},"https://github.com/casdoor/casdoor-go-sdk/blob/master/auth/base.go#L42")),(0,o.kt)("h3",{parentName:"div",id:"3-get-token-and-parse"},"3. Get token and parse"),(0,o.kt)("p",{parentName:"div"},"After casdoor verification passed, it will be redirected to your application with code and state, like ",(0,o.kt)("inlineCode",{parentName:"p"},"http://forum.casbin.org?code=xxx&state=yyyy"),"."),(0,o.kt)("p",{parentName:"div"},"Your web application can get the ",(0,o.kt)("inlineCode",{parentName:"p"},"code"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"state")," and call ",(0,o.kt)("inlineCode",{parentName:"p"},"GetOAuthToken(code, state)"),", then parse out jwt token."),(0,o.kt)("p",{parentName:"div"},"See ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/casbin/casnode/blob/master/controllers/auth.go#L36"},"Usage in Casnode")," as a reference:"),(0,o.kt)("pre",{parentName:"div"},(0,o.kt)("code",{parentName:"pre",className:"language-go"},'code := c.Input().Get("code")\nstate := c.Input().Get("state")\n\ntoken, err := auth.GetOAuthToken(code, state)\nif err != nil {\n    panic(err)\n}\n\nclaims, err := auth.ParseJwtToken(token.AccessToken)\nif err != nil {\n    panic(err)\n}\n')),(0,o.kt)("h3",{parentName:"div",id:"4-set-session-in-your-app"},"4. Set Session in your app"),(0,o.kt)("p",{parentName:"div"},"You need to verify the information parsed from the third step. After it is correct (it may be modified), it proves that the user verification has passed, and you can set up the session in your own application."),(0,o.kt)("p",{parentName:"div"},(0,o.kt)("strong",{parentName:"p"},"At this point, the user login is actually completed"),"."),(0,o.kt)("p",{parentName:"div"},"The Method to set session varies greatly depending on the languages and frameworks, casnode uses the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/beego/beego/"},"beego framework")," and set session by encapsulation method ",(0,o.kt)("inlineCode",{parentName:"p"},"c.SetSessionUser()")," , ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/casbin/casnode/blob/master/controllers/base.go#L44"},"source code"),"."),(0,o.kt)("p",{parentName:"div"},(0,o.kt)("a",{parentName:"p",href:"https://github.com/casbin/casnode/blob/master/controllers/auth.go#L47"},"Usage in Casnode"),","),(0,o.kt)("pre",{parentName:"div"},(0,o.kt)("code",{parentName:"pre",className:"language-go"},"token, err := auth.GetOAuthToken(code, state)\nif err != nil {\n    panic(err)\n}\n\nclaims, err := auth.ParseJwtToken(token.AccessToken)\nif err != nil {\n    panic(err)\n}\n\nclaims.AccessToken = token.AccessToken\nc.SetSessionUser(claims)                // see here\n")),(0,o.kt)("p",{parentName:"div"},"That's it!"),(0,o.kt)("h3",{parentName:"div",id:"5-interact-with-the-users-table"},"5. Interact with the users table"),(0,o.kt)("p",{parentName:"div"},"You may not only need to log in, but you will also get user details, or update users information, etc."),(0,o.kt)("p",{parentName:"div"},"The SDK provides several key functions, and you need to customize them in more detail, or report an issue!"),(0,o.kt)("ul",{parentName:"div"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"GetUser(name string)"),", get one user by user name."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"GetUsers()"),", get all users."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"UpdateUser(auth.User)/AddUser(auth.User)/DeleteUser(auth.User)"),", write user to database."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"CheckUserPassword(auth.User)"),", check user's password.")))))}u.isMDXComponent=!0}}]);