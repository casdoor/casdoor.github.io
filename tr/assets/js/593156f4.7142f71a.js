"use strict";(self.webpackChunkcasdoor_website=self.webpackChunkcasdoor_website||[]).push([[8038],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>k});var o=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=o.createContext({}),p=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},d=function(e){var t=p(e.components);return o.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},c=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),c=p(n),k=a,m=c["".concat(s,".").concat(k)]||c[k]||u[k]||i;return n?o.createElement(m,r(r({ref:t},d),{},{components:n})):o.createElement(m,r({ref:t},d))}));function k(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,r=new Array(i);r[0]=c;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,r[1]=l;for(var p=2;p<i;p++)r[p]=n[p];return o.createElement.apply(null,r)}return o.createElement.apply(null,n)}c.displayName="MDXCreateElement"},83334:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>r,default:()=>u,frontMatter:()=>i,metadata:()=>l,toc:()=>p});var o=n(87462),a=(n(67294),n(3905));const i={title:"Webhooks Overview",description:"Configuring Webhooks in Casdoor",authors:["huang-yilong"],keywords:["webhook","event-driven","API","integration"]},r=void 0,l={unversionedId:"webhooks/overview",id:"webhooks/overview",title:"Webhooks Overview",description:"Configuring Webhooks in Casdoor",source:"@site/docs/webhooks/overview.md",sourceDirName:"webhooks",slug:"/webhooks/overview",permalink:"/tr/docs/webhooks/overview",draft:!1,editUrl:"https://github.com/casdoor/casdoor-website/edit/master/docs/webhooks/overview.md",tags:[],version:"current",frontMatter:{title:"Webhooks Overview",description:"Configuring Webhooks in Casdoor",authors:["huang-yilong"],keywords:["webhook","event-driven","API","integration"]},sidebar:"tutorialSidebar",previous:{title:"Webhooks",permalink:"/tr/docs/category/webhooks"},next:{title:"LDAP",permalink:"/tr/docs/category/ldap"}},s={},p=[{value:"Overview",id:"overview",level:2},{value:"How Webhooks Work",id:"how-webhooks-work",level:2},{value:"Supported Events",id:"supported-events",level:3},{value:"Authentication &amp; Session Events",id:"authentication--session-events",level:4},{value:"Resource Management Events",id:"resource-management-events",level:4},{value:"Specialized Operations",id:"specialized-operations",level:4},{value:"Setting Up a Webhook",id:"setting-up-a-webhook",level:2},{value:"Filtering Webhook Payloads",id:"filtering-webhook-payloads",level:2},{value:"Example Webhook Payload",id:"example-webhook-payload",level:2},{value:"Testing Your Webhook",id:"testing-your-webhook",level:2},{value:"Example Test with Beeceptor",id:"example-test-with-beeceptor",level:3},{value:"Handling Webhooks in Your Application",id:"handling-webhooks-in-your-application",level:2},{value:"Conclusion",id:"conclusion",level:2}],d={toc:p};function u(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,o.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"overview"},"Overview"),(0,a.kt)("p",null,"Casdoor provides an event-driven system that allows you to integrate with external applications using webhooks. Webhooks enable real-time communication by sending HTTP ",(0,a.kt)("inlineCode",{parentName:"p"},"POST")," requests with a JSON payload to a configured endpoint whenever a specified event occurs. This allows your application to react to Casdoor events such as user sign-ups, logins, logouts, and profile updates."),(0,a.kt)("h2",{id:"how-webhooks-work"},"How Webhooks Work"),(0,a.kt)("p",null,"When an event is triggered in Casdoor:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Casdoor sends a ",(0,a.kt)("inlineCode",{parentName:"li"},"POST")," request to the specified webhook URL."),(0,a.kt)("li",{parentName:"ol"},"The request contains a JSON payload with event details."),(0,a.kt)("li",{parentName:"ol"},"Your application processes the payload and executes relevant actions based on the event type.")),(0,a.kt)("h3",{id:"supported-events"},"Supported Events"),(0,a.kt)("p",null,"Casdoor webhooks support a comprehensive range of events across authentication, resource management, and system operations. Events are categorized by their functional area:"),(0,a.kt)("h4",{id:"authentication--session-events"},"Authentication & Session Events"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"signup"),", ",(0,a.kt)("inlineCode",{parentName:"li"},"login"),", ",(0,a.kt)("inlineCode",{parentName:"li"},"logout")," - User authentication flows"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"sso-logout"),", ",(0,a.kt)("inlineCode",{parentName:"li"},"unlink")," - Single sign-on and account unlinking"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"new-user")," - Custom event for new user creation")),(0,a.kt)("h4",{id:"resource-management-events"},"Resource Management Events"),(0,a.kt)("p",null,"Standard CRUD operations (",(0,a.kt)("inlineCode",{parentName:"p"},"add-*"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"update-*"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"delete-*"),") are available for all core resources including organizations, groups, users, applications, providers, and certificates. Additional resources like roles, permissions, models, adapters, enforcers, sessions, tokens, products, payments, and pricing also support these operations. Webhooks can track changes to syncers, forms, invitations, LDAP configurations, orders, tickets, and transactions as well."),(0,a.kt)("h4",{id:"specialized-operations"},"Specialized Operations"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"User Management:")," ",(0,a.kt)("inlineCode",{parentName:"p"},"add-user-keys"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"remove-user-from-group"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"upload-users"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"check-user-password"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"set-password"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"reset-email-or-phone"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"verify-identification")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Bulk Operations:")," ",(0,a.kt)("inlineCode",{parentName:"p"},"upload-groups"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"upload-roles"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"upload-permissions"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"upload-resource")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Order Processing:")," ",(0,a.kt)("inlineCode",{parentName:"p"},"place-order"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"cancel-order"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"pay-order")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Payment Handling:")," ",(0,a.kt)("inlineCode",{parentName:"p"},"invoice-payment"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"notify-payment")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Invitations:")," ",(0,a.kt)("inlineCode",{parentName:"p"},"send-invitation"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"verify-invitation")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Support Systems:")," ",(0,a.kt)("inlineCode",{parentName:"p"},"add-ticket-message")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Synchronization:")," ",(0,a.kt)("inlineCode",{parentName:"p"},"run-syncer"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"test-syncer-db"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"sync-ldap-users")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Access Control:")," ",(0,a.kt)("inlineCode",{parentName:"p"},"enforce"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"batch-enforce"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"add-policy"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"update-policy"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"remove-policy"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"add-record")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Multi-Factor Authentication:")," ",(0,a.kt)("inlineCode",{parentName:"p"},"delete-mfa"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"set-preferred-mfa"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"mfa/setup/initiate"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"mfa/setup/verify"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"mfa/setup/enable")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"WebAuthn:")," ",(0,a.kt)("inlineCode",{parentName:"p"},"webauthn/signup/begin"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"webauthn/signup/finish"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"webauthn/signin/begin"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"webauthn/signin/finish")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"OAuth & Token Management:")," ",(0,a.kt)("inlineCode",{parentName:"p"},"login/oauth/access_token"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"login/oauth/refresh_token"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"login/oauth/introspect")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Verification & Communication:")," ",(0,a.kt)("inlineCode",{parentName:"p"},"send-verification-code"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"verify-code"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"verify-captcha"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"send-email"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"send-sms"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"send-notification")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"SAML:")," ",(0,a.kt)("inlineCode",{parentName:"p"},"acs"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"saml/metadata")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"System Operations:")," ",(0,a.kt)("inlineCode",{parentName:"p"},"run-casbin-command"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"refresh-engines"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"health"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"metrics"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"callback"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"device-auth"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"faceid-signin-begin"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"user"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"userinfo")),(0,a.kt)("p",null,"Each event includes contextual information in the webhook payload, allowing you to implement custom logic based on the specific action that triggered the webhook."),(0,a.kt)("h2",{id:"setting-up-a-webhook"},"Setting Up a Webhook"),(0,a.kt)("p",null,"To configure a webhook in Casdoor:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"Navigate to the Casdoor Webhooks Section:")),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"Open your Casdoor instance."),(0,a.kt)("li",{parentName:"ul"},"Go to ",(0,a.kt)("strong",{parentName:"li"},"Settings")," > ",(0,a.kt)("strong",{parentName:"li"},"Webhooks"),"."))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"Create a New Webhook:")),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"Click on ",(0,a.kt)("strong",{parentName:"li"},"Add Webhook"),"."),(0,a.kt)("li",{parentName:"ul"},"Enter the ",(0,a.kt)("strong",{parentName:"li"},"Webhook URL")," where Casdoor should send event data."),(0,a.kt)("li",{parentName:"ul"},"Select one or more events from the comprehensive list of available triggers."),(0,a.kt)("li",{parentName:"ul"},"(Optional) Add custom headers for authentication or additional context."))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"Save the Webhook Configuration:")),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"Once saved, Casdoor will start sending event notifications to the specified endpoint.")))),(0,a.kt)("h2",{id:"filtering-webhook-payloads"},"Filtering Webhook Payloads"),(0,a.kt)("p",null,"When working with webhooks, you might not always need the complete record data. Casdoor allows you to filter the payload by configuring ",(0,a.kt)("strong",{parentName:"p"},"ObjectFields")," for each webhook. This feature is particularly valuable when you have privacy concerns, bandwidth constraints, or when your endpoint only processes specific fields."),(0,a.kt)("p",null,'The ObjectFields configuration accepts either "All" to receive the complete record, or a list of specific field names you want to include. When you specify field names, Casdoor will send only those fields in the webhook payload, reducing payload size and exposing only the data your application needs.'),(0,a.kt)("p",null,"If you configure multiple webhooks with different ObjectFields settings, each webhook operates independently. For example, one webhook might receive only user IDs and timestamps, while another receives full user profiles. Casdoor ensures that the filtering applied to one webhook doesn't affect the data sent to others, even when they're triggered by the same event."),(0,a.kt)("h2",{id:"example-webhook-payload"},"Example Webhook Payload"),(0,a.kt)("p",null,"Here\u2019s an example of a JSON payload sent to your webhook when a user logs in:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "event": "login",\n  "timestamp": 1709452800,\n  "user": {\n    "id": "12345",\n    "username": "johndoe",\n    "email": "johndoe@example.com"\n  }\n}\n')),(0,a.kt)("p",null,"Your application should parse this payload and perform necessary actions, such as logging the event or notifying another service."),(0,a.kt)("h2",{id:"testing-your-webhook"},"Testing Your Webhook"),(0,a.kt)("p",null,"Before deploying your webhook integration, you can test it using tools like:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("a",{parentName:"strong",href:"https://beeceptor.com/"},"Beeceptor"))," \u2013 Allows you to create a custom webhook URL and inspect incoming requests."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("a",{parentName:"strong",href:"https://webhook.site/"},"Webhook.site"))," \u2013 Provides an instant webhook endpoint for testing.")),(0,a.kt)("h3",{id:"example-test-with-beeceptor"},"Example Test with Beeceptor"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Visit ",(0,a.kt)("a",{parentName:"li",href:"https://beeceptor.com/"},"Beeceptor")," and create a new endpoint."),(0,a.kt)("li",{parentName:"ol"},"Copy the generated webhook URL and configure it in Casdoor."),(0,a.kt)("li",{parentName:"ol"},"Trigger a test event (e.g., log in to Casdoor)."),(0,a.kt)("li",{parentName:"ol"},"Check Beeceptor\u2019s dashboard to inspect the received request.")),(0,a.kt)("h2",{id:"handling-webhooks-in-your-application"},"Handling Webhooks in Your Application"),(0,a.kt)("p",null,"Your server should be able to process incoming webhook requests. Below is a simple example in Node.js:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},"const express = require('express');\nconst app = express();\n\napp.use(express.json());\n\napp.post('/webhook', (req, res) => {\n  console.log('Received webhook:', req.body);\n  res.status(200).send('Webhook received');\n});\n\napp.listen(3000, () => console.log('Server running on port 3000'));\n")),(0,a.kt)("h2",{id:"conclusion"},"Conclusion"),(0,a.kt)("p",null,"Casdoor webhooks provide a powerful way to integrate with external applications by enabling event-driven interactions. Whether you need to sync user data, trigger notifications, or update external systems, webhooks allow seamless automation."),(0,a.kt)("p",null,"To ensure a smooth integration, always validate incoming requests and test your webhooks with tools like Beeceptor or Webhook.site before deploying them in production."))}u.isMDXComponent=!0}}]);