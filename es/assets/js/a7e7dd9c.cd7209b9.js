"use strict";(self.webpackChunkcasdoor_website=self.webpackChunkcasdoor_website||[]).push([[5364],{3905:(e,a,t)=>{t.d(a,{Zo:()=>c,kt:()=>m});var n=t(67294);function r(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function o(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function i(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?o(Object(t),!0).forEach((function(a){r(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function l(e,a){if(null==e)return{};var t,n,r=function(e,a){if(null==e)return{};var t,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)t=o[n],a.indexOf(t)>=0||(r[t]=e[t]);return r}(e,a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)t=o[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var s=n.createContext({}),p=function(e){var a=n.useContext(s),t=a;return e&&(t="function"==typeof e?e(a):i(i({},a),e)),t},c=function(e){var a=p(e.components);return n.createElement(s.Provider,{value:a},e.children)},d={inlineCode:"code",wrapper:function(e){var a=e.children;return n.createElement(n.Fragment,{},a)}},u=n.forwardRef((function(e,a){var t=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),u=p(t),m=r,g=u["".concat(s,".").concat(m)]||u[m]||d[m]||o;return t?n.createElement(g,i(i({ref:a},c),{},{components:t})):n.createElement(g,i({ref:a},c))}));function m(e,a){var t=arguments,r=a&&a.mdxType;if("string"==typeof e||r){var o=t.length,i=new Array(o);i[0]=u;var l={};for(var s in a)hasOwnProperty.call(a,s)&&(l[s]=a[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var p=2;p<o;p++)i[p]=t[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,t)}u.displayName="MDXCreateElement"},96455:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>s,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>l,toc:()=>p});var n=t(87462),r=(t(67294),t(3905));const o={title:"Nginx",description:"Usando Casdoor con Nginx",keywords:["nginx","plus","nginx-plus"],authors:["SkipperQ"]},i=void 0,l={unversionedId:"integration/C++/Nginx",id:"integration/C++/Nginx",title:"Nginx",description:"Usando Casdoor con Nginx",source:"@site/i18n/es/docusaurus-plugin-content-docs/current/integration/C++/Nginx.md",sourceDirName:"integration/C++",slug:"/integration/C++/Nginx",permalink:"/es/docs/integration/C++/Nginx",draft:!1,editUrl:"https://github.com/casdoor/casdoor-website/edit/master/docs/integration/C++/Nginx.md",tags:[],version:"current",frontMatter:{title:"Nginx",description:"Usando Casdoor con Nginx",keywords:["nginx","plus","nginx-plus"],authors:["SkipperQ"]},sidebar:"tutorialSidebar",previous:{title:"C++",permalink:"/es/docs/category/cpp"},next:{title:"NginxCommunityVersion",permalink:"/es/docs/integration/C++/NginxCommunityVersion"}},s={},p=[{value:"Prerrequisitos",id:"prerrequisitos",level:2},{value:"Configurando Casdoor",id:"configurando-casdoor",level:2},{value:"Configurando NGINX Plus",id:"configurando-nginx-plus",level:2},{value:"Pruebas",id:"pruebas",level:2},{value:"Resoluci\xf3n de problemas",id:"resoluci\xf3n-de-problemas",level:2}],c={toc:p};function d(e){let{components:a,...o}=e;return(0,r.kt)("wrapper",(0,n.Z)({},c,o,{components:a,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Habilitar el inicio de sesi\xf3n \xfanico basado en OpenID Connect para aplicaciones proxy por NGINX Plus usando Casdoor como proveedor de identidad (IdP)."),(0,r.kt)("p",null,"Esta gu\xeda explica c\xf3mo habilitar el inicio de sesi\xf3n \xfanico (SSO) para aplicaciones que est\xe1n siendo proxy por NGINX Plus. La soluci\xf3n utiliza OpenID Connect como mecanismo de autenticaci\xf3n, con ",(0,r.kt)("a",{parentName:"p",href:"https://casdoor.org/"},"Casdoor")," como proveedor de identidad (IdP) y NGINX Plus como la parte confiante."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Ver Tambi\xe9n: Puede encontrar m\xe1s informaci\xf3n sobre la integraci\xf3n de NGINX Plus OpenID Connect en el repositorio de GitHub del proyecto.")),(0,r.kt)("h2",{id:"prerrequisitos"},"Prerrequisitos"),(0,r.kt)("p",null,"Las instrucciones asumen que usted tiene lo siguiente:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Un servidor Casdoor en funcionamiento. Consulte la documentaci\xf3n de Casdoor para ",(0,r.kt)("a",{parentName:"p",href:"https://casdoor.org/docs/basic/server-installation"},"Instalaci\xf3n del Servidor")," y ",(0,r.kt)("a",{parentName:"p",href:"https://casdoor.org/docs/basic/try-with-docker"},"Pruebe con Docker"),".")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Una suscripci\xf3n a NGINX Plus y NGINX Plus R15 o posterior. Para instrucciones de instalaci\xf3n, consulte la ",(0,r.kt)("a",{parentName:"p",href:"https://docs.nginx.com/nginx/admin-guide/installing-nginx/installing-nginx-plus/"},"Gu\xeda del Administrador de NGINX Plus"),".")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"El ",(0,r.kt)("a",{parentName:"p",href:"https://www.nginx.com/blog/introduction-nginscript/"},"m\xf3dulo JavaScript de NGINX"),", que es necesario para manejar la interacci\xf3n entre NGINX Plus y el IdP. Despu\xe9s de instalar NGINX Plus, instale el m\xf3dulo utilizando el comando apropiado para su sistema operativo."),(0,r.kt)("p",{parentName:"li"},"  Para Debian y Ubuntu:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"sudo apt install nginx-plus-module-njs\n")),(0,r.kt)("p",{parentName:"li"},"  Para CentOS, RHEL y Oracle Linux:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"sudo yum install nginx-plus-module-njs\n"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},'La siguiente directiva debe incluirse en el contexto de configuraci\xf3n de nivel superior ("main") en ',(0,r.kt)("strong",{parentName:"p"},"/etc/nginx/nginx.conf")," para cargar el m\xf3dulo JavaScript de NGINX:"),(0,r.kt)("p",{parentName:"li"},"  ",(0,r.kt)("inlineCode",{parentName:"p"},"load_module modules/ngx_http_js_module.so;")))),(0,r.kt)("h2",{id:"configurando-casdoor"},"Configurando Casdoor"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Nota:")," El siguiente procedimiento refleja la GUI de Casdoor en el momento de la publicaci\xf3n, pero la GUI est\xe1 sujeta a cambios. Utilice esta gu\xeda como referencia y ad\xe1ptela a la GUI actual de Casdoor seg\xfan sea necesario."),(0,r.kt)("p",null,"Para crear un cliente Casdoor para NGINX Plus en la GUI de Casdoor, siga estos pasos:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Inicie sesi\xf3n en su cuenta de Casdoor en ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"http://your-casdoor-url.com/login/"},"http://your-casdoor-url.com/login/")),".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"En la columna de navegaci\xf3n superior, haga clic en ",(0,r.kt)("strong",{parentName:"p"},"Aplicaci\xf3n"),". En la p\xe1gina ",(0,r.kt)("strong",{parentName:"p"},"Aplicaci\xf3n")," que se abre, haga clic en el bot\xf3n ",(0,r.kt)("strong",{parentName:"p"},"A\xf1adir")," en la esquina superior izquierda."),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{alt:"addApp",src:t(38655).Z,width:"1974",height:"228"}))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"En la p\xe1gina ",(0,r.kt)("strong",{parentName:"p"},"Editar Aplicaci\xf3n")," que se abre, cambie el valor en los campos ",(0,r.kt)("strong",{parentName:"p"},"Nombre")," y ",(0,r.kt)("strong",{parentName:"p"},"Nombre para mostrar")," al nombre de la aplicaci\xf3n para la cual est\xe1 habilitando SSO. Aqu\xed, estamos usando NGINX Plus."),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{alt:"appName",src:t(82431).Z,width:"570",height:"214"})),(0,r.kt)("p",{parentName:"li"},"En el campo ",(0,r.kt)("strong",{parentName:"p"},"URLs de Redirecci\xf3n"),", escriba la URL de la instancia de NGINX Plus incluyendo el n\xfamero de puerto, y terminando en ",(0,r.kt)("strong",{parentName:"p"},"/_codexch")," (en esta gu\xeda es ",(0,r.kt)("a",{parentName:"p",href:"https://your-site-url.com/_codexch"},"https://your-site-url.com:443/_codexch"),")."),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{alt:"redirectURL",src:t(4124).Z,width:"988",height:"252"})),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Notas:")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Para producci\xf3n, recomendamos encarecidamente que utilice SSL/TLS (puerto 443)."),(0,r.kt)("li",{parentName:"ul"},"El n\xfamero de puerto es obligatorio incluso cuando est\xe1 utilizando el puerto predeterminado para HTTP (80) o HTTPS (443)."))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Registre los valores en los campos ",(0,r.kt)("strong",{parentName:"p"},"ID de Cliente")," y ",(0,r.kt)("strong",{parentName:"p"},"Secreto de Cliente"),". Los copiar\xe1 en el archivo de configuraci\xf3n de NGINX Plus en ",(0,r.kt)("a",{parentName:"p",href:"#jump1"},"Paso 4 de ",(0,r.kt)("em",{parentName:"a"},"Configurando NGINX Plus")),".",(0,r.kt)("span",{id:"jump3"})),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{alt:"Cliente",src:t(42405).Z,width:"1004",height:"216"}))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Haga clic en ",(0,r.kt)("strong",{parentName:"p"},"Roles")," en la columna de navegaci\xf3n superior, luego haga clic en el bot\xf3n ",(0,r.kt)("strong",{parentName:"p"},"A\xf1adir")," en la esquina superior izquierda de la p\xe1gina que se abre."),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{alt:"addRole",src:t(80816).Z,width:"1986",height:"224"}))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"En la p\xe1gina ",(0,r.kt)("strong",{parentName:"p"},"A\xf1adir")," que se abre, escriba un valor en los campos ",(0,r.kt)("strong",{parentName:"p"},"Nombre")," y ",(0,r.kt)("strong",{parentName:"p"},"Nombre para mostrar")," (aqu\xed es nginx-casdoor-role) y haga clic en el bot\xf3n ",(0,r.kt)("strong",{parentName:"p"},"Guardar"),"."),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{alt:"roleName",src:t(88165).Z,width:"670",height:"204"}))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"En la columna de navegaci\xf3n superior, haga clic en ",(0,r.kt)("strong",{parentName:"p"},"Usuarios"),". En la p\xe1gina ",(0,r.kt)("strong",{parentName:"p"},"Usuarios")," que se abre, haga clic en ",(0,r.kt)("strong",{parentName:"p"},"Editar")," para editar uno de los usuarios existentes o haga clic en el bot\xf3n ",(0,r.kt)("strong",{parentName:"p"},"A\xf1adir")," en la esquina superior izquierda para crear un nuevo usuario.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"En la p\xe1gina ",(0,r.kt)("strong",{parentName:"p"},"A\xf1adir")," que se abre, modifique los campos ",(0,r.kt)("strong",{parentName:"p"},"Nombre")," y ",(0,r.kt)("strong",{parentName:"p"},"Nombre para mostrar")," como desee (aqu\xed es user1)."),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{alt:"userName",src:t(17830).Z,width:"436",height:"230"})),(0,r.kt)("p",{parentName:"li"},"Seleccione ",(0,r.kt)("strong",{parentName:"p"},"NGINX Plus")," en el campo ",(0,r.kt)("strong",{parentName:"p"},"Aplicaci\xf3n de registro"),"."),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{alt:"signupApp",src:t(30614).Z,width:"432",height:"108"})),(0,r.kt)("p",{parentName:"li"},"En el campo ",(0,r.kt)("strong",{parentName:"p"},"Cuentas administradas"),", seleccione ",(0,r.kt)("strong",{parentName:"p"},"NGINX Plus")," en ",(0,r.kt)("strong",{parentName:"p"},"Aplicaci\xf3n")," y complete el nombre de usuario y la contrase\xf1a."),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{alt:"managedAcc",src:t(15943).Z,width:"1694",height:"238"}))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Regrese a la p\xe1gina ",(0,r.kt)("strong",{parentName:"p"},"Roles")," y haga clic en ",(0,r.kt)("strong",{parentName:"p"},"Editar")," en la fila de ",(0,r.kt)("strong",{parentName:"p"},"nginx-casdoor-role"),". En la p\xe1gina que se abre, en el campo ",(0,r.kt)("strong",{parentName:"p"},"Sub usuarios"),", seleccione el nombre de usuario que acaba de crear (aqu\xed es built-in/user1)."),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{alt:"subUsers",src:t(95856).Z,width:"528",height:"106"})))),(0,r.kt)("h2",{id:"configurando-nginx-plus"},"Configurando NGINX Plus"),(0,r.kt)("p",null,"Para configurar NGINX Plus como la parte confiante de OpenID Connect, siga estos pasos:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Comience por crear un clon del repositorio de GitHub ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/nginxinc/nginx-openid-connect"},"nginx-openid-connect"),":"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"git clone https://github.com/nginxinc/nginx-openid-connect\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Copie los siguientes archivos del clon al directorio ",(0,r.kt)("strong",{parentName:"p"},"/etc/nginx/conf.d"),":"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"frontend.conf")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"openid_connect.js")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"openid_connect.server_conf")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"openid_connect_configuration.conf")))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Recupere las URL para el punto final de autorizaci\xf3n, el punto final de token y el archivo de clave web JSON (JWK) de la configuraci\xf3n de Casdoor. Abra un terminal y ejecute el siguiente comando ",(0,r.kt)("inlineCode",{parentName:"p"},"curl"),", canalizando la salida al comando ",(0,r.kt)("inlineCode",{parentName:"p"},"python")," indicado para generar un formato de configuraci\xf3n legible. Por brevedad, hemos truncado la salida para mostrar solo los campos relevantes. ",(0,r.kt)("span",{id:"jump1"})),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'curl http://<casdoor-server-address>/.well-known/openid-configuration | python -m json.tool\n{\n    "authorization_endpoint": "https://<casdoor-server-address>/login/oauth/authorize",\n    "...":"...",\n    "token_endpoint": "http://<casdoor-server-address>/api/login/oauth/access_token",\n    "...":"...",\n    "jwks_uri": "http://<casdoor-server-address>/.well-known/jwks",\n    "...":"...",\n}\n'))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Abra ",(0,r.kt)("strong",{parentName:"p"},"/etc/nginx/conf.d/openid_connect_configuration.conf"),' usando su editor de texto preferido. Modifique el valor del par\xe1metro "default" para cada una de las siguientes directivas ',(0,r.kt)("a",{parentName:"p",href:"https://nginx.org/en/docs/http/ngx_http_map_module.html#map"},"map")," con los valores especificados:",(0,r.kt)("span",{id:"jump2"})),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"map $host $oidc_authz_endpoint")," - Use el valor del ",(0,r.kt)("inlineCode",{parentName:"li"},"authorization_endpoint")," de ",(0,r.kt)("a",{parentName:"li",href:"#jump1"},"Paso 3")," (en esta gu\xeda, ",(0,r.kt)("inlineCode",{parentName:"li"},"https://<casdoor-server-address>/login/oauth/authorize"),")"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"map $host $oidc_token_endpoint")," - Use el valor del ",(0,r.kt)("inlineCode",{parentName:"li"},"token_endpoint")," de ",(0,r.kt)("a",{parentName:"li",href:"#jump1"},"Paso 3")," (en esta gu\xeda, ",(0,r.kt)("inlineCode",{parentName:"li"},"http://<casdoor-server-address>/api/login/oauth/access_token"),")"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"map $host $oidc_client")," - Use el valor en el campo ",(0,r.kt)("strong",{parentName:"li"},"ID de Cliente")," de ",(0,r.kt)("a",{parentName:"li",href:"#jump3"},"Paso 4 de ",(0,r.kt)("em",{parentName:"a"},"Configurando Casdoor"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"map $host $oidc_client_secret")," - Use el valor en el campo ",(0,r.kt)("strong",{parentName:"li"},"Secreto de Cliente")," de ",(0,r.kt)("a",{parentName:"li",href:"#jump3"},"Paso 2 de ",(0,r.kt)("em",{parentName:"a"},"Configurando Casdoor"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"map $host $oidc_hmac_key")," - Use una frase \xfanica, larga y segura"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Configure el archivo JWK basado en la versi\xf3n de NGINX Plus que est\xe1 utilizando:"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"En NGINX Plus R17 y posteriores, NGINX Plus puede leer directamente el archivo JWK desde la URL especificada como ",(0,r.kt)("inlineCode",{parentName:"li"},"jwks_uri")," en ",(0,r.kt)("a",{parentName:"li",href:"#jump2"},"Paso 3"),". Haga los siguientes cambios en ",(0,r.kt)("strong",{parentName:"li"},"/etc/nginx/conf.d/frontend.conf"),":",(0,r.kt)("ol",{parentName:"li"},(0,r.kt)("li",{parentName:"ol"},"Comente (o elimine) la directiva ",(0,r.kt)("a",{parentName:"li",href:"http://nginx.org/en/docs/http/ngx_http_auth_jwt_module.html#auth_jwt_key_file"},"auth_jwt_key_file"),"."),(0,r.kt)("li",{parentName:"ol"},"Descomente la directiva ",(0,r.kt)("a",{parentName:"li",href:"http://nginx.org/en/docs/http/ngx_http_auth_jwt_module.html#auth_jwt_key_request"},"auth_jwt_key_request"),". (El par\xe1metro ",(0,r.kt)("inlineCode",{parentName:"li"},"/_jwks_uri")," se refiere al valor de la variable ",(0,r.kt)("inlineCode",{parentName:"li"},"$oidc_jwt_keyfile"),", que se establecer\xe1 en el siguiente paso.)"),(0,r.kt)("li",{parentName:"ol"},'Actualice el par\xe1metro "default" de la directiva ',(0,r.kt)("inlineCode",{parentName:"li"},"map $host $oidc_jwt_keyfile")," al valor obtenido del campo ",(0,r.kt)("inlineCode",{parentName:"li"},"jwks_uri")," en ",(0,r.kt)("a",{parentName:"li",href:"#jump2"},"Paso 3")," (en esta gu\xeda, ",(0,r.kt)("inlineCode",{parentName:"li"},"http://<casdoor-server-address>/.well-known/jwks"),")."))),(0,r.kt)("li",{parentName:"ul"},"En NGINX Plus R16 y anteriores, o si se prefiere, el archivo JWK debe estar ubicado en el disco local. Siga estos pasos:",(0,r.kt)("ol",{parentName:"li"},(0,r.kt)("li",{parentName:"ol"},"Copie el contenido JSON del archivo JWK especificado en el campo ",(0,r.kt)("inlineCode",{parentName:"li"},"jwks_uri")," en ",(0,r.kt)("a",{parentName:"li",href:"#jump2"},"Paso 3")," (en esta gu\xeda, ",(0,r.kt)("inlineCode",{parentName:"li"},"http://<casdoor-server-address>/.well-known/jwks"),") a un archivo local (por ejemplo, ",(0,r.kt)("inlineCode",{parentName:"li"},"/etc/nginx/my_casdoor_jwk.json"),")."),(0,r.kt)("li",{parentName:"ol"},"En ",(0,r.kt)("strong",{parentName:"li"},"/etc/nginx/conf.d/openid_connect_configuration.conf"),', cambie el par\xe1metro "default" de la directiva ',(0,r.kt)("inlineCode",{parentName:"li"},"map $host $oidc_jwt_keyfile")," a la ruta del archivo local."))))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Aseg\xfarese de que el usuario especificado en la directiva ",(0,r.kt)("a",{parentName:"p",href:"http://nginx.org/en/docs/ngx_core_module.html#user"},"user")," dentro del archivo de configuraci\xf3n de NGINX Plus (generalmente ",(0,r.kt)("strong",{parentName:"p"},"/etc/nginx/nginx.conf"),") tenga permisos de lectura para el archivo JWK."))),(0,r.kt)("h2",{id:"pruebas"},"Pruebas"),(0,r.kt)("p",null,"Abra un navegador e ingrese la direcci\xf3n de su instancia de NGINX Plus. Luego, intente iniciar sesi\xf3n con las credenciales de un usuario al que se le haya asignado el rol de NGINX Plus."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"test",src:t(68185).Z,width:"734",height:"710"})),(0,r.kt)("h2",{id:"resoluci\xf3n-de-problemas"},"Resoluci\xf3n de problemas"),(0,r.kt)("p",null,"Por favor, consulte la secci\xf3n ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"https://github.com/nginxinc/nginx-openid-connect#troubleshooting"},"Resoluci\xf3n de problemas"))," en el repositorio ",(0,r.kt)("strong",{parentName:"p"},"nginx-openid-connect")," en GitHub."))}d.isMDXComponent=!0},42405:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/Client-a96b885b28b974e3594d8cc621e20d26.png"},38655:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/addApp-f0c3c3804e0f0c7c46099a967b140011.png"},80816:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/addRole-0472f1742fb90683f03e7754f6b443c9.png"},82431:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/appName-e76303a2d8f848e2cb82e8244580be67.png"},15943:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/managedAcc-2c79bf01d04970685e1db9e8800ab613.png"},4124:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/redirectURL-94f6fbadde9bd1dce2447f42ab5cd556.png"},88165:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/roleName-e4bb131db4aa1457aec6894f674c54c5.png"},30614:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/signupApp-f3444949e6ce9f7becbda49f59490a7f.png"},95856:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/subUsers-c5bcd4229c84f7b62e169783e8418a1a.png"},68185:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/test-61892faf0c0e4fbe4c43b277c0eab745.png"},17830:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/userName-0244eca3ebd618b68ad03ae9cda14dee.png"}}]);