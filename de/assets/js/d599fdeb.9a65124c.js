"use strict";(self.webpackChunkcasdoor_website=self.webpackChunkcasdoor_website||[]).push([[9310],{3905:(e,n,t)=>{t.d(n,{Zo:()=>s,kt:()=>m});var o=t(67294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,o,a=function(e,n){if(null==e)return{};var t,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)t=r[o],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)t=r[o],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var p=o.createContext({}),d=function(e){var n=o.useContext(p),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},s=function(e){var n=d(e.components);return o.createElement(p.Provider,{value:n},e.children)},c={inlineCode:"code",wrapper:function(e){var n=e.children;return o.createElement(o.Fragment,{},n)}},u=o.forwardRef((function(e,n){var t=e.components,a=e.mdxType,r=e.originalType,p=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),u=d(t),m=a,k=u["".concat(p,".").concat(m)]||u[m]||c[m]||r;return t?o.createElement(k,i(i({ref:n},s),{},{components:t})):o.createElement(k,i({ref:n},s))}));function m(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var r=t.length,i=new Array(r);i[0]=u;var l={};for(var p in n)hasOwnProperty.call(n,p)&&(l[p]=n[p]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var d=2;d<r;d++)i[d]=t[d];return o.createElement.apply(null,i)}return o.createElement.apply(null,t)}u.displayName="MDXCreateElement"},29776:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>p,contentTitle:()=>i,default:()=>c,frontMatter:()=>r,metadata:()=>l,toc:()=>d});var o=t(87462),a=(t(67294),t(3905));const r={title:"Standard OIDC Client",description:"Verwendung von OIDC-Discovery zur Migration zu Casdoor",keywords:["OIDC","discovery","client"],authors:["nomeguy"]},i=void 0,l={unversionedId:"how-to-connect/oidc-client",id:"how-to-connect/oidc-client",title:"Standard OIDC Client",description:"Verwendung von OIDC-Discovery zur Migration zu Casdoor",source:"@site/i18n/de/docusaurus-plugin-content-docs/current/how-to-connect/oidc-client.md",sourceDirName:"how-to-connect",slug:"/how-to-connect/oidc-client",permalink:"/de/docs/how-to-connect/oidc-client",draft:!1,editUrl:"https://github.com/casdoor/casdoor-website/edit/master/docs/how-to-connect/oidc-client.md",tags:[],version:"current",frontMatter:{title:"Standard OIDC Client",description:"Verwendung von OIDC-Discovery zur Migration zu Casdoor",keywords:["OIDC","discovery","client"],authors:["nomeguy"]},sidebar:"tutorialSidebar",previous:{title:"\xdcbersicht",permalink:"/de/docs/how-to-connect/overview"},next:{title:"Casdoor SDKs",permalink:"/de/docs/how-to-connect/sdk"}},p={},d=[{value:"OIDC-Discovery",id:"oidc-discovery",level:2},{value:"Global OIDC Endpoint",id:"global-oidc-endpoint",level:3},{value:"Application-Specific OIDC Endpoints",id:"application-specific-oidc-endpoints",level:3},{value:"Liste von OIDC-Client-Bibliotheken",id:"liste-von-oidc-client-bibliotheken",level:2},{value:"OIDC UserInfo-Felder",id:"oidc-userinfo-felder",level:2}],s={toc:d};function c(e){let{components:n,...t}=e;return(0,a.kt)("wrapper",(0,o.Z)({},s,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"oidc-discovery"},"OIDC-Discovery"),(0,a.kt)("p",null,"Casdoor hat das OIDC-Protokoll vollst\xe4ndig implementiert. Wenn Ihre Anwendung bereits eine Standard-OIDC-Client-Bibliothek verwendet, um sich mit einem anderen OAuth 2.0-Identit\xe4tsanbieter zu verbinden, und Sie zu Casdoor migrieren m\xf6chten, wird die Verwendung von OIDC-Discovery den Wechsel f\xfcr Sie sehr einfach machen."),(0,a.kt)("h3",{id:"global-oidc-endpoint"},"Global OIDC Endpoint"),(0,a.kt)("p",null,"Casdoor's global OIDC discovery URL is:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-url"},"<your-casdoor-backend-host>/.well-known/openid-configuration\n")),(0,a.kt)("p",null,"Zum Beispiel ist die OIDC-Discovery-URL f\xfcr die Demo-Site: ",(0,a.kt)("a",{parentName:"p",href:"https://door.casdoor.com/.well-known/openid-configuration"},"https://door.casdoor.com/.well-known/openid-configuration"),", und sie enth\xe4lt die folgenden Informationen:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "issuer": "https://door.casdoor.com",\n  "authorization_endpoint": "https://door.casdoor.com/login/oauth/authorize",\n  "token_endpoint": "https://door.casdoor.com/api/login/oauth/access_token",\n  "userinfo_endpoint": "https://door.casdoor.com/api/userinfo",\n  "jwks_uri": "https://door.casdoor.com/.well-known/jwks",\n  "introspection_endpoint": "https://door.casdoor.com/api/login/oauth/introspect",\n  "response_types_supported": [\n    "code",\n    "token",\n    "id_token",\n    "code token",\n    "code id_token",\n    "token id_token",\n    "code token id_token",\n    "none"\n  ],\n  "response_modes_supported": [\n    "login",\n    "code",\n    "link"\n  ],\n  "grant_types_supported": [\n    "password",\n    "authorization_code"\n  ],\n  "subject_types_supported": [\n    "public"\n  ],\n  "id_token_signing_alg_values_supported": [\n    "RS256"\n  ],\n  "scopes_supported": [\n    "openid",\n    "email",\n    "profile",\n    "address",\n    "phone",\n    "offline_access"\n  ],\n  "claims_supported": [\n    "iss",\n    "ver",\n    "sub",\n    "aud",\n    "iat",\n    "exp",\n    "id",\n    "type",\n    "displayName",\n    "avatar",\n    "permanentAvatar",\n    "email",\n    "phone",\n    "location",\n    "affiliation",\n    "title",\n    "homepage",\n    "bio",\n    "tag",\n    "region",\n    "language",\n    "score",\n    "ranking",\n    "isOnline",\n    "isAdmin",\n    "isGlobalAdmin",\n    "isForbidden",\n    "signupApplication",\n    "ldap"\n  ],\n  "request_parameter_supported": true,\n  "request_object_signing_alg_values_supported": [\n    "HS256",\n    "HS384",\n    "HS512"\n  ]\n}\n')),(0,a.kt)("h3",{id:"application-specific-oidc-endpoints"},"Application-Specific OIDC Endpoints"),(0,a.kt)("p",null,"Besides the global discovery endpoint, you can use application-specific OIDC discovery endpoints. Each application gets its own isolated OIDC configuration with a unique issuer. This comes in handy when running multi-tenant deployments where applications need their own certificates or when you want to gradually migrate applications without affecting others."),(0,a.kt)("p",null,"The application-specific discovery URL follows this pattern:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-url"},"<your-casdoor-backend-host>/.well-known/<application-name>/openid-configuration\n")),(0,a.kt)("p",null,"For example, if you have an application named ",(0,a.kt)("inlineCode",{parentName:"p"},"app-example"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-url"},"https://door.casdoor.com/.well-known/app-example/openid-configuration\n")),(0,a.kt)("p",null,"The main difference is that the ",(0,a.kt)("inlineCode",{parentName:"p"},"issuer")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"jwks_uri")," fields in the discovery response contain the application path. The ",(0,a.kt)("inlineCode",{parentName:"p"},"issuer")," becomes ",(0,a.kt)("inlineCode",{parentName:"p"},"https://door.casdoor.com/.well-known/app-example")," instead of just ",(0,a.kt)("inlineCode",{parentName:"p"},"https://door.casdoor.com"),", and the ",(0,a.kt)("inlineCode",{parentName:"p"},"jwks_uri")," points to ",(0,a.kt)("inlineCode",{parentName:"p"},"/.well-known/app-example/jwks"),". Everything else, including the authorization and token endpoints, stays the same."),(0,a.kt)("p",null,"You can also access the JWKS and WebFinger endpoints for each application:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-url"},"<your-casdoor-backend-host>/.well-known/<application-name>/jwks\n<your-casdoor-backend-host>/.well-known/<application-name>/webfinger\n")),(0,a.kt)("p",null,"The JWKS endpoint returns the public keys for verifying tokens. When an application has its own certificate configured, that certificate is used. Otherwise, it falls back to the global certificates."),(0,a.kt)("p",null,"Here's what the responses look like. The global endpoint returns:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "issuer": "https://door.casdoor.com",\n  "jwks_uri": "https://door.casdoor.com/.well-known/jwks",\n  "authorization_endpoint": "https://door.casdoor.com/login/oauth/authorize",\n  ...\n}\n')),(0,a.kt)("p",null,"While the application-specific endpoint for ",(0,a.kt)("inlineCode",{parentName:"p"},"app-example")," returns:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "issuer": "https://door.casdoor.com/.well-known/app-example",\n  "jwks_uri": "https://door.casdoor.com/.well-known/app-example/jwks",\n  "authorization_endpoint": "https://door.casdoor.com/login/oauth/authorize",\n  ...\n}\n')),(0,a.kt)("h2",{id:"liste-von-oidc-client-bibliotheken"},"Liste von OIDC-Client-Bibliotheken"),(0,a.kt)("p",null,"Hier ist eine Liste einiger OIDC-Client-Bibliotheken f\xfcr Sprachen wie Go und Java:"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"OIDC-Client-Bibliothek"),(0,a.kt)("th",{parentName:"tr",align:null},"Sprache"),(0,a.kt)("th",{parentName:"tr",align:null},"Link"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"go-oidc"),(0,a.kt)("td",{parentName:"tr",align:null},"Go"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("a",{parentName:"td",href:"https://github.com/coreos/go-oidc"},"https://github.com/coreos/go-oidc"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"pac4j-oidc"),(0,a.kt)("td",{parentName:"tr",align:null},"Java"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("a",{parentName:"td",href:"https://www.pac4j.org/docs/clients/openid-connect.html"},"https://www.pac4j.org/docs/clients/openid-connect.html"))))),(0,a.kt)("p",null,"Bitte beachten Sie, dass die obige Tabelle nicht vollst\xe4ndig ist. F\xfcr eine vollst\xe4ndige Liste von OIDC-Client-Bibliotheken finden Sie weitere Details unter:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("a",{parentName:"li",href:"https://oauth.net/code/"},"https://oauth.net/code/")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("a",{parentName:"li",href:"https://openid.net/certified-open-id-developer-tools/"},"https://openid.net/certified-open-id-developer-tools/"))),(0,a.kt)("h2",{id:"oidc-userinfo-felder"},"OIDC UserInfo-Felder"),(0,a.kt)("p",null,"Die folgende Tabelle veranschaulicht, wie OIDC UserInfo-Felder (\xfcber die ",(0,a.kt)("inlineCode",{parentName:"p"},"/api/userinfo")," API) von Eigenschaften der Casdoor-Benutzertabelle zugeordnet werden:"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Casdoor-Benutzerfeld"),(0,a.kt)("th",{parentName:"tr",align:null},"OIDC UserInfo-Feld"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Id"),(0,a.kt)("td",{parentName:"tr",align:null},"sub")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"originBackend"),(0,a.kt)("td",{parentName:"tr",align:null},"iss")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Aud"),(0,a.kt)("td",{parentName:"tr",align:null},"aud")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Name"),(0,a.kt)("td",{parentName:"tr",align:null},"preferred_username")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"DisplayName"),(0,a.kt)("td",{parentName:"tr",align:null},"name")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Email"),(0,a.kt)("td",{parentName:"tr",align:null},"email")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Avatar"),(0,a.kt)("td",{parentName:"tr",align:null},"picture")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Location"),(0,a.kt)("td",{parentName:"tr",align:null},"address")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Phone"),(0,a.kt)("td",{parentName:"tr",align:null},"phone")))),(0,a.kt)("p",null,"Sie k\xf6nnen die Definition von UserInfo ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/casdoor/casdoor/blob/95ab2472ce84c479be43d6fc4db6533fc738b259/object/user.go#L175-L185"},"hier")," sehen."))}c.isMDXComponent=!0}}]);