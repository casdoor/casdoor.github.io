"use strict";(self.webpackChunkcasdoor_website=self.webpackChunkcasdoor_website||[]).push([[5400],{3905:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>m});var n=a(67294);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var l=n.createContext({}),d=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},p=function(e){var t=d(e.components);return n.createElement(l.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var a=e.components,o=e.mdxType,r=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),u=d(a),m=o,h=u["".concat(l,".").concat(m)]||u[m]||c[m]||r;return a?n.createElement(h,i(i({ref:t},p),{},{components:a})):n.createElement(h,i({ref:t},p))}));function m(e,t){var a=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=a.length,i=new Array(r);i[0]=u;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:o,i[1]=s;for(var d=2;d<r;d++)i[d]=a[d];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},12846:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>c,frontMatter:()=>r,metadata:()=>s,toc:()=>d});var n=a(87462),o=(a(67294),a(3905));const r={title:"Server Installation",description:"Install and configure Casdoor server",keywords:["Casdoor server","installation","configuration"],authors:["hsluoyz"]},i=void 0,s={unversionedId:"basic/server-installation",id:"basic/server-installation",title:"Server Installation",description:"Install and configure Casdoor server",source:"@site/docs/basic/server-installation.mdx",sourceDirName:"basic",slug:"/basic/server-installation",permalink:"/docs/basic/server-installation",draft:!1,editUrl:"https://github.com/casdoor/casdoor-website/edit/master/docs/basic/server-installation.mdx",tags:[],version:"current",frontMatter:{title:"Server Installation",description:"Install and configure Casdoor server",keywords:["Casdoor server","installation","configuration"],authors:["hsluoyz"]},sidebar:"tutorialSidebar",previous:{title:"Core Concepts",permalink:"/docs/basic/core-concepts"},next:{title:"Configuration File",permalink:"/docs/basic/configuration"}},l={},d=[{value:"Requirements",id:"requirements",level:2},{value:"Operating System",id:"operating-system",level:3},{value:"Environment",id:"environment",level:3},{value:"Database",id:"database",level:3},{value:"Download",id:"download",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Configure Database",id:"configure-database",level:3},{value:"MySQL",id:"mysql",level:4},{value:"PostgreSQL",id:"postgresql",level:4},{value:"CockroachDB",id:"cockroachdb",level:4},{value:"SQLite3",id:"sqlite3",level:4},{value:"Configuration Files",id:"configuration-files",level:3},{value:"Run",id:"run",level:2},{value:"Development Mode",id:"development-mode",level:3},{value:"Backend",id:"backend",level:4},{value:"Frontend",id:"frontend",level:4},{value:"Production Mode",id:"production-mode",level:3},{value:"Backend",id:"backend-1",level:4},{value:"Frontend",id:"frontend-1",level:4}],p={toc:d};function c(e){let{components:t,...r}=e;return(0,o.kt)("wrapper",(0,n.Z)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"requirements"},"Requirements"),(0,o.kt)("h3",{id:"operating-system"},"Operating System"),(0,o.kt)("p",null,"All major operating systems are supported, including Windows, Linux, and macOS."),(0,o.kt)("h3",{id:"environment"},"Environment"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://go.dev/dl/"},"Go 1.21+")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://nodejs.org"},"Node.js LTS (20)")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://classic.yarnpkg.com/en/docs/install"},"Yarn 1.x"))),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("p",{parentName:"admonition"},"We strongly recommend using ",(0,o.kt)("a",{parentName:"p",href:"https://classic.yarnpkg.com/en/docs/install"},"Yarn 1.x")," to run and build the Casdoor frontend. Using NPM might cause UI styling issues. For more details, see: ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/casdoor/casdoor/issues/294"},"casdoor#294"),".")),(0,o.kt)("admonition",{type:"caution"},(0,o.kt)("p",{parentName:"admonition"},"If your network fails to directly sync Go dependency packages successfully, you need to use a Go proxy by configuring the GOPROXY environment variable. We strongly recommend using: ",(0,o.kt)("a",{parentName:"p",href:"https://goproxy.cn/"},"https://goproxy.cn/"))),(0,o.kt)("h3",{id:"database"},"Database"),(0,o.kt)("p",null,"Casdoor uses ",(0,o.kt)("a",{parentName:"p",href:"https://xorm.io/"},"XORM")," to communicate with the database. Based on ",(0,o.kt)("a",{parentName:"p",href:"https://xorm.io/docs/chapter-01/readme/"},"Xorm Drivers Support"),", Casdoor currently provides support for the following databases:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"MySQL")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"MariaDB")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"PostgreSQL")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"CockroachDB")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"SQL Server")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"Oracle")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"SQLite 3")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"TiDB"))),(0,o.kt)("h2",{id:"download"},"Download"),(0,o.kt)("p",null,"The source code of Casdoor is hosted on GitHub: ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/casdoor/casdoor"},"https://github.com/casdoor/casdoor"),". Both the Go backend code and React frontend code are contained in a single repository."),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"Name"),(0,o.kt)("th",{parentName:"tr",align:null},"Description"),(0,o.kt)("th",{parentName:"tr",align:null},"Language"),(0,o.kt)("th",{parentName:"tr",align:null},"Source code"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"Frontend"),(0,o.kt)("td",{parentName:"tr",align:null},"Web frontend UI for Casdoor"),(0,o.kt)("td",{parentName:"tr",align:null},"JavaScript + React"),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("a",{parentName:"td",href:"https://github.com/casdoor/casdoor/tree/master/web"},"https://github.com/casdoor/casdoor/tree/master/web"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"Backend"),(0,o.kt)("td",{parentName:"tr",align:null},"RESTful API backend for Casdoor"),(0,o.kt)("td",{parentName:"tr",align:null},"Golang + Beego + XORM"),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("a",{parentName:"td",href:"https://github.com/casdoor/casdoor"},"https://github.com/casdoor/casdoor"))))),(0,o.kt)("p",null,"Casdoor supports ",(0,o.kt)("inlineCode",{parentName:"p"},"Go Modules"),". To download the code, simply clone the code using git:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"cd path/to/folder\ngit clone https://github.com/casdoor/casdoor\n")),(0,o.kt)("h2",{id:"configuration"},"Configuration"),(0,o.kt)("h3",{id:"configure-database"},"Configure Database"),(0,o.kt)("p",null,"Casdoor supports MySQL, MSSQL, SQLite3, and PostgreSQL. By default, Casdoor uses MySQL."),(0,o.kt)("h4",{id:"mysql"},"MySQL"),(0,o.kt)("p",null,"Casdoor stores user, node, and topic information in a MySQL database named ",(0,o.kt)("inlineCode",{parentName:"p"},"casdoor"),". If the database does not exist, it must be created manually. The DB connection string can be specified at: ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/casdoor/casdoor/blob/master/conf/app.conf"},"https://github.com/casdoor/casdoor/blob/master/conf/app.conf")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ini"},"driverName = mysql\ndataSourceName = root:123456@tcp(localhost:3306)/\ndbName = casdoor\n")),(0,o.kt)("h4",{id:"postgresql"},"PostgreSQL"),(0,o.kt)("p",null,"Before running Casdoor, you need to manually prepare a database for PostgreSQL, as Casdoor requires a database to be selected when opening Postgres with xorm."),(0,o.kt)("p",null,"Assuming you have already prepared a database called ",(0,o.kt)("inlineCode",{parentName:"p"},"casdoor"),", you should specify ",(0,o.kt)("inlineCode",{parentName:"p"},"app.conf")," like this:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ini"},"driverName = postgres\ndataSourceName = user=postgres password=postgres host=localhost port=5432 sslmode=disable dbname=casdoor\ndbName = casdoor\n")),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("p",{parentName:"admonition"},"For PostgreSQL, ensure that ",(0,o.kt)("inlineCode",{parentName:"p"},"dataSourceName")," has a non-empty ",(0,o.kt)("inlineCode",{parentName:"p"},"dbName")," and also ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/casdoor/casdoor/issues/2127"},"duplicate")," the database name for the ",(0,o.kt)("inlineCode",{parentName:"p"},"dbname")," field as shown in the example above.")),(0,o.kt)("h4",{id:"cockroachdb"},"CockroachDB"),(0,o.kt)("p",null,"CockroachDB can also be used with the PostgreSQL driver and has the same configuration as PostgreSQL."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ini"},"driverName = postgres\ndataSourceName = user=postgres password=postgres host=localhost port=5432 sslmode=disable dbname=casdoor serial_normalization=virtual_sequence\ndbName = casdoor\n")),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("p",{parentName:"admonition"},"For CockroachDB, remember to add ",(0,o.kt)("inlineCode",{parentName:"p"},"serial_normalization=virtual_sequence")," to the ",(0,o.kt)("inlineCode",{parentName:"p"},"dataSourceName")," as shown in the example above. Otherwise, you will get an error regarding an existing database whenever the service starts or restarts. Note that this must be added before the database is created.")),(0,o.kt)("h4",{id:"sqlite3"},"SQLite3"),(0,o.kt)("p",null,"To configure SQLite3, you should specify ",(0,o.kt)("inlineCode",{parentName:"p"},"app.conf")," like this:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ini"},"driverName = sqlite\ndataSourceName = file:casdoor.db?cache=shared\ndbName = casdoor\n")),(0,o.kt)("h3",{id:"configuration-files"},"Configuration Files"),(0,o.kt)("p",null,"Casdoor can be configured via configuration files for both the backend and frontend. For a complete reference of all configuration options, see the ",(0,o.kt)("a",{parentName:"p",href:"/docs/basic/configuration"},"Configuration File")," documentation."),(0,o.kt)("p",null,"For basic setup, you typically only need to modify ",(0,o.kt)("inlineCode",{parentName:"p"},"driverName")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"dataSourceName")," in the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/casdoor/casdoor/blob/master/conf/app.conf"},(0,o.kt)("strong",{parentName:"a"},"conf/app.conf"))," file based on your database (see ",(0,o.kt)("a",{parentName:"p",href:"#configure-database"},"Configure Database"),")."),(0,o.kt)("h2",{id:"run"},"Run"),(0,o.kt)("p",null,"There are currently two methods to start, and you can choose one according to your situation."),(0,o.kt)("h3",{id:"development-mode"},"Development Mode"),(0,o.kt)("h4",{id:"backend"},"Backend"),(0,o.kt)("p",null,"Casdoor's Go backend runs on port 8000 by default. You can start the Go backend with the following command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"go run main.go\n")),(0,o.kt)("p",null,"After the server is successfully running, you can start the frontend part."),(0,o.kt)("h4",{id:"frontend"},"Frontend"),(0,o.kt)("p",null,"Casdoor's frontend is a very classic ",(0,o.kt)("a",{parentName:"p",href:"https://create-react-app.dev/"},(0,o.kt)("strong",{parentName:"a"},"Create-React-App (CRA)"))," project. It runs on port ",(0,o.kt)("inlineCode",{parentName:"p"},"7001")," by default. Use the following commands to run the frontend:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"cd web\nyarn install\nyarn start\n")),(0,o.kt)("p",null,"Visit ",(0,o.kt)("a",{parentName:"p",href:"http://localhost:7001"},(0,o.kt)("strong",{parentName:"a"},"http://localhost:7001"))," in your browser. Log into the Casdoor dashboard with the default global admin account: ",(0,o.kt)("inlineCode",{parentName:"p"},"built-in/admin"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"admin\n123\n")),(0,o.kt)("h3",{id:"production-mode"},"Production Mode"),(0,o.kt)("h4",{id:"backend-1"},"Backend"),(0,o.kt)("p",null,"Build the Casdoor Go backend code into an executable and start it."),(0,o.kt)("p",null,"For Linux:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"go build\n./casdoor\n")),(0,o.kt)("p",null,"For Windows:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"go build\ncasdoor.exe\n")),(0,o.kt)("h4",{id:"frontend-1"},"Frontend"),(0,o.kt)("p",null,"Build the Casdoor frontend code into static resources (.html, .js, .css files):"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"cd web\nyarn install\nyarn build\n")),(0,o.kt)("p",null,"Visit ",(0,o.kt)("a",{parentName:"p",href:"http://localhost:8000"},(0,o.kt)("strong",{parentName:"a"},"http://localhost:8000"))," in your browser. Log into the Casdoor dashboard with the default global admin account: ",(0,o.kt)("inlineCode",{parentName:"p"},"built-in/admin"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"admin\n123\n")),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"To use another port, please edit ",(0,o.kt)("inlineCode",{parentName:"p"},"conf/app.conf")," and modify ",(0,o.kt)("inlineCode",{parentName:"p"},"httpport"),", then restart the Go backend.")),(0,o.kt)("admonition",{title:"Casdoor Port Details",type:"info"},(0,o.kt)("p",{parentName:"admonition"},"In the ",(0,o.kt)("strong",{parentName:"p"},"dev")," environment, the frontend is run by ",(0,o.kt)("inlineCode",{parentName:"p"},"yarn run")," on port 7001, so if you want to go to the Casdoor login page, you need to set the Casdoor link as ",(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("a",{parentName:"strong",href:"http://localhost:7001"},"http://localhost:7001")),"."),(0,o.kt)("p",{parentName:"admonition"},"In the ",(0,o.kt)("strong",{parentName:"p"},"prod")," environment, the frontend files are first built by ",(0,o.kt)("inlineCode",{parentName:"p"},"yarn build")," and served on port 8000, so if you want to go to the Casdoor login page, you need to set the Casdoor link as ",(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("a",{parentName:"strong",href:"https://your-casdoor-url.com:8000"},"https://your-casdoor-url.com:8000"))," (If you are using a reverse proxy, you need to set the link as ",(0,o.kt)("strong",{parentName:"p"},"your domain"),")."),(0,o.kt)("h4",{parentName:"admonition",id:"take-our-official-forum-casnode-as-an-example"},"Take Our Official Forum Casnode as an Example"),(0,o.kt)("p",{parentName:"admonition"},(0,o.kt)("a",{parentName:"p",href:"https://casnode.org"},"Casnode")," uses Casdoor to handle authentication."),(0,o.kt)("p",{parentName:"admonition"},"When we are testing Casnode in the ",(0,o.kt)("strong",{parentName:"p"},"dev")," environment, we set the ",(0,o.kt)("inlineCode",{parentName:"p"},"serverUrl")," as ",(0,o.kt)("a",{parentName:"p",href:"http://localhost:7001"},"http://localhost:7001"),", so when we test the signin and signup functionality using Casdoor, it will go to localhost 7001, which is the Casdoor port."),(0,o.kt)("p",{parentName:"admonition"},"And when we put Casnode into the ",(0,o.kt)("strong",{parentName:"p"},"prod")," environment, we set the ",(0,o.kt)("inlineCode",{parentName:"p"},"serverUrl")," as ",(0,o.kt)("a",{parentName:"p",href:"https://door.casdoor.com"},"https://door.casdoor.com"),", so users can sign in or sign up using Casdoor."),(0,o.kt)("p",{parentName:"admonition"},(0,o.kt)("img",{alt:"Casnode Example",src:a(4621).Z,width:"1108",height:"281"}))))}c.isMDXComponent=!0},4621:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/casnodeexample-06892ab1a66c35c830aa85d51c8f75ed.png"}}]);