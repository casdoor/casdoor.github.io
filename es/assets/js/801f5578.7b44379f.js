"use strict";(self.webpackChunkcasdoor_website=self.webpackChunkcasdoor_website||[]).push([[411],{3905:(e,a,t)=>{t.d(a,{Zo:()=>c,kt:()=>m});var n=t(67294);function r(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function o(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function i(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?o(Object(t),!0).forEach((function(a){r(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function s(e,a){if(null==e)return{};var t,n,r=function(e,a){if(null==e)return{};var t,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)t=o[n],a.indexOf(t)>=0||(r[t]=e[t]);return r}(e,a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)t=o[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var l=n.createContext({}),d=function(e){var a=n.useContext(l),t=a;return e&&(t="function"==typeof e?e(a):i(i({},a),e)),t},c=function(e){var a=d(e.components);return n.createElement(l.Provider,{value:a},e.children)},u={inlineCode:"code",wrapper:function(e){var a=e.children;return n.createElement(n.Fragment,{},a)}},p=n.forwardRef((function(e,a){var t=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),p=d(t),m=r,b=p["".concat(l,".").concat(m)]||p[m]||u[m]||o;return t?n.createElement(b,i(i({ref:a},c),{},{components:t})):n.createElement(b,i({ref:a},c))}));function m(e,a){var t=arguments,r=a&&a.mdxType;if("string"==typeof e||r){var o=t.length,i=new Array(o);i[0]=p;var s={};for(var l in a)hasOwnProperty.call(a,l)&&(s[l]=a[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var d=2;d<o;d++)i[d]=t[d];return n.createElement.apply(null,i)}return n.createElement.apply(null,t)}p.displayName="MDXCreateElement"},79418:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>l,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>d});var n=t(87462),r=(t(67294),t(3905));const o={title:"Base de datos",description:"Usando Sincronizador de Base de Datos para sincronizar bases de datos",keywords:["sincronizador","base de datos"],authors:["Marvelousp4"]},i=void 0,s={unversionedId:"syncer/Database",id:"syncer/Database",title:"Base de datos",description:"Usando Sincronizador de Base de Datos para sincronizar bases de datos",source:"@site/i18n/es/docusaurus-plugin-content-docs/current/syncer/Database.md",sourceDirName:"syncer",slug:"/syncer/Database",permalink:"/es/docs/syncer/Database",draft:!1,editUrl:"https://github.com/casdoor/casdoor-website/edit/master/docs/syncer/Database.md",tags:[],version:"current",frontMatter:{title:"Base de datos",description:"Usando Sincronizador de Base de Datos para sincronizar bases de datos",keywords:["sincronizador","base de datos"],authors:["Marvelousp4"]},sidebar:"tutorialSidebar",previous:{title:"Visi\xf3n general",permalink:"/es/docs/syncer/overview"},next:{title:"Keycloak",permalink:"/es/docs/syncer/Keycloak"}},l={},d=[{value:"Sincronizador de Base de Datos",id:"sincronizador-de-base-de-datos",level:2}],c={toc:d};function u(e){let{components:a,...o}=e;return(0,r.kt)("wrapper",(0,n.Z)({},c,o,{components:a,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"sincronizador-de-base-de-datos"},"Sincronizador de Base de Datos"),(0,r.kt)("p",null,"La tabla de usuarios que creamos como demostraci\xf3n se importa desde el ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/casdoor/casdoor/blob/master/xlsx/user_test.xlsx"},"archivo XLSX de plantilla"),"."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Tabla",src:t(95899).Z,width:"2244",height:"241"})),(0,r.kt)("p",null,"Para crear un nuevo sincronizador, ve a la pesta\xf1a ",(0,r.kt)("strong",{parentName:"p"},"Sincronizadores")," y completa toda la informaci\xf3n requerida como se muestra a continuaci\xf3n. Luego, guarda los cambios."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"editar",src:t(2739).Z,width:"1758",height:"872"})),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"En general, necesitas completar al menos el ",(0,r.kt)("inlineCode",{parentName:"p"},"ID")," y ",(0,r.kt)("inlineCode",{parentName:"p"},"Name")," en las columnas de Casdoor. Otros campos importantes incluyen ",(0,r.kt)("inlineCode",{parentName:"p"},"createdTime"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"Password")," y ",(0,r.kt)("inlineCode",{parentName:"p"},"DisplayName"),".")),(0,r.kt)("p",null,"Los siguientes campos son obligatorios:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Organization"),": La organizaci\xf3n a la que se importar\xe1 el usuario"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Name"),": El nombre del sincronizador"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Type"),': Selecciona "base de datos"'),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Host"),": El host de la base de datos original"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Port"),": El puerto de la base de datos original"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"User"),": El nombre de usuario de la base de datos original"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Password"),": La contrase\xf1a de la base de datos original"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Database type"),": Todas las bases de datos soportadas por Xorm como MySQL, PostgreSQL, SQL Server, Oracle y SQLite"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Database"),": El nombre de la base de datos original"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Table"),": El nombre de la tabla de usuarios original"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Columnas de la tabla")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Column name"),": El nombre de la columna de usuarios original"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Column type"),": El tipo de la columna de usuarios original"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Casdoor Column"),": El nombre de la columna de usuario de Casdoor")),(0,r.kt)("p",null,"Campos opcionales:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Is hashed"),': Si se calcula el valor hash. Cuando esta opci\xf3n est\xe1 habilitada, el sincronizador solo sincronizar\xe1 el usuario si el campo del usuario en la tabla original se actualiza. Si esta opci\xf3n est\xe1 deshabilitada, el sincronizador seguir\xe1 sincronizando el usuario incluso si solo se actualiza el campo. En resumen, el usuario no ser\xe1 sincronizado hasta que se actualicen los campos involucrados en el c\xe1lculo del hash (habilitado "Is hashed").'),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Is key"),': Si es la clave primaria del usuario en la tabla original y en la tabla de Casdoor. Al sincronizar la base de datos, se determina en base al campo cuya opci\xf3n "Is key" est\xe1 seleccionada. Al menos uno de los botones "Is key" para los campos debe ser seleccionado. Si ninguno est\xe1 seleccionado, la primera opci\xf3n "Is key" se selecciona por defecto.'),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Avatar base URL"),": Al sincronizar usuarios, si la ",(0,r.kt)("strong",{parentName:"li"},"Avatar base URL")," no est\xe1 vac\xeda y el origen ",(0,r.kt)("strong",{parentName:"li"},"user.avatar"),' no tiene el prefijo "http", el nuevo ',(0,r.kt)("strong",{parentName:"li"},"user.avatar")," ser\xe1 reemplazado por ",(0,r.kt)("strong",{parentName:"li"},"Avatar base URL + user.avatar"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Affiliation table"),': Se utiliza para sincronizar la afiliaci\xf3n del usuario desde esta tabla en la base de datos. Dado que la afiliaci\xf3n puede ser un c\xf3digo de tipo int en la "Affiliation table", necesita ser mapeado a una cadena. Consulta ',(0,r.kt)("a",{parentName:"li",href:"https://github.com/casdoor/casdoor/blob/9f3ee275a8b747f914f0e74e897a79abeff96ccb/object/syncer_affiliation.go#L32"},"getAffiliationMap()"),". Casdoor tiene algunos campos redundantes para pedir prestados, as\xed que ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/casdoor/casdoor/blob/9f3ee275a8b747f914f0e74e897a79abeff96ccb/object/syncer_util.go#L65"},"aqu\xed")," usamos ",(0,r.kt)("inlineCode",{parentName:"li"},"score")," para mapear el c\xf3digo int a un nombre de cadena.")),(0,r.kt)("p",null,"Una vez que hayas configurado el sincronizador, habilita la opci\xf3n ",(0,r.kt)("strong",{parentName:"p"},"Is enable")," y guarda. El sincronizador comenzar\xe1 a trabajar."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"usuarios",src:t(55155).Z,width:"1784",height:"163"})),(0,r.kt)("p",null,'Tambi\xe9n puedes usar el bot\xf3n "Sync" para la sincronizaci\xf3n de la base de datos.'),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Actualizar")),(0,r.kt)("p",null,"Cuando las ",(0,r.kt)("inlineCode",{parentName:"p"},"Table columns")," est\xe1n configuradas como se muestra en la siguiente figura, se realiza la operaci\xf3n de actualizaci\xf3n."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"table_columns",src:t(67954).Z,width:"1755",height:"273"})),(0,r.kt)("p",null,"Si los datos en las dos tablas son diferentes para la clave, puedes sincronizar los datos entre las dos tablas bas\xe1ndote en la clave primaria."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Actualizar usuario en la tabla original")),(0,r.kt)("video",{src:"/video/syncer/update_user.mp4",controls:"controls",width:"100%"}),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Actualizar usuario en la tabla de Casdoor")),(0,r.kt)("video",{src:"/video/syncer/update_casdoor.mp4",controls:"controls",width:"100%"}),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"A\xf1adir")),(0,r.kt)("p",null,"Cuando las ",(0,r.kt)("inlineCode",{parentName:"p"},"Table columns")," est\xe1n configuradas como se muestra en la siguiente figura, se realiza la operaci\xf3n de a\xf1adir."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"table_columns",src:t(67954).Z,width:"1755",height:"273"})),(0,r.kt)("p",null,"Si el n\xfamero de datos entre las dos tablas es diferente, a\xf1ade los datos a la tabla con el menor n\xfamero de datos bas\xe1ndote en la clave primaria."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"A\xf1adir usuario en la tabla original")),(0,r.kt)("video",{src:"/video/syncer/add_user.mp4",controls:"controls",width:"100%"}),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"A\xf1adir usuario en la tabla de Casdoor")),(0,r.kt)("video",{src:"/video/syncer/add_casdoor.mp4",controls:"controls",width:"100%"}))}u.isMDXComponent=!0},2739:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/syncer_database_edit-435b2fa3ce01e17c2b551c6729303c24.png"},95899:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/syncer_database_table-b7ed36d236791d6de4e3a0e5b7c5e75e.png"},67954:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/syncer_database_table_columns-6251bc6562ba8ab0e90d2e9e823d52f8.png"},55155:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/syncer_database_users-ac0f4230b3b21198217baa1ebf02ea7f.png"}}]);