"use strict";(self.webpackChunkcasdoor_website=self.webpackChunkcasdoor_website||[]).push([[5686],{3905:(e,n,t)=>{t.d(n,{Zo:()=>u,kt:()=>m});var r=t(67294);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function o(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var d=r.createContext({}),s=function(e){var n=r.useContext(d),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},u=function(e){var n=s(e.components);return r.createElement(d.Provider,{value:n},e.children)},c={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},p=r.forwardRef((function(e,n){var t=e.components,i=e.mdxType,a=e.originalType,d=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),p=s(t),m=i,k=p["".concat(d,".").concat(m)]||p[m]||c[m]||a;return t?r.createElement(k,l(l({ref:n},u),{},{components:t})):r.createElement(k,l({ref:n},u))}));function m(e,n){var t=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var a=t.length,l=new Array(a);l[0]=p;var o={};for(var d in n)hasOwnProperty.call(n,d)&&(o[d]=n[d]);o.originalType=e,o.mdxType="string"==typeof e?e:i,l[1]=o;for(var s=2;s<a;s++)l[s]=t[s];return r.createElement.apply(null,l)}return r.createElement.apply(null,t)}p.displayName="MDXCreateElement"},15866:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>c,frontMatter:()=>a,metadata:()=>o,toc:()=>s});var r=t(87462),i=(t(67294),t(3905));const a={title:"Nuxt",description:"Verwendung von Casdoor in einem Nuxt-Projekt",keywords:["nuxt"],authors:["xiao-kong-long"]},l=void 0,o={unversionedId:"how-to-connect/nuxt",id:"how-to-connect/nuxt",title:"Nuxt",description:"Verwendung von Casdoor in einem Nuxt-Projekt",source:"@site/i18n/de/docusaurus-plugin-content-docs/current/how-to-connect/nuxt.md",sourceDirName:"how-to-connect",slug:"/how-to-connect/nuxt",permalink:"/de/docs/how-to-connect/nuxt",draft:!1,editUrl:"https://github.com/casdoor/casdoor-website/edit/master/docs/how-to-connect/nuxt.md",tags:[],version:"current",frontMatter:{title:"Nuxt",description:"Verwendung von Casdoor in einem Nuxt-Projekt",keywords:["nuxt"],authors:["xiao-kong-long"]},sidebar:"tutorialSidebar",previous:{title:"Next.js",permalink:"/de/docs/how-to-connect/nextjs"},next:{title:"OAuth 2.0",permalink:"/de/docs/how-to-connect/oauth"}},d={},s=[{value:"Schritt 1: Casdoor bereitstellen",id:"schritt-1-casdoor-bereitstellen",level:2},{value:"Schritt 2: Middleware hinzuf\xfcgen",id:"schritt-2-middleware-hinzuf\xfcgen",level:2},{value:"Beispiel",id:"beispiel",level:3},{value:"Schritt 3: Verwenden Sie Casdoor SDK",id:"schritt-3-verwenden-sie-casdoor-sdk",level:2},{value:"1.SDK installieren",id:"1sdk-installieren",level:3},{value:"2.SDK initialisieren",id:"2sdk-initialisieren",level:3},{value:"Beispiel",id:"beispiel-1",level:3},{value:"3.Zur Anmeldeseite umleiten",id:"3zur-anmeldeseite-umleiten",level:3},{value:"4.Token erhalten und speichern",id:"4token-erhalten-und-speichern",level:3},{value:"Schritt 4: Authentifizierungsfunktion der Middleware hinzuf\xfcgen",id:"schritt-4-authentifizierungsfunktion-der-middleware-hinzuf\xfcgen",level:2},{value:"Beispiel",id:"beispiel-2",level:3}],u={toc:s};function c(e){let{components:n,...t}=e;return(0,i.kt)("wrapper",(0,r.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://github.com/casdoor/nuxt-auth"},"nuxt-auth")," ist ein Beispiel, wie man casdoor in einem nuxt-Projekt integrieren kann. Wir werden Sie durch die folgenden Schritte f\xfchren. Viele Schritte \xe4hneln nextjs-auth."),(0,i.kt)("h2",{id:"schritt-1-casdoor-bereitstellen"},"Schritt 1: Casdoor bereitstellen"),(0,i.kt)("p",null,"Zuerst sollte Casdoor bereitgestellt werden."),(0,i.kt)("p",null,"Sie k\xf6nnen sich auf die offizielle Casdoor-Dokumentation f\xfcr die ",(0,i.kt)("a",{parentName:"p",href:"/docs/basic/server-installation"},"Server-Installation")," beziehen. Bitte stellen Sie Ihre Casdoor-Instanz im ",(0,i.kt)("strong",{parentName:"p"},"Produktionsmodus")," bereit."),(0,i.kt)("p",null,"Nach einer erfolgreichen Bereitstellung stellen Sie sicher, dass Folgendes:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\xd6ffnen Sie Ihren bevorzugten Browser und besuchen Sie ",(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("a",{parentName:"strong",href:"http://localhost:8000"},"http://localhost:8000")),". Sie werden die Anmeldeseite von Casdoor sehen."),(0,i.kt)("li",{parentName:"ul"},"Testen Sie die Anmeldefunktionalit\xe4t, indem Sie ",(0,i.kt)("inlineCode",{parentName:"li"},"admin")," als Benutzernamen und ",(0,i.kt)("inlineCode",{parentName:"li"},"123")," als Passwort eingeben.")),(0,i.kt)("p",null,"Danach k\xf6nnen Sie mithilfe der folgenden Schritte schnell eine auf Casdoor basierende Anmeldeseite in Ihrer eigenen App implementieren."),(0,i.kt)("h2",{id:"schritt-2-middleware-hinzuf\xfcgen"},"Schritt 2: Middleware hinzuf\xfcgen"),(0,i.kt)("p",null,"Middleware erm\xf6glicht es Ihnen, Code auszuf\xfchren, bevor eine Anfrage abgeschlossen ist. Dann k\xf6nnen Sie basierend auf der eingehenden Anfrage die Antwort modifizieren, indem Sie umschreiben, umleiten, die Anfrage- oder Antwort-Header \xe4ndern oder direkt antworten."),(0,i.kt)("p",null,"Erstellen Sie ",(0,i.kt)("inlineCode",{parentName:"p"},".js"),"- oder ",(0,i.kt)("inlineCode",{parentName:"p"},".ts"),"-Dateien im ",(0,i.kt)("inlineCode",{parentName:"p"},"middleware"),"-Verzeichnis im Wurzelverzeichnis Ihres Projekts, um Middleware zu definieren. Und die Dateinamen werden als Namen der Middleware identifiziert. Zum Beispiel erstellen wir in ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/casdoor/nuxt-auth"},"nuxt-auth")," eine Datei namens ",(0,i.kt)("inlineCode",{parentName:"p"},"myMiddleware.js")," im ",(0,i.kt)("inlineCode",{parentName:"p"},"middleware"),"-Verzeichnis, die an anderen Stellen wie ",(0,i.kt)("inlineCode",{parentName:"p"},"nuxt.config.js")," als ",(0,i.kt)("inlineCode",{parentName:"p"},"myMiddleware")," referenziert werden kann."),(0,i.kt)("h3",{id:"beispiel"},"Beispiel"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"//define which paths Middleware will run on\nconst protectedRoutes = [\"/profile\"];\n\nexport default function ({route, redirect}) {\n\n  if (protectedRoutes.includes(route.path)) {\n    //redirect the incoming request to a different URL\n    redirect('/login');\n  }\n}\n")),(0,i.kt)("p",null,"Damit Middleware funktioniert, sollten Sie den Router in ",(0,i.kt)("inlineCode",{parentName:"p"},"nuxt.config.js")," hinzuf\xfcgen, so:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"export default {\n    // other configuations\n\n    // what to add\n    router: {\n    middleware: ['myMiddleware'] // replace to your middleware name\n  },\n}\n\n")),(0,i.kt)("p",null,"Siehe nuxt offizielle Dokumentation ",(0,i.kt)("a",{parentName:"p",href:"https://nuxt.com/docs/guide/directory-structure/middleware"},"middleware")," f\xfcr weitere Details."),(0,i.kt)("h2",{id:"schritt-3-verwenden-sie-casdoor-sdk"},"Schritt 3: Verwenden Sie Casdoor SDK"),(0,i.kt)("h3",{id:"1sdk-installieren"},"1.SDK installieren"),(0,i.kt)("p",null,"Zuerst installieren Sie ",(0,i.kt)("inlineCode",{parentName:"p"},"casdoor-js-sdk")," \xfcber NPM oder Yarn:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"npm install casdoor-js-sdk\n")),(0,i.kt)("p",null,"Oder:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"yarn add casdoor-js-sdk\n")),(0,i.kt)("h3",{id:"2sdk-initialisieren"},"2.SDK initialisieren"),(0,i.kt)("p",null,"Initialisieren Sie dann 6 Zeichenketten-Typ-Parameter in der folgenden Reihenfolge:"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Name"),(0,i.kt)("th",{parentName:"tr",align:null},"Erforderlich"),(0,i.kt)("th",{parentName:"tr",align:null},"Beschreibung"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"serverUrl"),(0,i.kt)("td",{parentName:"tr",align:null},"Ja"),(0,i.kt)("td",{parentName:"tr",align:null},"Casdoor Server-URL, wie ",(0,i.kt)("inlineCode",{parentName:"td"},"http://localhost:8000"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"clientId"),(0,i.kt)("td",{parentName:"tr",align:null},"Ja"),(0,i.kt)("td",{parentName:"tr",align:null},"Anwendungsklienten-ID")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"clientSecret"),(0,i.kt)("td",{parentName:"tr",align:null},"Ja"),(0,i.kt)("td",{parentName:"tr",align:null},"Anwendungsklienten-Geheimnis")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"organizationName"),(0,i.kt)("td",{parentName:"tr",align:null},"Ja"),(0,i.kt)("td",{parentName:"tr",align:null},"Anwendungsorganisation")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"appName"),(0,i.kt)("td",{parentName:"tr",align:null},"Ja"),(0,i.kt)("td",{parentName:"tr",align:null},"Anwendungsname")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"redirectPath"),(0,i.kt)("td",{parentName:"tr",align:null},"Ja"),(0,i.kt)("td",{parentName:"tr",align:null},"Umleitungs-URL")))),(0,i.kt)("h3",{id:"beispiel-1"},"Beispiel"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},'const sdkConfig = {\n  serverUrl: "https://door.casdoor.com",\n  clientId: "294b09fbc17f95daf2fe",\n  clientSecret: "dd8982f7046ccba1bbd7851d5c1ece4e52bf039d",\n  organizationName: "casbin",\n  appName: "app-vue-python-example",\n  redirectPath: "/callback",\n};\n')),(0,i.kt)("admonition",{type:"caution"},(0,i.kt)("p",{parentName:"admonition"},"Ersetzen Sie die Konfigurationswerte durch Ihre eigenen Casdoor-Instanz, insbesondere die ",(0,i.kt)("inlineCode",{parentName:"p"},"clientId"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"clientSecret")," und ",(0,i.kt)("inlineCode",{parentName:"p"},"serverUrl"),".")),(0,i.kt)("h3",{id:"3zur-anmeldeseite-umleiten"},"3.Zur Anmeldeseite umleiten"),(0,i.kt)("p",null,"Wenn Sie Benutzer authentifizieren m\xfcssen, die auf Ihre App zugreifen, k\xf6nnen Sie die Ziel-URL senden und zur Anmeldeseite umleiten, die von Casdoor bereitgestellt wird."),(0,i.kt)("p",null,"Stellen Sie sicher, dass Sie die Callback-URL (z.B. ",(0,i.kt)("strong",{parentName:"p"},(0,i.kt)("a",{parentName:"strong",href:"http://localhost:8080/callback"},"http://localhost:8080/callback")),") vorher in der Anwendungskonfiguration hinzugef\xfcgt haben."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"const CasdoorSDK = new Sdk(sdkConfig);\nCasdoorSDK.signin_redirect();\n")),(0,i.kt)("h3",{id:"4token-erhalten-und-speichern"},"4.Token erhalten und speichern"),(0,i.kt)("p",null,"Nachdem die Casdoor-\xdcberpr\xfcfung bestanden ist, wird sie mit Token zur\xfcck zu Ihrer Anwendung umgeleitet."),(0,i.kt)("p",null,"Sie k\xf6nnen sich daf\xfcr entscheiden, ein Cookie zu verwenden, um das Token zu speichern."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},'CasdoorSDK.exchangeForAccessToken()\n  .then((res) => {\n    if (res && res.access_token) {\n      //Get Token\n      return CasdoorSDK.getUserInfo(res.access_token);\n    }\n  })\n  .then((res) => {\n    // Storage Token\n    Cookies.set("casdoorUser", JSON.stringify(res));\n  });\n')),(0,i.kt)("p",null,"Sie k\xf6nnen sich auf die offizielle Casdoor-Dokumentation f\xfcr die ",(0,i.kt)("a",{parentName:"p",href:"https://casdoor.org/docs/how-to-connect/sdk/#how-to-use-casdoor-sdk"},"Verwendung des Casdoor SDK")," beziehen."),(0,i.kt)("h2",{id:"schritt-4-authentifizierungsfunktion-der-middleware-hinzuf\xfcgen"},"Schritt 4: Authentifizierungsfunktion der Middleware hinzuf\xfcgen"),(0,i.kt)("p",null,"Wenn Benutzer versuchen, auf eine gesch\xfctzte Route zuzugreifen, \xfcberpr\xfcft die Authentifizierungsfunktion der Middleware ihre Identit\xe4t. Wenn der Benutzer nicht authentifiziert ist, wird er zu einer Anmeldeseite umgeleitet oder der Zugang wird verweigert."),(0,i.kt)("h3",{id:"beispiel-2"},"Beispiel"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"import Cookies from \"js-cookie\";\n\nconst protectedRoutes = [\"/profile\"];\n\nexport default function ({route, redirect}) {\n  const casdoorUserCookie = Cookies.get('casdoorUser');\n  const isAuthenticated = !!casdoorUserCookie;\n\n  if (!isAuthenticated && protectedRoutes.includes(route.path)) {\n    redirect('/login');\n  }\n}\n")))}c.isMDXComponent=!0}}]);