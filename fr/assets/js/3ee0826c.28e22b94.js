"use strict";(self.webpackChunkcasdoor_website=self.webpackChunkcasdoor_website||[]).push([[342],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>m});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var o=a.createContext({}),u=function(e){var t=a.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=u(e.components);return a.createElement(o.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,o=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),d=u(n),m=r,k=d["".concat(o,".").concat(m)]||d[m]||c[m]||i;return n?a.createElement(k,l(l({ref:t},p),{},{components:n})):a.createElement(k,l({ref:t},p))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,l=new Array(i);l[0]=d;var s={};for(var o in t)hasOwnProperty.call(t,o)&&(s[o]=t[o]);s.originalType=e,s.mdxType="string"==typeof e?e:r,l[1]=s;for(var u=2;u<i;u++)l[u]=n[u];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},72405:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>l,default:()=>c,frontMatter:()=>i,metadata:()=>s,toc:()=>u});var a=n(87462),r=(n(67294),n(3905));const i={title:"AWS Client VPN",description:"Utiliser Casdoor en tant que fournisseur d'identit\xe9 SAML",keywords:["SAML","IdP"],authors:["UsherFall"]},l=void 0,s={unversionedId:"how-to-connect/saml/aws",id:"how-to-connect/saml/aws",title:"AWS Client VPN",description:"Utiliser Casdoor en tant que fournisseur d'identit\xe9 SAML",source:"@site/i18n/fr/docusaurus-plugin-content-docs/current/how-to-connect/saml/aws.md",sourceDirName:"how-to-connect/saml",slug:"/how-to-connect/saml/aws",permalink:"/fr/docs/how-to-connect/saml/aws",draft:!1,editUrl:"https://github.com/casdoor/casdoor-website/edit/master/docs/how-to-connect/saml/aws.md",tags:[],version:"current",frontMatter:{title:"AWS Client VPN",description:"Utiliser Casdoor en tant que fournisseur d'identit\xe9 SAML",keywords:["SAML","IdP"],authors:["UsherFall"]},sidebar:"tutorialSidebar",previous:{title:"Aper\xe7u",permalink:"/fr/docs/how-to-connect/saml/overview"},next:{title:"Keycloak",permalink:"/fr/docs/how-to-connect/saml/keycloak"}},o={},u=[{value:"Casdoor en tant que fournisseur d&#39;identit\xe9 SAML dans AWS Client VPN",id:"casdoor-en-tant-que-fournisseur-didentit\xe9-saml-dans-aws-client-vpn",level:2},{value:"Pr\xe9requis",id:"pr\xe9requis",level:2},{value:"Configurer l&#39;application SAML",id:"configurer-lapplication-saml",level:2},{value:"Configurer AWS",id:"configurer-aws",level:2},{value:"Configurer Casdoor en tant que fournisseur d&#39;identit\xe9 AWS",id:"configurer-casdoor-en-tant-que-fournisseur-didentit\xe9-aws",level:3},{value:"Cr\xe9er un point de terminaison VPN client AWS",id:"cr\xe9er-un-point-de-terminaison-vpn-client-aws",level:3},{value:"Associer un VPN client \xe0 un VPC cible",id:"associer-un-vpn-client-\xe0-un-vpc-cible",level:3},{value:"Configurer l&#39;autorisation sp\xe9cifique au groupe SAML",id:"configurer-lautorisation-sp\xe9cifique-au-groupe-saml",level:3},{value:"Se connecter au VPN client",id:"se-connecter-au-vpn-client",level:2}],p={toc:u};function c(e){let{components:t,...i}=e;return(0,r.kt)("wrapper",(0,a.Z)({},p,i,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"casdoor-en-tant-que-fournisseur-didentit\xe9-saml-dans-aws-client-vpn"},"Casdoor en tant que fournisseur d'identit\xe9 SAML dans AWS Client VPN"),(0,r.kt)("p",null,"Ce guide vous montrera comment configurer Casdoor et AWS Client VPN pour ajouter Casdoor en tant que fournisseur d'identit\xe9 SAML dans AWS Client VPN."),(0,r.kt)("h2",{id:"pr\xe9requis"},"Pr\xe9requis"),(0,r.kt)("p",null,"Pour compl\xe9ter cette configuration, vous aurez besoin de :"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Un compte AWS avec des droits administratifs pour acc\xe9der aux param\xe8tres de configuration du fournisseur de services.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Un Amazon VPC avec une instance EC2"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://docs.aws.amazon.com/zh_cn/vpc/latest/userguide/vpc-getting-started.html"},"Configurer le VPC")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://docs.aws.amazon.com/zh_cn/AWSEC2/latest/UserGuide/EC2_GetStarted.html"},"Lancer une instance EC2"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Dans le groupe de s\xe9curit\xe9 de l'instance, autoriser le trafic ICMP provenant de la plage CIDR du VPC - cela est n\xe9cessaire pour les tests."))))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Un certificat priv\xe9 import\xe9 dans ",(0,r.kt)("a",{parentName:"p",href:"https://aws.amazon.com/cn/certificate-manager/"},"AWS Certificate Manager (ACM)")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://docs.aws.amazon.com/zh_cn/vpn/latest/clientvpn-admin/what-is.html"},"G\xe9n\xe9rer et importer un certificat dans ACM")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Un syst\xe8me Windows ou Mac ex\xe9cutant le dernier logiciel AWS Client VPN."),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://aws.amazon.com/cn/vpn/client-vpn-download/"},"T\xe9l\xe9chargez le logiciel"))))),(0,r.kt)("h2",{id:"configurer-lapplication-saml"},"Configurer l'application SAML"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Dans l'application Casdoor, d\xe9finissez l'",(0,r.kt)("inlineCode",{parentName:"li"},"URL de redirection")," sur ",(0,r.kt)("inlineCode",{parentName:"li"},"urn:amazon:webservices:clientvpn"),".")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"saml_aws_redirect_url.png",src:n(29984).Z,width:"1676",height:"1144"})),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"D\xe9finissez l'",(0,r.kt)("inlineCode",{parentName:"li"},"URL de r\xe9ponse SAML")," sur ",(0,r.kt)("inlineCode",{parentName:"li"},"http://127.0.0.1:35001"),".")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"saml_aws_reply_url.png",src:n(44307).Z,width:"1506",height:"840"})),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Enregistrez le contenu dans les ",(0,r.kt)("inlineCode",{parentName:"li"},"m\xe9tadonn\xe9es SAML")," sous forme de fichier XML.")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"saml_aws_metadata.png",src:n(96587).Z,width:"2780",height:"748"})),(0,r.kt)("h2",{id:"configurer-aws"},"Configurer AWS"),(0,r.kt)("h3",{id:"configurer-casdoor-en-tant-que-fournisseur-didentit\xe9-aws"},"Configurer Casdoor en tant que fournisseur d'identit\xe9 AWS"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Ouvrez la console IAM et s\xe9lectionnez ",(0,r.kt)("strong",{parentName:"p"},"Fournisseurs d'identit\xe9")," dans la barre de navigation.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Cliquez sur ",(0,r.kt)("strong",{parentName:"p"},"Cr\xe9er un fournisseur"),".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Sp\xe9cifiez SAML pour le type de fournisseur, ajoutez un nom unique pour ce fournisseur et t\xe9l\xe9chargez le document de m\xe9tadonn\xe9es - le m\xeame fichier que vous avez enregistr\xe9 depuis l'application Casdoor dans la section pr\xe9c\xe9dente.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Cliquez sur ",(0,r.kt)("strong",{parentName:"p"},"\xc9tape suivante"),". Sur l'\xe9cran suivant, cliquez sur ",(0,r.kt)("strong",{parentName:"p"},"Cr\xe9er"),"."))),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"saml_aws_create.png",src:n(89004).Z,width:"2720",height:"1206"})),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"saml_aws_choose_metadata.png",src:n(26080).Z,width:"1810",height:"1104"})),(0,r.kt)("h3",{id:"cr\xe9er-un-point-de-terminaison-vpn-client-aws"},"Cr\xe9er un point de terminaison VPN client AWS"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Ouvrez la console Amazon VPC dans une r\xe9gion AWS de votre choix.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Dans la navigation de gauche, s\xe9lectionnez ",(0,r.kt)("strong",{parentName:"p"},"Points de terminaison VPN client")," sous ",(0,r.kt)("strong",{parentName:"p"},"R\xe9seau priv\xe9 virtuel (VPN)"),".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Cliquez sur ",(0,r.kt)("strong",{parentName:"p"},"Cr\xe9er un point de terminaison VPN client"),".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Entrez la plage d'adresses IP pour vos utilisateurs distants dans le champ ",(0,r.kt)("strong",{parentName:"p"},"CIDR IPv4 client")," pour allouer une plage d'adresses IP.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Pour ",(0,r.kt)("strong",{parentName:"p"},"ARN du certificat serveur"),", s\xe9lectionnez le certificat que vous avez cr\xe9\xe9.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Pour les options d'authentification, s\xe9lectionnez ",(0,r.kt)("strong",{parentName:"p"},"Utiliser l'authentification bas\xe9e sur l'utilisateur"),", puis ",(0,r.kt)("strong",{parentName:"p"},"Authentification f\xe9d\xe9r\xe9e"),".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Pour ",(0,r.kt)("strong",{parentName:"p"},"ARN du fournisseur SAML"),", s\xe9lectionnez le fournisseur d'identit\xe9 que vous avez cr\xe9\xe9.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Cliquez sur ",(0,r.kt)("strong",{parentName:"p"},"Cr\xe9er un point de terminaison VPN client"),"."))),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"saml_aws_vpn_endpoint.png",src:n(23539).Z,width:"2800",height:"704"})),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"saml_aws_create_vpn.png",src:n(81674).Z,width:"1596",height:"1232"})),(0,r.kt)("h3",{id:"associer-un-vpn-client-\xe0-un-vpc-cible"},"Associer un VPN client \xe0 un VPC cible"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"S\xe9lectionnez ",(0,r.kt)("strong",{parentName:"p"},"Associations de r\xe9seau cible")," dans les options VPN client, puis cliquez sur ",(0,r.kt)("strong",{parentName:"p"},"Associer le r\xe9seau cible"),".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Dans le menu d\xe9roulant, s\xe9lectionnez le VPC cible et le sous-r\xe9seau que vous souhaitez associer \xe0 votre point de terminaison."))),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"saml_aws_target_network.png",src:n(21010).Z,width:"2792",height:"1226"})),(0,r.kt)("h3",{id:"configurer-lautorisation-sp\xe9cifique-au-groupe-saml"},"Configurer l'autorisation sp\xe9cifique au groupe SAML"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Choisissez l'onglet ",(0,r.kt)("strong",{parentName:"p"},"R\xe8gles d'autorisation")," dans vos options VPN client et cliquez sur ",(0,r.kt)("strong",{parentName:"p"},"Ajouter une r\xe8gle d'autorisation"),".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Pour le r\xe9seau de destination \xe0 activer, sp\xe9cifiez l'adresse IP de votre instance EC2 cr\xe9\xe9e dans les pr\xe9requis. Par exemple, ",(0,r.kt)("inlineCode",{parentName:"p"},"172.31.16.0/20"),".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Sous Accorder l'acc\xe8s \xe0, s\xe9lectionnez ",(0,r.kt)("strong",{parentName:"p"},"Autoriser l'acc\xe8s aux utilisateurs dans un groupe d'acc\xe8s sp\xe9cifique"),". Par exemple, ",(0,r.kt)("inlineCode",{parentName:"p"},"casdoor"),".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Fournissez une description facultative et cliquez sur ",(0,r.kt)("strong",{parentName:"p"},"Ajouter une r\xe8gle d'autorisation"),"."))),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"saml_aws_rule.png",src:n(60420).Z,width:"1636",height:"1228"})),(0,r.kt)("h2",{id:"se-connecter-au-vpn-client"},"Se connecter au VPN client"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"S\xe9lectionnez le point de terminaison VPN client que vous venez de cr\xe9er. Il devrait maintenant \xeatre dans l'\xe9tat Disponible.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Cliquez sur ",(0,r.kt)("strong",{parentName:"p"},"T\xe9l\xe9charger la configuration client")," pour t\xe9l\xe9charger le profil de configuration sur votre bureau.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Ouvrez l'application de bureau AWS Client VPN sur votre machine.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Dans le menu sup\xe9rieur, s\xe9lectionnez Fichier et G\xe9rer les profils.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Cliquez sur Ajouter un profil et indiquez le fichier r\xe9cemment t\xe9l\xe9charg\xe9.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Vous devriez maintenant voir le profil dans la liste sur le logiciel AWS Client VPN. S\xe9lectionnez-le et cliquez sur Connecter."))),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"saml_aws_download.png",src:n(19303).Z,width:"2762",height:"1202"})),(0,r.kt)("video",{src:"/video/saml_aws.mp4",controls:"controls",width:"100%"}))}c.isMDXComponent=!0},26080:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/saml_aws_choose_metadata-03a549be89dc751e9fd2d7010b3c1e64.png"},89004:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/saml_aws_create-7ba7254466b4227d6e54ef961afa667d.png"},81674:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/saml_aws_create_vpn-d8bbc595d25d862d98c407867d78a5b9.png"},19303:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/saml_aws_download-90aa0d174201c9b1f5dd07dfaeffc2ac.png"},96587:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/saml_aws_metadata-3e50a3c4d4eb20b91f65e4360bc24f1b.png"},29984:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/saml_aws_redirect_url-0f2682850b9a51fec5b58831f4f91566.png"},44307:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/saml_aws_reply_url-bdeed2e8e71987a8378c75016fec2b0d.png"},60420:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/saml_aws_rule-92a9e746b662c901dab47f7f80949371.png"},21010:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/saml_aws_target_network-f29fac01d7049a42983061212ba83ef7.png"},23539:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/saml_aws_vpn_endpoint-8c18603d3d8947a56ccbbb4773450715.png"}}]);