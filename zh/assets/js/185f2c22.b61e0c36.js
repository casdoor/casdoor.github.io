"use strict";(self.webpackChunkcasdoor_website=self.webpackChunkcasdoor_website||[]).push([[7395],{99476:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>h,frontMatter:()=>n,metadata:()=>s,toc:()=>c});var a=o(87462),r=(o(67294),o(3905));o(61839);const n={title:"ELK",description:"Casdoor/elk-auth-casdoor\u6982\u89c8",keywords:["ELK"]},i=void 0,s={unversionedId:"integration/go/elk",id:"integration/go/elk",title:"ELK",description:"Casdoor/elk-auth-casdoor\u6982\u89c8",source:"@site/i18n/zh/docusaurus-plugin-content-docs/current/integration/go/elk.md",sourceDirName:"integration/go",slug:"/integration/go/elk",permalink:"/zh/docs/integration/go/elk",draft:!1,editUrl:"https://crowdin.com/project/casdoor-website/zh-CN",tags:[],version:"current",frontMatter:{title:"ELK",description:"Casdoor/elk-auth-casdoor\u6982\u89c8",keywords:["ELK"]},sidebar:"tutorialSidebar",previous:{title:"BookStack",permalink:"/zh/docs/integration/go/bookstack"},next:{title:"Gitea",permalink:"/zh/docs/integration/go/gitea"}},l={},c=[{value:"Casdoor/elk-auth-casdoor\u6982\u89c8",id:"casdoorelk-auth-casdoor\u6982\u89c8",level:2},{value:"\u5982\u4f55\u4f7f\u7528\uff1f",id:"\u5982\u4f55\u4f7f\u7528",level:2}],d={toc:c};function h(e){let{components:t,...o}=e;return(0,r.kt)("wrapper",(0,a.Z)({},d,o,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"casdoorelk-auth-casdoor\u6982\u89c8"},"Casdoor/elk-auth-casdoor\u6982\u89c8"),(0,r.kt)("p",null,'One of the biggest drawbacks of ELK (Elasticsearch, Logstash and Kibana) is that originally, these products have no authentication mechanism, so that everyone can visit the kibana dashboard as long as he has the url of kibana, or ES urls. Later ELK integrated an embedded authentication system "Xpack", whose all advanced functions  ',(0,r.kt)("strong",{parentName:"p"},"are not free")," (eg. Oauth, OIDC, LDAP, SAML), and only plain authentication (setting a set of accounts and passwords) is free of charge, which is quite inconvenient. \u6211\u4eec\u4e0d\u80fd\u4e3a\u6bcf\u4e2a\u4eba\u63d0\u4f9b\u4e00\u4e2a\u72ec\u7279\u7684\u5e10\u6237\u3002"),(0,r.kt)("p",null,"\u56e0\u6b64\uff0c\u6211\u4eec\u5df2\u7ecf\u5f00\u53d1\u4e86\u4e00\u4e2a\u57fa\u4e8e Cassdoor ",(0,r.kt)("strong",{parentName:"p"},"\u514d\u8d39\u7684 elk \u8ba4\u8bc1\u89e3\u51b3\u65b9\u6848\u3002 \u5f00\u6e90\u548c\u7ef4\u62a4\u4e2d\uff0c\u652f\u6301\u5927\u91cf\u9ad8\u7ea7\u529f\u80fd"),"\u3002 Casdoor is a centralized authentication/ Single-Sign-On platform based on Oauth2.0/OIDC, and casdoor/elk-auth-casdoor is actually a reverse proxy, which is designed to intercept all http data flow toward the elk/kibana, and guides the users who haven't logged in to log in. \u53ea\u8981\u7528\u6237\u5df2\u767b\u5f55\uff0c\u6b64\u9006\u5411\u4ee3\u7406\u5c06\u5b8c\u5168\u900f\u660e\u3002"),(0,r.kt)("p",null,"If this user hasn't been correctly authenticated, the request will be temporally  cached, and the user will be redirected to Casdoor login page. After user logs in through casdoor, the cached request will be restored and sent to kibana. \u56e0\u6b64\uff0c\u5982\u679c\u4e00\u4e2aPOST\u8bf7\u6c42\uff08\u6216GET\u4ee5\u5916\u7684\u5176\u4ed6\u8bf7\u6c42\uff09\u88ab\u62e6\u622a\uff0c\u4e5f\u662f\u53ef\u4ee5\u7684\uff0c\u7528\u6237\u4e0d\u9700\u8981\u91cd\u65b0\u586b\u5199\u8868\u683c\u548c\u91cd\u65b0\u53d1\u9001\u8bf7\u6c42\u3002 \u9006\u5411\u4ee3\u7406\u5c06\u4e3a\u4f60\u8bb0\u4f4f\u5b83\u3002"),(0,r.kt)("p",null,"Castor/elk-auth-casdoor \u7248\u672c\u5e93\u7684\u4f4d\u7f6e ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/casdoor/elk-auth-casdoor"},"https://github.com/casdoor/elk-auth-casdoor")),(0,r.kt)("h2",{id:"\u5982\u4f55\u4f7f\u7528"},"\u5982\u4f55\u4f7f\u7528\uff1f"),(0,r.kt)("ol",{start:0},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u5df2\u5b89\u88c5golang\u73af\u5883")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u8f6c\u5230 ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/casdoor/elk-auth-casdoor"},"casdoor/elk-auth-casdoor")," \u5e76\u83b7\u53d6\u4ee3\u7801")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u5c06\u60a8\u7684\u4ee3\u7406\u6ce8\u518c\u4e3aCasdoor\u5e94\u7528\u7a0b\u5e8f\u3002")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u4fee\u6539\u914d\u7f6e"))),(0,r.kt)("p",null,'\u914d\u7f6e\u6587\u4ef6\u4f4d\u4e8e"conf/app.conf"\u4e2d\u3002 Here is an example, and you should customize changes according to your real demands.'),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ini"},'appname = .\n# port on which the reverse proxy shall be run\nhttpport = 8080\nrunmode = dev\n#EDIT IT IF NECESSARY. The url of this reverse proxy\npluginEndpoint="http://localhost:8080"\n#EDIT IT IF NECESSARY. The url of the kibana \ntargetEndpoint="http://localhost:5601"\n#EDIT IT. The url of casdoor \ncasdoorEndpoint="http://localhost:8000"\n#EDIT IT. The clientID of your reverse proxy in casdoor  \nclientID=ceb6eb261ab20174548d\n#EDIT IT. The clientSecret of your reverse proxy in casdoor \nclientSecret=af928f0ef1abc1b1195ca58e0e609e9001e134f4\n#EDIT IT. The application name of your reverse proxy in casdoor \nappName=ELKProxy\n#EDIT IT. The organization to which your reverse proxy belongs in casdoor\norganization=built-in\n')),(0,r.kt)("ol",{start:4},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u8bbf\u95ee ",(0,r.kt)("a",{parentName:"p",href:"http://localhost:8080"},"http://localhost:8080")," (\u5728\u4e0a\u6587\u793a\u4f8b\u4e2d) \u5e76\u6309\u7167\u91cd\u5b9a\u5411\u6307\u5357\u767b\u5f55\uff0c\u60a8\u5c06\u4f1a\u770b\u5230kibana\u53d7casdoor\u7684\u4fdd\u62a4\u548c\u8ba4\u8bc1\u3002")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"If everything works well, don't forget to block the visits of original kibana's port coming from outside by configurating your firewall(or something else), so that outsiders can only visit kibana via this reverse proxy."))))}h.isMDXComponent=!0}}]);