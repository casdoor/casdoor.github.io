"use strict";(self.webpackChunkcasdoor_website=self.webpackChunkcasdoor_website||[]).push([[5653],{3905:function(e,t,n){n.d(t,{Zo:function(){return d},kt:function(){return m}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},d=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),c=p(n),m=r,k=c["".concat(s,".").concat(m)]||c[m]||u[m]||o;return n?a.createElement(k,i(i({ref:t},d),{},{components:n})):a.createElement(k,i({ref:t},d))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=c;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var p=2;p<o;p++)i[p]=n[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},8215:function(e,t,n){var a=n(7294);t.Z=function(e){var t=e.children,n=e.hidden,r=e.className;return a.createElement("div",{role:"tabpanel",hidden:n,className:r},t)}},5064:function(e,t,n){n.d(t,{Z:function(){return p}});var a=n(7294),r=n(9443);var o=function(){var e=(0,a.useContext)(r.Z);if(null==e)throw new Error('"useUserPreferencesContext" is used outside of "Layout" component.');return e},i=n(6010),l="tabItem_1uMI",s="tabItemActive_2DSg";var p=function(e){var t,n=e.lazy,r=e.block,p=e.defaultValue,d=e.values,u=e.groupId,c=e.className,m=a.Children.toArray(e.children),k=null!=d?d:m.map((function(e){return{value:e.props.value,label:e.props.label}})),h=null!=p?p:null==(t=m.find((function(e){return e.props.default})))?void 0:t.props.value,f=o(),g=f.tabGroupChoices,N=f.setTabGroupChoices,b=(0,a.useState)(h),v=b[0],y=b[1],w=[];if(null!=u){var C=g[u];null!=C&&C!==v&&k.some((function(e){return e.value===C}))&&y(C)}var x=function(e){var t=e.currentTarget,n=w.indexOf(t),a=k[n].value;y(a),null!=u&&(N(u,a),setTimeout((function(){var e,n,a,r,o,i,l,p;(e=t.getBoundingClientRect(),n=e.top,a=e.left,r=e.bottom,o=e.right,i=window,l=i.innerHeight,p=i.innerWidth,n>=0&&o<=p&&r<=l&&a>=0)||(t.scrollIntoView({block:"center",behavior:"smooth"}),t.classList.add(s),setTimeout((function(){return t.classList.remove(s)}),2e3))}),150))},O=function(e){var t,n=null;switch(e.key){case"ArrowRight":var a=w.indexOf(e.target)+1;n=w[a]||w[0];break;case"ArrowLeft":var r=w.indexOf(e.target)-1;n=w[r]||w[w.length-1]}null==(t=n)||t.focus()};return a.createElement("div",{className:"tabs-container"},a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.Z)("tabs",{"tabs--block":r},c)},k.map((function(e){var t=e.value,n=e.label;return a.createElement("li",{role:"tab",tabIndex:v===t?0:-1,"aria-selected":v===t,className:(0,i.Z)("tabs__item",l,{"tabs__item--active":v===t}),key:t,ref:function(e){return w.push(e)},onKeyDown:O,onFocus:x,onClick:x},null!=n?n:t)}))),n?(0,a.cloneElement)(m.filter((function(e){return e.props.value===v}))[0],{className:"margin-vert--md"}):a.createElement("div",{className:"margin-vert--md"},m.map((function(e,t){return(0,a.cloneElement)(e,{key:t,hidden:e.props.value!==v})}))))}},9443:function(e,t,n){var a=(0,n(7294).createContext)(void 0);t.Z=a},3129:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return p},contentTitle:function(){return d},metadata:function(){return u},toc:function(){return c},default:function(){return k}});var a=n(7462),r=n(3366),o=(n(7294),n(3905)),i=n(5064),l=n(8215),s=["components"],p={sidebar_position:1,title:"Install Guide"},d=void 0,u={unversionedId:"basic/installation",id:"basic/installation",isDocsHomePage:!1,title:"Install Guide",description:"Requirement",source:"@site/i18n/ru/docusaurus-plugin-content-docs/current/basic/installation.mdx",sourceDirName:"basic",slug:"/basic/installation",permalink:"/ru/docs/basic/installation",editUrl:"https://github.com/casdoor/casdoor-website/tree/master/docs/basic/installation.mdx",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,title:"Install Guide"},sidebar:"tutorialSidebar",previous:{title:"Overview",permalink:"/ru/docs/overview"},next:{title:"Basic Introduction",permalink:"/ru/docs/basic/basic-concept-introduction"}},c=[{value:"Requirement",id:"requirement",children:[]},{value:"Installation",id:"installation",children:[]},{value:"Config",id:"config",children:[]},{value:"Run",id:"run",children:[{value:"Manully",id:"manully",children:[]},{value:"Docker",id:"docker",children:[]}]},{value:"Some details",id:"some-details",children:[]},{value:"Build &amp; Publish (using nginx in linux)",id:"build--publish-using-nginx-in-linux",children:[{value:"Build Forentend",id:"build-forentend",children:[]},{value:"Build &amp; Run Backend",id:"build--run-backend",children:[]},{value:"Setup Nginx",id:"setup-nginx",children:[]}]}],m={toc:c};function k(e){var t=e.components,p=(0,r.Z)(e,s);return(0,o.kt)("wrapper",(0,a.Z)({},m,p,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"requirement"},"Requirement"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://golang.org/dl/"},"Golang")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://nodejs.org/en/download/"},"Node.js")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://yarnpkg.com/en/"},"Yarn"))),(0,o.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"We strongly suggest you use ",(0,o.kt)("strong",{parentName:"p"},"Yarn")," to install Casdoor, using npm might cause wrong position of widgets, for more details, please see ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/casbin/casdoor/issues/294"},"casdoor#294")))),(0,o.kt)("h2",{id:"installation"},"Installation"),(0,o.kt)("p",null,"It is very simple to install Casdoor, you can use ",(0,o.kt)("inlineCode",{parentName:"p"},"go get")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"go get github.com/casbin/casdoor\n")),(0,o.kt)("p",null,"or use ",(0,o.kt)("inlineCode",{parentName:"p"},"git clone")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"git clone https://github.com/casbin/casdoor\n")),(0,o.kt)("h2",{id:"config"},"Config"),(0,o.kt)("p",null,"All configures are placed in ",(0,o.kt)("inlineCode",{parentName:"p"},"conf/"),", including ",(0,o.kt)("inlineCode",{parentName:"p"},"app.conf")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"oss.conf"),". The former stores application-related information, while the latter only stores OSS-related configuration. You can modify two files to set all configures."),(0,o.kt)("p",null,"But for the first time of use, you don\u2019t need to figure out everything, which will be introduced later. Now you just need a few simple configures to run casdoor on your personal computer."),(0,o.kt)("p",null,"Nevertheless, the database info should be configured first. Casdoor uses ",(0,o.kt)("a",{parentName:"p",href:"https://xorm.io/"},"XORM")," framework to connect to DB, so all DBs supported by XORM can also be used."),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"Setup database (MySQL):"),(0,o.kt)("p",{parentName:"li"},"Casdoor will store its users, nodes and topics information in a MySQL database named: ",(0,o.kt)("inlineCode",{parentName:"p"},"casdoor"),", will create it if not existed. The DB connection string can be specified at: ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/casbin/casdoor/blob/master/conf/app.conf"},"https://github.com/casbin/casdoor/blob/master/conf/app.conf")),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-ini"},"driverName = mysql\ndataSourceName = root:123@tcp(localhost:3306)/\ndbName = casdoor\n"))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"Setup database (Postgres):"),(0,o.kt)("p",{parentName:"li"},"Since we must choose a database when opening Postgres with xorm, you should prepare a database manually before running Casdoor."),(0,o.kt)("p",{parentName:"li"},"Let's assume that you have already prepared a database called ",(0,o.kt)("inlineCode",{parentName:"p"},"casdoor"),", then you should specify ",(0,o.kt)("inlineCode",{parentName:"p"},"app.conf")," like this:"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-ini"},'driverName = postgres\ndataSourceName = "user=postgres password=xxx sslmode=disable dbname="\ndbName = casdoor\n')),(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"Please notice:")," You can add Postgres parameters in ",(0,o.kt)("inlineCode",{parentName:"p"},"dataSourceName"),", but please make sure that ",(0,o.kt)("inlineCode",{parentName:"p"},"dataSourceName")," ends with ",(0,o.kt)("inlineCode",{parentName:"p"},"dbname="),". Or database adapter may crash when you launch Casdoor.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"Other database..."))),(0,o.kt)("h2",{id:"run"},"Run"),(0,o.kt)("p",null,"There are currently two methods to start, you can choose one according to your own situation."),(0,o.kt)("h3",{id:"manully"},"Manully"),(0,o.kt)("p",null,"According to actual needs, it is divided into ",(0,o.kt)("inlineCode",{parentName:"p"},"dev")," mode and ",(0,o.kt)("inlineCode",{parentName:"p"},"prod")," mode"),(0,o.kt)("h4",{id:"dev-environment"},"Dev Environment"),(0,o.kt)("p",null,"After completing the above simple configuration steps, you can run Casdoor. Casdoor has a front-end back-end separation architecture. The frontend uses javascript and React, backend uses ",(0,o.kt)("a",{parentName:"p",href:"https://beego.me/"},"beego")," and xorm."),(0,o.kt)("h5",{id:"backend"},"Backend"),(0,o.kt)("p",null,"You can start the backend server with this command,"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"go run main.go\n")),(0,o.kt)("p",null,"After the server is successfully running on the specific port, then we can start the frontend part."),(0,o.kt)("h5",{id:"frontend"},"Frontend"),(0,o.kt)("p",null,"Casdoor's package management tool uses npm and yarn, so you can choose any. Open a new terminal and run:"),(0,o.kt)(i.Z,{defaultValue:"yarn",values:[{label:"Yarn",value:"yarn"},{label:"npm",value:"npm"}],mdxType:"Tabs"},(0,o.kt)(l.Z,{value:"yarn",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"yarn install\nyarn run start\n"))),(0,o.kt)(l.Z,{value:"npm",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"npm install\nnpm run start\n")))),(0,o.kt)("p",null,"Open your favorite browser and visit ",(0,o.kt)("strong",{parentName:"p"},"http://localhost:7001"),", you will see the login page of Casdoor."),(0,o.kt)("h4",{id:"produnction-environment"},"Produnction Environment"),(0,o.kt)("h5",{id:"frontend-1"},"Frontend"),(0,o.kt)("p",null,"Build static pages:"),(0,o.kt)(i.Z,{defaultValue:"yarn",values:[{label:"Yarn",value:"yarn"},{label:"npm",value:"npm"}],mdxType:"Tabs"},(0,o.kt)(l.Z,{value:"yarn",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"yarn run build\n"))),(0,o.kt)(l.Z,{value:"npm",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"npm run build\n")))),(0,o.kt)("h5",{id:"backend-1"},"Backend"),(0,o.kt)("p",null,"We build the project and there will be an executable file ",(0,o.kt)("strong",{parentName:"p"},"casdoor"),", then we start the service:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"go build && ./casdoor\n")),(0,o.kt)("p",null,"Well done, next visit ",(0,o.kt)("strong",{parentName:"p"},"http://SERVER_IP:8000")," in your favorite browser, if you can see login page of Casdoor, it means everything is ok!"),(0,o.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"To customize the port, please edit the ",(0,o.kt)("inlineCode",{parentName:"h5"},"conf/app.conf")," file to set another port to set up Casdoor. :::")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"})),(0,o.kt)("p",null,"In ",(0,o.kt)("strong",{parentName:"p"},"dev")," environment, the frontend is run by ",(0,o.kt)("inlineCode",{parentName:"p"},"npm run")," in port 7001, so if you want to go to Casdoor login page, you need set Casdoor link as ",(0,o.kt)("strong",{parentName:"p"},"http://localhost:7001"),"."),(0,o.kt)("p",null,"In ",(0,o.kt)("strong",{parentName:"p"},"prod")," environment, the frontend files is first built by ",(0,o.kt)("inlineCode",{parentName:"p"},"npm build")," and served in port 8000, so if you want to go to Casdoor login page, you need to set Casdoor link as ",(0,o.kt)("strong",{parentName:"p"},"http://SERVER_IP:8000")," (If you are using reverse proxy, you need to set the link as ",(0,o.kt)("strong",{parentName:"p"},"your domain"),")."),(0,o.kt)("h4",{id:"take-our-official-forum-casnode-as-an-example"},"Take our official forum Casnode as an example:"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://casnode.org"},"Casnode")," uses Casdoor to handle authentication."),(0,o.kt)("p",null,"When we are testing Casnode in ",(0,o.kt)("strong",{parentName:"p"},"dev")," environment, we set the ",(0,o.kt)("inlineCode",{parentName:"p"},"serverUrl")," as http://localhost:7001, so when we test signin and signup functionality using Casdoor, it will go to localhost 7001 which is the Casdoor port."),(0,o.kt)("p",null,"And when we put Casnode to ",(0,o.kt)("strong",{parentName:"p"},"prod")," environment, we set the ",(0,o.kt)("inlineCode",{parentName:"p"},"serverUrl")," as ",(0,o.kt)("a",{parentName:"p",href:"https://door.casbin.com"},"https://door.casbin.com"),", so users can signin or signup using Casdoor."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Casnode Example",src:n(1650).Z})," :::"),(0,o.kt)("h3",{id:"docker"},"Docker"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"Install ",(0,o.kt)("inlineCode",{parentName:"p"},"Docker")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"Docker-compose"),", refer to ",(0,o.kt)("a",{parentName:"p",href:"https://docs.docker.com/get-docker/"},"docker")," and ",(0,o.kt)("a",{parentName:"p",href:"https://docs.docker.com/compose/install/"},"docker-compose"))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"vi conf/app.conf")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"Modify ",(0,o.kt)("inlineCode",{parentName:"p"},"dataSourceName = root:123@tcp(localhost:3306)/")," to ",(0,o.kt)("inlineCode",{parentName:"p"},"dataSourceName = root:123@tcp("),"db",(0,o.kt)("inlineCode",{parentName:"p"},":3306)/"))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"Execute the following command"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"docker-compose up\n"))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"Open browser:"),(0,o.kt)("p",{parentName:"li"},"http://localhost:8000/ :::tip"),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"MySQL")," and ",(0,o.kt)("inlineCode",{parentName:"li"},"Casdoor server")," are in different docker containers."),(0,o.kt)("li",{parentName:"ul"},"After modifying ",(0,o.kt)("inlineCode",{parentName:"li"},"conf/app.conf"),", re-execute ",(0,o.kt)("inlineCode",{parentName:"li"},"docker-compose up"))),(0,o.kt)("p",{parentName:"li"},":::"))),(0,o.kt)("h2",{id:"some-details"},"Some details"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"Github corner"),(0,o.kt)("p",{parentName:"li"},"We added a Github icon in the upper right corner, linking to your Github repository address. You could set ",(0,o.kt)("inlineCode",{parentName:"p"},"ShowGithubCorner")," to hidden it."),(0,o.kt)("p",{parentName:"li"},"Configuration:"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},'export const ShowGithubCorner = true\n\nexport const GithubRepo = "https://github.com/casbin/casdoor" //your github repository\n'))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"OSS conf"),(0,o.kt)("p",{parentName:"li"},"We use an OSS to store and provide user avatars. You must modify the file ",(0,o.kt)("inlineCode",{parentName:"p"},"conf/oss.conf")," to tell the backend your OSS info. For OSS providers, we support Aliyun(",(0,o.kt)("inlineCode",{parentName:"p"},"[aliyun]"),"), awss3(",(0,o.kt)("inlineCode",{parentName:"p"},"[s3]"),") now."),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-conf"},"[provider]\naccessId = id\naccessKey = key\nbucket = bucket\nendpoint = endpoint\n")),(0,o.kt)("p",{parentName:"li"},"Please fill out this conf correctly, or the avatar server won't work!")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"App conf"),(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"conf/app.conf")," stores the important configuration of casdoor, which is very helpful for you to use Casdoor better."),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-json"},'appname = casdoor\nhttpport = 8000\nrunmode = dev\nSessionOn = true\ncopyrequestbody = true\ndriverName = mysql\ndataSourceName = root:123@tcp(localhost:3306)/\ndbName = casdoor\nauthState = "casdoor"\nuseProxy = false\nverificationCodeTimeout = 10\n')),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"appname")," is the application name, which currently has no practical use"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"httpport")," is the port that your back-end application is listening on"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"runmode")," is ",(0,o.kt)("inlineCode",{parentName:"li"},"dev")," or ",(0,o.kt)("inlineCode",{parentName:"li"},"prod")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"SessionOn")," decides whether to enable session,used by default."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"driverName"),", ",(0,o.kt)("inlineCode",{parentName:"li"},"dataSourceName")," and ",(0,o.kt)("inlineCode",{parentName:"li"},"dbName")," are introduced before, please see ",(0,o.kt)("a",{parentName:"li",href:"#config"},"Config"),"."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"useProxy")," set the proxy port, because we have google-related services, which will be restricted by the network in some areas"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"verificationCodeTimeout")," set the expiration time of the verification code. After the expiration, the user needs to obtain it again"))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"If casdoor needs to be publicly accessible(possess public IP), also need to modify ",(0,o.kt)("inlineCode",{parentName:"p"},"web/src/auth/Auth.js"),":"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},'export let authConfig = {\n  serverUrl: "http://example.com", // your Casdoor URL, like the official one: https://door.casbin.com, or http:1.1.1.1:8000\n  ...\n}\n')))),(0,o.kt)("h2",{id:"build--publish-using-nginx-in-linux"},"Build & Publish (using nginx in linux)"),(0,o.kt)("p",null,"  Before building and publishing, we should do these things first:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Install go (The version can not lower than 1.14).",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://golang.org/doc/install"},"https://golang.org/doc/install")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"http://docscn.studygolang.com/doc/install"},"http://docscn.studygolang.com/doc/install")," (for Chinese)"))),(0,o.kt)("li",{parentName:"ul"},"Install yarn (Since the installation process of yarn is parallel, the speed of yarn is much faster than npm)",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://classic.yarnpkg.com/en/docs/install/#windows-stable"},"https://classic.yarnpkg.com/en/docs/install/#windows-stable")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://yarn.bootcss.com/docs/install/#windows-stable"},"https://yarn.bootcss.com/docs/install/#windows-stable")," (for Chinese)"))),(0,o.kt)("li",{parentName:"ul"},"Install nginx: ",(0,o.kt)("inlineCode",{parentName:"li"},"sudo apt-get install nginx"))),(0,o.kt)("h3",{id:"build-forentend"},"Build Forentend"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'$ cd web/\n$ yarn  # install the dependencies\n$ yarn build  # build the forentend, the output path should be: "/casdoor/web/build"\n')),(0,o.kt)("h3",{id:"build--run-backend"},"Build & Run Backend"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"$ cd ..\n$ go mod tidy # install the dependencies\n$ go build main.go    # build\n$ ./main  # run Backend (default port is 8000)\n")),(0,o.kt)("h3",{id:"setup-nginx"},"Setup Nginx"),(0,o.kt)("h4",{id:"edit-nginxconf"},"Edit nginx.conf"),(0,o.kt)("p",null,'  Generally speaking, you could find this file: "/etc/nginx/nginx.conf"'),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-nginx"},'server {\n    listen          80;       # listen on port 80\n\n    if ($http_user_agent ~ MSIE){\n        return 403;\n    }\n\n    location / {\n        index index.html; \n        root /casdoor/web/build;  # the Frontend build files path\n        try_files $uri $uri/ /index.html; # importent\n    }\n\n\n    location /api {\n        proxy_pass        http://127.0.0.1:8000/api;  # the endpoint + "/api", in this case, endpoint is "localhost"\n        proxy_set_header  X-Real-IP  $remote_addr;\n    }\n}\n')))}k.isMDXComponent=!0},6010:function(e,t,n){function a(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=a(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function r(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=a(e))&&(r&&(r+=" "),r+=t);return r}n.d(t,{Z:function(){return r}})},1650:function(e,t,n){t.Z=n.p+"assets/images/casnodeexample-06892ab1a66c35c830aa85d51c8f75ed.png"}}]);