"use strict";(self.webpackChunkcasdoor_website=self.webpackChunkcasdoor_website||[]).push([[4991],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>m});var i=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=i.createContext({}),p=function(e){var t=i.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=p(e.components);return i.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},d=i.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),d=p(n),m=a,k=d["".concat(l,".").concat(m)]||d[m]||u[m]||r;return n?i.createElement(k,o(o({ref:t},c),{},{components:n})):i.createElement(k,o({ref:t},c))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,o=new Array(r);o[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:a,o[1]=s;for(var p=2;p<r;p++)o[p]=n[p];return i.createElement.apply(null,o)}return i.createElement.apply(null,n)}d.displayName="MDXCreateElement"},22048:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>r,metadata:()=>s,toc:()=>p});var i=n(87462),a=(n(67294),n(3905));const r={title:"Jenkins OIDC",description:"Utilisation du protocole OIDC en tant qu'IDP pour connecter diverses applications, comme Jenkins",keywords:["OIDC","Jenkins","IDP"],authors:["Abingcbc"]},o=void 0,s={unversionedId:"integration/java/jenkins-oidc",id:"integration/java/jenkins-oidc",title:"Jenkins OIDC",description:"Utilisation du protocole OIDC en tant qu'IDP pour connecter diverses applications, comme Jenkins",source:"@site/i18n/fr/docusaurus-plugin-content-docs/current/integration/java/jenkins-oidc.md",sourceDirName:"integration/java",slug:"/integration/java/jenkins-oidc",permalink:"/fr/docs/integration/java/jenkins-oidc",draft:!1,editUrl:"https://github.com/casdoor/casdoor-website/edit/master/docs/integration/java/jenkins-oidc.md",tags:[],version:"current",frontMatter:{title:"Jenkins OIDC",description:"Utilisation du protocole OIDC en tant qu'IDP pour connecter diverses applications, comme Jenkins",keywords:["OIDC","Jenkins","IDP"],authors:["Abingcbc"]},sidebar:"tutorialSidebar",previous:{title:"Plugin Jenkins",permalink:"/fr/docs/integration/java/jenkins-plugin"},next:{title:"Jira",permalink:"/fr/docs/category/jira"}},l={},p=[{value:"\xc9tape 1 : D\xe9ployer Casdoor et Jenkins",id:"\xe9tape-1--d\xe9ployer-casdoor-et-jenkins",level:2},{value:"\xc9tape 2 : Configurer l&#39;application Casdoor",id:"\xe9tape-2--configurer-lapplication-casdoor",level:2},{value:"\xc9tape 3 : Configurer Jenkins",id:"\xe9tape-3--configurer-jenkins",level:2}],c={toc:p};function u(e){let{components:t,...r}=e;return(0,a.kt)("wrapper",(0,i.Z)({},c,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Casdoor peut utiliser le protocole OIDC en tant qu'IDP pour connecter diverses applications. Dans cet exemple, nous utiliserons Jenkins pour d\xe9montrer comment utiliser OIDC pour se connecter \xe0 vos applications."),(0,a.kt)("p",null,"Voici certains des noms utilis\xe9s dans la configuration :"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"p"},"CASDOOR_HOSTNAME")," : Le nom de domaine ou l'IP o\xf9 le serveur Casdoor est d\xe9ploy\xe9.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"p"},"JENKINS_HOSTNAME")," : Le nom de domaine ou l'IP o\xf9 Jenkins est d\xe9ploy\xe9."))),(0,a.kt)("h2",{id:"\xe9tape-1--d\xe9ployer-casdoor-et-jenkins"},"\xc9tape 1 : D\xe9ployer Casdoor et Jenkins"),(0,a.kt)("p",null,"Tout d'abord, d\xe9ployez ",(0,a.kt)("a",{parentName:"p",href:"/docs/basic/server-installation"},"Casdoor")," et ",(0,a.kt)("a",{parentName:"p",href:"https://www.jenkins.io/doc/book/installing/"},"Jenkins"),"."),(0,a.kt)("p",null,"Apr\xe8s un d\xe9ploiement r\xe9ussi, assurez-vous de ce qui suit :"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"D\xe9finissez l'URL de Jenkins (G\xe9rer Jenkins -> Configurer le syst\xe8me -> Emplacement de Jenkins) sur ",(0,a.kt)("inlineCode",{parentName:"p"},"JENKINS_HOSTNAME"),". ",(0,a.kt)("img",{alt:"URL de Jenkins",src:n(25742).Z,width:"1887",height:"825"}))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Assurez-vous que Casdoor peut \xeatre connect\xe9 et utilis\xe9 normalement.")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"D\xe9finissez la valeur ",(0,a.kt)("inlineCode",{parentName:"p"},"origin")," de Casdoor (conf/app.conf) sur ",(0,a.kt)("inlineCode",{parentName:"p"},"CASDOOR_HOSTNAME"),". ",(0,a.kt)("img",{alt:"Configuration de Casdoor",src:n(66496).Z,width:"1013",height:"448"})))),(0,a.kt)("h2",{id:"\xe9tape-2--configurer-lapplication-casdoor"},"\xc9tape 2 : Configurer l'application Casdoor"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Cr\xe9ez une nouvelle application Casdoor ou utilisez-en une existante.")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Ajoutez une URL de redirection : ",(0,a.kt)("inlineCode",{parentName:"p"},"http://JENKINS_HOSTNAME/securityRealm/finishLogin")," ",(0,a.kt)("img",{alt:"Param\xe8tres de l&#39;application Casdoor",src:n(9871).Z,width:"1366",height:"581"}))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Ajoutez le fournisseur que vous souhaitez et fournissez les param\xe8tres suppl\xe9mentaires."))),(0,a.kt)("p",null,"Vous obtiendrez deux valeurs de la page des param\xe8tres de l'application : ",(0,a.kt)("inlineCode",{parentName:"p"},"Client ID")," et ",(0,a.kt)("inlineCode",{parentName:"p"},"Client secret"),". Nous utiliserons ces valeurs \xe0 l'\xe9tape suivante."),(0,a.kt)("p",null,"Ouvrez votre navigateur pr\xe9f\xe9r\xe9 et visitez : ",(0,a.kt)("strong",{parentName:"p"},"http://",(0,a.kt)("inlineCode",{parentName:"strong"},"CASDOOR_HOSTNAME"),"/.well-known/openid-configuration")," pour voir la configuration OIDC de Casdoor."),(0,a.kt)("h2",{id:"\xe9tape-3--configurer-jenkins"},"\xc9tape 3 : Configurer Jenkins"),(0,a.kt)("p",null,"Tout d'abord, nous devons installer ",(0,a.kt)("a",{parentName:"p",href:"https://plugins.jenkins.io/oic-auth/"},"OpenId Connect Authentication")," car Jenkins ne prend pas en charge nativement OIDC."),(0,a.kt)("p",null,"Une fois l'installation termin\xe9e, allez dans ",(0,a.kt)("strong",{parentName:"p"},"G\xe9rer Jenkins")," -> ",(0,a.kt)("strong",{parentName:"p"},"Configurer la s\xe9curit\xe9 globale"),". ",(0,a.kt)("img",{alt:"s\xe9curit\xe9 globale de Jenkins",src:n(4289).Z,width:"1902",height:"876"})),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"Assurez-vous de sauvegarder le fichier ",(0,a.kt)("inlineCode",{parentName:"p"},"config.xml")," de Jenkins pour pouvoir r\xe9cup\xe9rer en cas d'erreurs de configuration.")),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Dans le contr\xf4le d'acc\xe8s, s\xe9lectionnez ",(0,a.kt)("inlineCode",{parentName:"p"},"Login with Openid Connect")," comme ",(0,a.kt)("strong",{parentName:"p"},"Domaine de s\xe9curit\xe9"),".")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Sp\xe9cifiez le ",(0,a.kt)("inlineCode",{parentName:"p"},"Client ID")," not\xe9 ci-dessus dans le champ ",(0,a.kt)("strong",{parentName:"p"},"Client ID"),".")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Sp\xe9cifiez le ",(0,a.kt)("inlineCode",{parentName:"p"},"Client secret")," not\xe9 ci-dessus dans le champ ",(0,a.kt)("strong",{parentName:"p"},"Client secret"),".")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Dans le mode de configuration, s\xe9lectionnez ",(0,a.kt)("inlineCode",{parentName:"p"},"Configuration automatique")," et entrez ",(0,a.kt)("strong",{parentName:"p"},"http://",(0,a.kt)("inlineCode",{parentName:"strong"},"CASDOOR_HOSTNAME"),"/.well-known/openid-configuration")," comme point de terminaison de configuration bien connu. ",(0,a.kt)("img",{alt:"Param\xe8tres de Jenkins",src:n(2498).Z,width:"1410",height:"631"})),(0,a.kt)("p",{parentName:"li"},"Si votre Casdoor est d\xe9ploy\xe9 localement, vous devrez peut-\xeatre s\xe9lectionner ",(0,a.kt)("inlineCode",{parentName:"p"},"Configuration manuelle")," et fournir les informations suivantes :"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"URL du serveur de jetons : ",(0,a.kt)("strong",{parentName:"li"},"http://",(0,a.kt)("inlineCode",{parentName:"strong"},"CASDOOR_HOSTNAME"),"/api/login/oauth/access_token")),(0,a.kt)("li",{parentName:"ul"},"URL du serveur d'autorisation : ",(0,a.kt)("strong",{parentName:"li"},"http://",(0,a.kt)("inlineCode",{parentName:"strong"},"CASDOOR_HOSTNAME"),"/login/oauth/authorize")),(0,a.kt)("li",{parentName:"ul"},"URL du serveur UserInfo : ",(0,a.kt)("strong",{parentName:"li"},"http://",(0,a.kt)("inlineCode",{parentName:"strong"},"CASDOOR_HOSTNAME"),"/api/get-account")),(0,a.kt)("li",{parentName:"ul"},"Port\xe9es : ",(0,a.kt)("inlineCode",{parentName:"li"},"address phone openid profile offline_access email")," ",(0,a.kt)("img",{alt:"Configuration manuelle",src:n(38517).Z,width:"1361",height:"548"})))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Cliquez sur ",(0,a.kt)("strong",{parentName:"p"},"Param\xe8tres avanc\xe9s")," et remplissez ce qui suit :"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"Dans le champ Nom d'utilisateur, sp\xe9cifiez ",(0,a.kt)("inlineCode",{parentName:"li"},"name"),"."),(0,a.kt)("li",{parentName:"ul"},"Dans le champ Nom complet, sp\xe9cifiez ",(0,a.kt)("inlineCode",{parentName:"li"},"displayName"),"."),(0,a.kt)("li",{parentName:"ul"},"Dans le champ Email, sp\xe9cifiez ",(0,a.kt)("inlineCode",{parentName:"li"},"email"),".")),(0,a.kt)("p",{parentName:"li"},(0,a.kt)("img",{alt:"Param\xe9trage du champ Userinfo",src:n(80215).Z,width:"1550",height:"613"}))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Dans la section ",(0,a.kt)("strong",{parentName:"p"},"Autorisation"),", activez \xab Les utilisateurs connect\xe9s peuvent tout faire \xbb et d\xe9sactivez \xab Autoriser l'acc\xe8s en lecture anonyme \xbb. Vous pouvez configurer une autorisation plus complexe plus tard, mais pour l'instant, v\xe9rifiez si OpenID fonctionne correctement."),(0,a.kt)("p",{parentName:"li"},"D\xe9connectez-vous de Jenkins, et cela devrait vous rediriger vers Casdoor pour l'authentification.",(0,a.kt)("img",{alt:"Page de connexion Jenkins",src:n(2845).Z,width:"1383",height:"769"})))))}u.isMDXComponent=!0},66496:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/casdoor_origin-8f5d9e44f6b58828ce69e6e6d896e122.png"},9871:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/appseeting_jenkins-6e0a2968614d0735005951278f44c008.png"},2498:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/jenkins_auto-acde42e269bf8ed09bf57320d1eecdc0.png"},80215:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/jenkins_field-31b28e80dce83b780c934c68648ed0e1.png"},4289:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/jenkins_global_security-0f4feee9caf8c58579f9275e1f281333.png"},2845:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/jenkins_login-d7c2179fcdc73e29ca6b90c494cba55b.png"},38517:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/jenkins_manual-e28d6e6af536025049ea2a3a22f38eb3.png"},25742:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/jenkins_url-9e8f261138a88501bdfce79ee1c1f3fa.png"}}]);