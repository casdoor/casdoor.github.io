"use strict";(self.webpackChunkcasdoor_website=self.webpackChunkcasdoor_website||[]).push([[1741],{3905:(e,r,t)=>{t.d(r,{Zo:()=>u,kt:()=>m});var n=t(67294);function o(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function a(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function i(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?a(Object(t),!0).forEach((function(r){o(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function s(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var p=n.createContext({}),l=function(e){var r=n.useContext(p),t=r;return e&&(t="function"==typeof e?e(r):i(i({},r),e)),t},u=function(e){var r=l(e.components);return n.createElement(p.Provider,{value:r},e.children)},c={inlineCode:"code",wrapper:function(e){var r=e.children;return n.createElement(n.Fragment,{},r)}},d=n.forwardRef((function(e,r){var t=e.components,o=e.mdxType,a=e.originalType,p=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),d=l(t),m=o,k=d["".concat(p,".").concat(m)]||d[m]||c[m]||a;return t?n.createElement(k,i(i({ref:r},u),{},{components:t})):n.createElement(k,i({ref:r},u))}));function m(e,r){var t=arguments,o=r&&r.mdxType;if("string"==typeof e||o){var a=t.length,i=new Array(a);i[0]=d;var s={};for(var p in r)hasOwnProperty.call(r,p)&&(s[p]=r[p]);s.originalType=e,s.mdxType="string"==typeof e?e:o,i[1]=s;for(var l=2;l<a;l++)i[l]=t[l];return n.createElement.apply(null,i)}return n.createElement.apply(null,t)}d.displayName="MDXCreateElement"},7221:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>p,contentTitle:()=>i,default:()=>c,frontMatter:()=>a,metadata:()=>s,toc:()=>l});var n=t(87462),o=(t(67294),t(3905));const a={title:"OAuth Personnalis\xe9",description:"Ajoutez votre fournisseur OAuth personnalis\xe9 \xe0 Casdoor",keywords:["Fournisseur Personnalis\xe9","OAuth","Casdoor"],authors:["halozhy"]},i=void 0,s={unversionedId:"provider/oauth/CustomProvider",id:"provider/oauth/CustomProvider",title:"OAuth Personnalis\xe9",description:"Ajoutez votre fournisseur OAuth personnalis\xe9 \xe0 Casdoor",source:"@site/i18n/fr/docusaurus-plugin-content-docs/current/provider/oauth/CustomProvider.md",sourceDirName:"provider/oauth",slug:"/provider/oauth/CustomProvider",permalink:"/fr/docs/provider/oauth/CustomProvider",draft:!1,editUrl:"https://github.com/casdoor/casdoor-website/edit/master/docs/provider/oauth/CustomProvider.md",tags:[],version:"current",frontMatter:{title:"OAuth Personnalis\xe9",description:"Ajoutez votre fournisseur OAuth personnalis\xe9 \xe0 Casdoor",keywords:["Fournisseur Personnalis\xe9","OAuth","Casdoor"],authors:["halozhy"]},sidebar:"tutorialSidebar",previous:{title:"Azure AD B2C",permalink:"/fr/docs/provider/oauth/azureADb2c"},next:{title:"Okta",permalink:"/fr/docs/provider/oauth/okta"}},p={},l=[],u={toc:l};function c(e){let{components:r,...a}=e;return(0,o.kt)("wrapper",(0,n.Z)({},u,a,{components:r,mdxType:"MDXLayout"}),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},"Casdoor prend en charge les fournisseurs personnalis\xe9s. Cependant, les fournisseurs personnalis\xe9s doivent suivre le processus standard de l'OAuth \xe0 3 jambes, et les valeurs de retour de ",(0,o.kt)("inlineCode",{parentName:"p"},"Token URL")," et ",(0,o.kt)("inlineCode",{parentName:"p"},"UserInfo URL")," doivent se conformer au format sp\xe9cifi\xe9 par Casdoor.")),(0,o.kt)("p",null,"Pour cr\xe9er un nouveau fournisseur personnalis\xe9, naviguez vers la page des fournisseurs de Casdoor, et s\xe9lectionnez \xab Personnalis\xe9 \xbb dans le champ Type. Vous devrez ensuite remplir ",(0,o.kt)("inlineCode",{parentName:"p"},"Client ID"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"Client Secret"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"Auth URL"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"Scope"),",",(0,o.kt)("inlineCode",{parentName:"p"},"Token URL"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"UserInfo URL"),", et ",(0,o.kt)("inlineCode",{parentName:"p"},"Favicon"),"."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"image-20220418100744005",src:t(38744).Z,width:"685",height:"676"})),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"Auth URL")," est l'adresse de la page de connexion OAuth du fournisseur personnalis\xe9."),(0,o.kt)("p",{parentName:"li"},"Si vous remplissez ",(0,o.kt)("inlineCode",{parentName:"p"},"https://door.casdoor.com/login/oauth/authorize")," comme l'",(0,o.kt)("inlineCode",{parentName:"p"},"Auth URL"),", alors, lorsqu'un utilisateur se connecte avec ce fournisseur personnalis\xe9, le navigateur redirigera d'abord vers"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-url"},"https://door.casdoor.com/login/oauth/authorize?client_id={ClientID}&redirect_uri=https://{your-casdoor-hostname}/callback&state={State_generated_by_Casdoor}&response_type=code&scope={Scope}` \n")),(0,o.kt)("p",{parentName:"li"},"Apr\xe8s que l'autorisation est compl\xe9t\xe9e, le fournisseur personnalis\xe9 devrait rediriger vers"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-url"},"https://{your-casdoor-hostname}/callback?code={code}\n")),(0,o.kt)("p",{parentName:"li"},"Apr\xe8s cette \xe9tape, Casdoor reconna\xeetra le param\xe8tre code dans l'URL.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"Scope")," est le param\xe8tre de port\xe9e transmis lors de l'acc\xe8s \xe0 l'",(0,o.kt)("inlineCode",{parentName:"p"},"Auth URL"),", et vous devriez le remplir selon les exigences du fournisseur personnalis\xe9.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"Token URL")," est le point de terminaison de l'API pour obtenir l'accessToken."),(0,o.kt)("p",{parentName:"li"},"Une fois que vous obtenez le code \xe0 l'\xe9tape pr\xe9c\xe9dente, Casdoor devrait l'utiliser pour obtenir l'accessToken."),(0,o.kt)("p",{parentName:"li"},"Si vous remplissez ",(0,o.kt)("inlineCode",{parentName:"p"},"https://door.casdoor.com/api/login/oauth/access_token")," comme le ",(0,o.kt)("inlineCode",{parentName:"p"},"Token URL"),", alors Casdoor y acc\xe9dera en utilisant la commande suivante"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'curl -X POST -u "{ClientID}:{ClientSecret}" --data-binary "code={code}&grant_type=authorization_code&redirect_uri=https://{your-casdoor-hostname}/callback" https://door.casdoor.com/api/login/oauth/access_token\n')),(0,o.kt)("p",{parentName:"li"},"Le fournisseur personnalis\xe9 devrait retourner au moins les informations suivantes :"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "access_token": "eyJhbGciOiJSUzI1NiIsImtpZCI6Ixxxxxxxxxxxxxx",\n  "refresh_token": "eyJhbGciOiJSUzI1NiIsInR5cCI6xxxxxxxxxxxxxx",\n  "token_type": "Bearer",\n  "expires_in": 10080,\n  "scope": "openid profile email"\n}\n'))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"UserInfo URL")," est le point de terminaison de l'API pour obtenir les informations de l'utilisateur via l'accessToken."),(0,o.kt)("p",{parentName:"li"},"Si vous remplissez ",(0,o.kt)("inlineCode",{parentName:"p"},"https://door.casdoor.com/api/userinfo")," comme le ",(0,o.kt)("inlineCode",{parentName:"p"},"UserInfo URL"),", alors Casdoor y acc\xe9dera en utilisant la commande suivante"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'curl -X GET -H "Authorization: Bearer {accessToken}" https://door.casdoor.com/api/userinfo\n')),(0,o.kt)("p",{parentName:"li"},"Le fournisseur personnalis\xe9 devrait retourner au moins les informations suivantes :"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "name": "admin",\n  "preferred_username": "Admin",\n  "email": "admin@example.com",\n  "picture": "https://casbin.org/img/casbin.svg"\n}\n'))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"Favicon")," est l'URL du logo d'un fournisseur personnalis\xe9."),(0,o.kt)("p",{parentName:"li"},"Ce logo sera affich\xe9 sur la page de connexion de Casdoor avec les autres fournisseurs de connexion tiers."))))}c.isMDXComponent=!0},38744:(e,r,t)=>{t.d(r,{Z:()=>n});const n=t.p+"assets/images/customprovider-16ebdacc5cde9ec89c0fb2cd4d42a536.png"}}]);