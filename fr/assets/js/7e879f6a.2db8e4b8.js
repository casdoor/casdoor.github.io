"use strict";(self.webpackChunkcasdoor_website=self.webpackChunkcasdoor_website||[]).push([[2327],{3905:(e,t,n)=>{n.d(t,{Zo:()=>l,kt:()=>m});var r=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var u=r.createContext({}),c=function(e){var t=r.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},l=function(e){var t=c(e.components);return r.createElement(u.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,u=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),d=c(n),m=o,f=d["".concat(u,".").concat(m)]||d[m]||p[m]||a;return n?r.createElement(f,i(i({ref:t},l),{},{components:n})):r.createElement(f,i({ref:t},l))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=d;var s={};for(var u in t)hasOwnProperty.call(t,u)&&(s[u]=t[u]);s.originalType=e,s.mdxType="string"==typeof e?e:o,i[1]=s;for(var c=2;c<a;c++)i[c]=n[c];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},19598:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>i,default:()=>p,frontMatter:()=>a,metadata:()=>s,toc:()=>c});var r=n(87462),o=(n(67294),n(3905));const a={title:"ELK",description:"Pr\xe9sentation de casdoor/elk-auth-casdoor",keywords:["ELK"],authors:["ComradeProgrammer"]},i=void 0,s={unversionedId:"integration/go/elk",id:"integration/go/elk",title:"ELK",description:"Pr\xe9sentation de casdoor/elk-auth-casdoor",source:"@site/i18n/fr/docusaurus-plugin-content-docs/current/integration/go/elk.md",sourceDirName:"integration/go",slug:"/integration/go/elk",permalink:"/fr/docs/integration/go/elk",draft:!1,editUrl:"https://github.com/casdoor/casdoor-website/edit/master/docs/integration/go/elk.md",tags:[],version:"current",frontMatter:{title:"ELK",description:"Pr\xe9sentation de casdoor/elk-auth-casdoor",keywords:["ELK"],authors:["ComradeProgrammer"]},sidebar:"tutorialSidebar",previous:{title:"Bytebase",permalink:"/fr/docs/integration/go/Bytebase"},next:{title:"Gitea",permalink:"/fr/docs/integration/go/gitea"}},u={},c=[{value:"Pr\xe9sentation de casdoor/elk-auth-casdoor",id:"pr\xe9sentation-de-casdoorelk-auth-casdoor",level:2},{value:"Comment l&#39;ex\xe9cuter ?",id:"comment-lex\xe9cuter-",level:2}],l={toc:c};function p(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,r.Z)({},l,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"pr\xe9sentation-de-casdoorelk-auth-casdoor"},"Pr\xe9sentation de casdoor/elk-auth-casdoor"),(0,o.kt)("p",null,"L'un des plus grands inconv\xe9nients d'ELK (Elasticsearch, Logstash et Kibana) est qu'\xe0 l'origine, ces produits n'avaient aucun m\xe9canisme d'authentification. En cons\xe9quence, toute personne disposant de l'URL de Kibana ou Elasticsearch pouvait acc\xe9der au tableau de bord Kibana. Plus tard, ELK a int\xe9gr\xe9 un syst\xe8me d'authentification int\xe9gr\xe9 appel\xe9 \"Xpack\". Cependant, ses fonctions avanc\xe9es (telles que OAuth, OIDC, LDAP, SAML) ne sont pas gratuites. Seule l'authentification simple, utilisant un ensemble de comptes et de mots de passe, est disponible gratuitement, ce qui est assez g\xeanant. Cette approche ne nous permet pas de fournir un compte unique pour chacun dans une entreprise."),(0,o.kt)("p",null,"Pour r\xe9soudre ce probl\xe8me, nous avons d\xe9velopp\xe9 une solution d'authentification elk bas\xe9e sur Casdoor. Cette solution est gratuite, open-source, en maintenance continue et prend en charge un large \xe9ventail de fonctionnalit\xe9s avanc\xe9es. Casdoor est une plateforme d'authentification centralis\xe9e/Single-Sign-On bas\xe9e sur OAuth 2.0/OIDC. Casdoor/elk-auth-casdoor sert de proxy inverse con\xe7u pour intercepter tout le flux de donn\xe9es HTTP vers la pile ELK/Kibana. Il guide les utilisateurs qui ne se sont pas connect\xe9s \xe0 se connecter. Ce proxy inverse fonctionne de mani\xe8re transparente tant que l'utilisateur est connect\xe9."),(0,o.kt)("p",null,"Si un utilisateur n'a pas \xe9t\xe9 correctement authentifi\xe9, la requ\xeate sera temporairement mise en cache et l'utilisateur sera redirig\xe9 vers la page de connexion Casdoor. Une fois que l'utilisateur se connecte via Casdoor, la requ\xeate mise en cache sera restaur\xe9e et envoy\xe9e \xe0 Kibana. Par cons\xe9quent, si une requ\xeate POST (ou tout autre type de requ\xeate autre que GET) est intercept\xe9e, l'utilisateur n'aura pas besoin de remplir \xe0 nouveau le formulaire et de renvoyer la requ\xeate. Le proxy inverse se souviendra pour vous."),(0,o.kt)("p",null,"Le d\xe9p\xf4t casdoor/elk-auth-casdoor est situ\xe9 \xe0 ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/casdoor/elk-auth-casdoor"},"https://github.com/casdoor/elk-auth-casdoor"),"."),(0,o.kt)("h2",{id:"comment-lex\xe9cuter-"},"Comment l'ex\xe9cuter ?"),(0,o.kt)("ol",{start:0},(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Assurez-vous que vous avez l'environnement du langage de programmation Go install\xe9.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Allez sur ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/casdoor/elk-auth-casdoor"},"casdoor/elk-auth-casdoor")," et r\xe9cup\xe9rez le code.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Enregistrez votre proxy en tant qu'application aupr\xe8s de Casdoor.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Modifiez la configuration."),(0,o.kt)("p",{parentName:"li"},'Le fichier de configuration se trouve \xe0 "conf/app.conf". Voici un exemple, que vous devriez personnaliser en fonction de vos besoins sp\xe9cifiques.'),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-ini"},'appname = .\n# port on which the reverse proxy shall be run\nhttpport = 8080\nrunmode = dev\n# EDIT IT IF NECESSARY. The URL of this reverse proxy.\npluginEndpoint = "http://localhost:8080"\n# EDIT IT IF NECESSARY. The URL of the Kibana.\ntargetEndpoint = "http://localhost:5601"\n# EDIT IT. The URL of Casdoor.\ncasdoorEndpoint = "http://localhost:8000"\n# EDIT IT. The clientID of your reverse proxy in Casdoor.\nclientID = ceb6eb261ab20174548d\n# EDIT IT. The clientSecret of your reverse proxy in Casdoor.\nclientSecret = af928f0ef1abc1b1195ca58e0e609e9001e134f4\n# EDIT IT. The application name of your reverse proxy in Casdoor.\nappName = ELKProxy\n# EDIT IT. The organization to which your reverse proxy belongs in Casdoor.\norganization = built-in\n'))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Visitez ",(0,o.kt)("a",{parentName:"p",href:"http://localhost:8080"},"http://localhost:8080")," (dans l'exemple ci-dessus) et connectez-vous en suivant les instructions de redirection. Vous devriez alors voir Kibana prot\xe9g\xe9 et authentifi\xe9 par Casdoor.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Si tout fonctionne bien, n'oubliez pas de bloquer l'acc\xe8s externe au port Kibana original en configurant votre pare-feu (ou une autre m\xe9thode). Cela garantit que les \xe9trangers ne peuvent acc\xe9der \xe0 Kibana que via ce proxy inverse."))))}p.isMDXComponent=!0}}]);