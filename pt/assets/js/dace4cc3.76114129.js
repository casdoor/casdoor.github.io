"use strict";(self.webpackChunkcasdoor_website=self.webpackChunkcasdoor_website||[]).push([[5869],{3905:(e,o,a)=>{a.d(o,{Zo:()=>u,kt:()=>m});var t=a(67294);function r(e,o,a){return o in e?Object.defineProperty(e,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[o]=a,e}function n(e,o){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);o&&(t=t.filter((function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable}))),a.push.apply(a,t)}return a}function i(e){for(var o=1;o<arguments.length;o++){var a=null!=arguments[o]?arguments[o]:{};o%2?n(Object(a),!0).forEach((function(o){r(e,o,a[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(a,o))}))}return e}function s(e,o){if(null==e)return{};var a,t,r=function(e,o){if(null==e)return{};var a,t,r={},n=Object.keys(e);for(t=0;t<n.length;t++)a=n[t],o.indexOf(a)>=0||(r[a]=e[a]);return r}(e,o);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(t=0;t<n.length;t++)a=n[t],o.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var c=t.createContext({}),l=function(e){var o=t.useContext(c),a=o;return e&&(a="function"==typeof e?e(o):i(i({},o),e)),a},u=function(e){var o=l(e.components);return t.createElement(c.Provider,{value:o},e.children)},d={inlineCode:"code",wrapper:function(e){var o=e.children;return t.createElement(t.Fragment,{},o)}},p=t.forwardRef((function(e,o){var a=e.components,r=e.mdxType,n=e.originalType,c=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),p=l(a),m=r,g=p["".concat(c,".").concat(m)]||p[m]||d[m]||n;return a?t.createElement(g,i(i({ref:o},u),{},{components:a})):t.createElement(g,i({ref:o},u))}));function m(e,o){var a=arguments,r=o&&o.mdxType;if("string"==typeof e||r){var n=a.length,i=new Array(n);i[0]=p;var s={};for(var c in o)hasOwnProperty.call(o,c)&&(s[c]=o[c]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var l=2;l<n;l++)i[l]=a[l];return t.createElement.apply(null,i)}return t.createElement.apply(null,a)}p.displayName="MDXCreateElement"},57518:(e,o,a)=>{a.r(o),a.d(o,{assets:()=>c,contentTitle:()=>i,default:()=>d,frontMatter:()=>n,metadata:()=>s,toc:()=>l});var t=a(87462),r=(a(67294),a(3905));const n={title:"ELK",description:"Vis\xe3o geral de casdoor/elk-auth-casdoor",keywords:["ELK"],authors:["ComradeProgrammer"]},i=void 0,s={unversionedId:"integration/go/elk",id:"integration/go/elk",title:"ELK",description:"Vis\xe3o geral de casdoor/elk-auth-casdoor",source:"@site/i18n/pt/docusaurus-plugin-content-docs/current/integration/go/elk.md",sourceDirName:"integration/go",slug:"/integration/go/elk",permalink:"/pt/docs/integration/go/elk",draft:!1,editUrl:"https://github.com/casdoor/casdoor-website/edit/master/docs/integration/go/elk.md",tags:[],version:"current",frontMatter:{title:"ELK",description:"Vis\xe3o geral de casdoor/elk-auth-casdoor",keywords:["ELK"],authors:["ComradeProgrammer"]},sidebar:"tutorialSidebar",previous:{title:"Bytebase",permalink:"/pt/docs/integration/go/Bytebase"},next:{title:"Gitea",permalink:"/pt/docs/integration/go/gitea"}},c={},l=[{value:"Vis\xe3o geral de casdoor/elk-auth-casdoor",id:"vis\xe3o-geral-de-casdoorelk-auth-casdoor",level:2},{value:"Como execut\xe1-lo?",id:"como-execut\xe1-lo",level:2}],u={toc:l};function d(e){let{components:o,...a}=e;return(0,r.kt)("wrapper",(0,t.Z)({},u,a,{components:o,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"vis\xe3o-geral-de-casdoorelk-auth-casdoor"},"Vis\xe3o geral de casdoor/elk-auth-casdoor"),(0,r.kt)("p",null,'Um dos maiores inconvenientes do ELK (Elasticsearch, Logstash e Kibana) \xe9 que originalmente esses produtos n\xe3o tinham mecanismo de autentica\xe7\xe3o. Como resultado, qualquer pessoa com a URL do Kibana ou Elasticsearch poderia acessar o painel do Kibana. Posteriormente, o ELK integrou um sistema de autentica\xe7\xe3o embutido chamado "Xpack". No entanto, suas fun\xe7\xf5es avan\xe7adas (como OAuth, OIDC, LDAP, SAML) n\xe3o s\xe3o gratuitas. Apenas a autentica\xe7\xe3o simples, usando um conjunto de contas e senhas, est\xe1 dispon\xedvel gratuitamente, o que \xe9 bastante inconveniente. Essa abordagem n\xe3o nos permite fornecer uma conta \xfanica para todos em uma corpora\xe7\xe3o.'),(0,r.kt)("p",null,"Para resolver essa quest\xe3o, desenvolvemos uma solu\xe7\xe3o de autentica\xe7\xe3o elk baseada no Casdoor. Esta solu\xe7\xe3o \xe9 gratuita, de c\xf3digo aberto, em manuten\xe7\xe3o cont\xednua e suporta uma ampla gama de recursos avan\xe7ados. Casdoor \xe9 uma plataforma centralizada de autentica\xe7\xe3o/Single-Sign-On baseada em OAuth 2.0/OIDC. Casdoor/elk-auth-casdoor atua como um proxy reverso projetado para interceptar todo o fluxo de dados HTTP em dire\xe7\xe3o \xe0 pilha ELK/Kibana. Ele orienta os usu\xe1rios que n\xe3o fizeram login a se logarem. Este proxy reverso opera de forma transparente desde que o usu\xe1rio tenha feito login."),(0,r.kt)("p",null,"Se um usu\xe1rio n\xe3o foi autenticado corretamente, a solicita\xe7\xe3o ser\xe1 temporariamente armazenada em cache e o usu\xe1rio ser\xe1 redirecionado para a p\xe1gina de login do Casdoor. Uma vez que o usu\xe1rio fa\xe7a login atrav\xe9s do Casdoor, a solicita\xe7\xe3o em cache ser\xe1 restaurada e enviada para o Kibana. Portanto, se uma solicita\xe7\xe3o POST (ou qualquer outro tipo de solicita\xe7\xe3o al\xe9m de GET) for interceptada, o usu\xe1rio n\xe3o precisar\xe1 preencher o formul\xe1rio novamente e reenviar a solicita\xe7\xe3o. O proxy reverso vai se lembrar disso para voc\xea."),(0,r.kt)("p",null,"O reposit\xf3rio casdoor/elk-auth-casdoor est\xe1 localizado em ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/casdoor/elk-auth-casdoor"},"https://github.com/casdoor/elk-auth-casdoor"),"."),(0,r.kt)("h2",{id:"como-execut\xe1-lo"},"Como execut\xe1-lo?"),(0,r.kt)("ol",{start:0},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Certifique-se de que voc\xea tenha o ambiente de linguagem de programa\xe7\xe3o Go instalado.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"V\xe1 para ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/casdoor/elk-auth-casdoor"},"casdoor/elk-auth-casdoor")," e obtenha o c\xf3digo.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Registre seu proxy como um aplicativo com o Casdoor.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Modifique a configura\xe7\xe3o."),(0,r.kt)("p",{parentName:"li"},'O arquivo de configura\xe7\xe3o est\xe1 localizado em "conf/app.conf". Aqui est\xe1 um exemplo, que voc\xea deve personalizar com base em suas necessidades espec\xedficas.'),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-ini"},'appname = .\n# port on which the reverse proxy shall be run\nhttpport = 8080\nrunmode = dev\n# EDIT IT IF NECESSARY. The URL of this reverse proxy.\npluginEndpoint = "http://localhost:8080"\n# EDIT IT IF NECESSARY. The URL of the Kibana.\ntargetEndpoint = "http://localhost:5601"\n# EDIT IT. The URL of Casdoor.\ncasdoorEndpoint = "http://localhost:8000"\n# EDIT IT. The clientID of your reverse proxy in Casdoor.\nclientID = ceb6eb261ab20174548d\n# EDIT IT. The clientSecret of your reverse proxy in Casdoor.\nclientSecret = af928f0ef1abc1b1195ca58e0e609e9001e134f4\n# EDIT IT. The application name of your reverse proxy in Casdoor.\nappName = ELKProxy\n# EDIT IT. The organization to which your reverse proxy belongs in Casdoor.\norganization = built-in\n'))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Visite ",(0,r.kt)("a",{parentName:"p",href:"http://localhost:8080"},"http://localhost:8080")," (no exemplo acima) e fa\xe7a login seguindo as orienta\xe7\xf5es de redirecionamento. Voc\xea deve ent\xe3o ver o Kibana protegido e autenticado pelo Casdoor.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Se tudo funcionar bem, n\xe3o se esque\xe7a de bloquear o acesso externo \xe0 porta original do Kibana configurando seu firewall (ou outro m\xe9todo). Isso garante que pessoas de fora s\xf3 possam acessar o Kibana atrav\xe9s deste proxy reverso."))))}d.isMDXComponent=!0}}]);