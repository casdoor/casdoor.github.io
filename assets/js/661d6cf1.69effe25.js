"use strict";(self.webpackChunkcasdoor_website=self.webpackChunkcasdoor_website||[]).push([[5868],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>u});var r=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=r.createContext({}),p=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},d=function(e){var t=p(e.components);return r.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,i=e.mdxType,a=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),m=p(n),u=i,k=m["".concat(s,".").concat(u)]||m[u]||c[u]||a;return n?r.createElement(k,o(o({ref:t},d),{},{components:n})):r.createElement(k,o({ref:t},d))}));function u(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=n.length,o=new Array(a);o[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:i,o[1]=l;for(var p=2;p<a;p++)o[p]=n[p];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},48331:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>c,frontMatter:()=>a,metadata:()=>l,toc:()=>p});var r=n(87462),i=(n(67294),n(3905));const a={title:"Overview",description:"Using Email for authentication",keywords:["email"],authors:["kininaru"]},o=void 0,l={unversionedId:"provider/email/overview",id:"provider/email/overview",title:"Overview",description:"Using Email for authentication",source:"@site/docs/provider/email/overview.md",sourceDirName:"provider/email",slug:"/provider/email/overview",permalink:"/docs/provider/email/overview",draft:!1,editUrl:"https://github.com/casdoor/casdoor-website/edit/master/docs/provider/email/overview.md",tags:[],version:"current",frontMatter:{title:"Overview",description:"Using Email for authentication",keywords:["email"],authors:["kininaru"]},sidebar:"tutorialSidebar",previous:{title:"Email",permalink:"/docs/category/email"},next:{title:"SendGrid",permalink:"/docs/provider/email/sendgrid"}},s={},p=[{value:"Adding an Email provider",id:"adding-an-email-provider",level:2},{value:"Proxy configuration",id:"proxy-configuration",level:2},{value:"Modify email content",id:"modify-email-content",level:2},{value:"Available placeholders",id:"available-placeholders",level:3},{value:"Password reset link",id:"password-reset-link",level:3}],d={toc:p};function c(e){let{components:t,...a}=e;return(0,i.kt)("wrapper",(0,r.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"adding-an-email-provider"},"Adding an Email provider"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Click on ",(0,i.kt)("inlineCode",{parentName:"p"},"Add")," to add a new provider.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Select ",(0,i.kt)("inlineCode",{parentName:"p"},"Email")," under the ",(0,i.kt)("inlineCode",{parentName:"p"},"Category")," section."),(0,i.kt)("p",{parentName:"li"},(0,i.kt)("img",{alt:"Email provider",src:n(65737).Z,width:"586",height:"266"}))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Fill in the fields for ",(0,i.kt)("inlineCode",{parentName:"p"},"Username"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"Password"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"Host"),", and ",(0,i.kt)("inlineCode",{parentName:"p"},"Port")," for your SMTP service."),(0,i.kt)("p",{parentName:"li"},(0,i.kt)("img",{alt:"Email Config",src:n(19212).Z,width:"800",height:"262"}))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Customize the ",(0,i.kt)("inlineCode",{parentName:"p"},"Email Title")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"Email Content"),", then save the changes."))),(0,i.kt)("h2",{id:"proxy-configuration"},"Proxy configuration"),(0,i.kt)("p",null,"If your server cannot directly access the SMTP service (such as Gmail), you can enable the proxy option. When enabled, email traffic will be routed through the SOCKS5 proxy configured in Casdoor's configuration file."),(0,i.kt)("p",null,"To enable proxy support, toggle the ",(0,i.kt)("inlineCode",{parentName:"p"},"Enable proxy")," switch in the provider settings. This is particularly useful when connecting to external email services from restricted network environments."),(0,i.kt)("h2",{id:"modify-email-content"},"Modify email content"),(0,i.kt)("p",null,"You can customize email templates using placeholders and special tags to create dynamic content."),(0,i.kt)("h3",{id:"available-placeholders"},"Available placeholders"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},(0,i.kt)("inlineCode",{parentName:"strong"},"%{user.friendlyName}"))," - Displays the user's display name or friendly name in the email."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},(0,i.kt)("inlineCode",{parentName:"strong"},"%s"))," - Replaced with the verification code when sending authentication emails."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},(0,i.kt)("inlineCode",{parentName:"strong"},"%link"))," - The password reset link that allows users to reset their password directly from the email. This placeholder must be used within ",(0,i.kt)("inlineCode",{parentName:"p"},"<reset-link>")," tags."),(0,i.kt)("h3",{id:"password-reset-link"},"Password reset link"),(0,i.kt)("p",null,"The password reset link feature enables users to reset their password by clicking a link in the email instead of manually entering a verification code. This provides a smoother user experience for password recovery."),(0,i.kt)("p",null,"To enable password reset links in your email template:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Wrap the link content with ",(0,i.kt)("inlineCode",{parentName:"li"},"<reset-link>")," tags"),(0,i.kt)("li",{parentName:"ol"},"Use the ",(0,i.kt)("inlineCode",{parentName:"li"},"%link")," placeholder where you want the actual reset URL to appear"),(0,i.kt)("li",{parentName:"ol"},"The content inside ",(0,i.kt)("inlineCode",{parentName:"li"},"<reset-link>")," tags will only appear in password reset emails")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example with plain text:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-text"},"You have requested a verification code at Casdoor. Here is your code: %s, please enter in 5 minutes. <reset-link>Or click %link to reset</reset-link>\n")),(0,i.kt)("p",null,"When used for password reset, users will see both the verification code and a clickable link. For other verification scenarios (signup, login), only the code will be shown."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example with HTML template:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-html"},'<!DOCTYPE html>\n<html>\n<body>\n    <h2>Password Reset Request</h2>\n    <p>Hello %{user.friendlyName},</p>\n    <p>Your verification code is: <strong>%s</strong></p>\n    <p>This code will expire in 5 minutes.</p>\n    <reset-link>\n        <p>Alternatively, you can <a href="%link">click here to reset your password</a> directly.</p>\n    </reset-link>\n    <p>If you didn\'t request this, please ignore this email.</p>\n</body>\n</html>\n')),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Html template",src:n(61546).Z,width:"1296",height:"941"})),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"<reset-link>")," block is automatically removed from emails sent for other purposes like signup or login verification, ensuring the reset link only appears when appropriate."))}c.isMDXComponent=!0},61546:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/email-template-0d39f0864ca2ea48404e4282db3f4e1d.png"},19212:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/emailconfig-d340f590f357a7eb5534c0f7a94f390f.png"},65737:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/emailprovider-582f02243d3247b44879bfb455a7b0c6.png"}}]);