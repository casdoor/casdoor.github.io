"use strict";(self.webpackChunkcasdoor_website=self.webpackChunkcasdoor_website||[]).push([[1697],{3905:(e,n,t)=>{t.d(n,{Zo:()=>p,kt:()=>k});var i=t(67294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,i,r=function(e,n){if(null==e)return{};var t,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)t=a[i],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)t=a[i],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var s=i.createContext({}),d=function(e){var n=i.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},p=function(e){var n=d(e.components);return i.createElement(s.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return i.createElement(i.Fragment,{},n)}},c=i.forwardRef((function(e,n){var t=e.components,r=e.mdxType,a=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),c=d(t),k=r,m=c["".concat(s,".").concat(k)]||c[k]||u[k]||a;return t?i.createElement(m,o(o({ref:n},p),{},{components:t})):i.createElement(m,o({ref:n},p))}));function k(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var a=t.length,o=new Array(a);o[0]=c;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var d=2;d<a;d++)o[d]=t[d];return i.createElement.apply(null,o)}return i.createElement.apply(null,t)}c.displayName="MDXCreateElement"},19688:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>o,default:()=>u,frontMatter:()=>a,metadata:()=>l,toc:()=>d});var i=t(87462),r=(t(67294),t(3905));const a={title:"Jenkins OIDC",description:"Verwendung des OIDC-Protokolls als IDP zur Verbindung verschiedener Anwendungen, wie Jenkins",keywords:["OIDC","Jenkins","IDP"],authors:["Abingcbc"]},o=void 0,l={unversionedId:"integration/java/jenkins-oidc",id:"integration/java/jenkins-oidc",title:"Jenkins OIDC",description:"Verwendung des OIDC-Protokolls als IDP zur Verbindung verschiedener Anwendungen, wie Jenkins",source:"@site/i18n/de/docusaurus-plugin-content-docs/current/integration/java/jenkins-oidc.md",sourceDirName:"integration/java",slug:"/integration/java/jenkins-oidc",permalink:"/de/docs/integration/java/jenkins-oidc",draft:!1,editUrl:"https://github.com/casdoor/casdoor-website/edit/master/docs/integration/java/jenkins-oidc.md",tags:[],version:"current",frontMatter:{title:"Jenkins OIDC",description:"Verwendung des OIDC-Protokolls als IDP zur Verbindung verschiedener Anwendungen, wie Jenkins",keywords:["OIDC","Jenkins","IDP"],authors:["Abingcbc"]},sidebar:"tutorialSidebar",previous:{title:"Jenkins Plugin",permalink:"/de/docs/integration/java/jenkins-plugin"},next:{title:"Jira",permalink:"/de/docs/category/jira"}},s={},d=[{value:"Schritt 1: Casdoor und Jenkins bereitstellen",id:"schritt-1-casdoor-und-jenkins-bereitstellen",level:2},{value:"Schritt 2: Die Casdoor-Anwendung konfigurieren",id:"schritt-2-die-casdoor-anwendung-konfigurieren",level:2},{value:"Schritt 3: Jenkins konfigurieren",id:"schritt-3-jenkins-konfigurieren",level:2}],p={toc:d};function u(e){let{components:n,...a}=e;return(0,r.kt)("wrapper",(0,i.Z)({},p,a,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Casdoor kann das OIDC-Protokoll als IDP verwenden, um verschiedene Anwendungen zu verbinden. In diesem Beispiel werden wir Jenkins verwenden, um zu demonstrieren, wie man OIDC verwendet, um sich mit Ihren Anwendungen zu verbinden."),(0,r.kt)("p",null,"Die folgenden sind einige der Namen, die in der Konfiguration verwendet werden:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"CASDOOR_HOSTNAME"),": Der Domainname oder die IP, wo der Casdoor-Server bereitgestellt ist.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"JENKINS_HOSTNAME"),": Der Domainname oder die IP, wo Jenkins bereitgestellt ist."))),(0,r.kt)("h2",{id:"schritt-1-casdoor-und-jenkins-bereitstellen"},"Schritt 1: Casdoor und Jenkins bereitstellen"),(0,r.kt)("p",null,"Zuerst, deployen Sie ",(0,r.kt)("a",{parentName:"p",href:"/docs/basic/server-installation"},"Casdoor")," und ",(0,r.kt)("a",{parentName:"p",href:"https://www.jenkins.io/doc/book/installing/"},"Jenkins"),"."),(0,r.kt)("p",null,"Nach einer erfolgreichen Bereitstellung, stellen Sie sicher, dass Folgendes gegeben ist:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Setzen Sie die Jenkins URL (Manage Jenkins -> Configure System -> Jenkins Location) auf ",(0,r.kt)("inlineCode",{parentName:"p"},"JENKINS_HOSTNAME"),". ",(0,r.kt)("img",{alt:"Jenkins URL",src:t(25742).Z,width:"1887",height:"825"}))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Stellen Sie sicher, dass Casdoor angemeldet und normal verwendet werden kann.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Setze den ",(0,r.kt)("inlineCode",{parentName:"p"},"origin")," Wert von Casdoor (conf/app.conf) auf ",(0,r.kt)("inlineCode",{parentName:"p"},"CASDOOR_HOSTNAME"),". ",(0,r.kt)("img",{alt:"Casdoor Konfiguration",src:t(66496).Z,width:"1013",height:"448"})))),(0,r.kt)("h2",{id:"schritt-2-die-casdoor-anwendung-konfigurieren"},"Schritt 2: Die Casdoor-Anwendung konfigurieren"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Erstellen Sie eine neue Casdoor-Anwendung oder verwenden Sie eine bestehende.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"F\xfcgen Sie eine Redirect-URL hinzu: ",(0,r.kt)("inlineCode",{parentName:"p"},"http://JENKINS_HOSTNAME/securityRealm/finishLogin")," ",(0,r.kt)("img",{alt:"Casdoor Anwendungseinstellungen",src:t(9871).Z,width:"1366",height:"581"}))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"F\xfcgen Sie den gew\xfcnschten Anbieter hinzu und stellen Sie zus\xe4tzliche Einstellungen bereit."))),(0,r.kt)("p",null,"Sie erhalten zwei Werte von der Anwendungseinstellungsseite: ",(0,r.kt)("inlineCode",{parentName:"p"},"Client ID")," und ",(0,r.kt)("inlineCode",{parentName:"p"},"Client secret"),". Wir werden diese Werte im n\xe4chsten Schritt verwenden."),(0,r.kt)("p",null,"\xd6ffnen Sie Ihren bevorzugten Browser und besuchen Sie: ",(0,r.kt)("strong",{parentName:"p"},"http://",(0,r.kt)("inlineCode",{parentName:"strong"},"CASDOOR_HOSTNAME"),"/.well-known/openid-configuration"),", um die OIDC-Konfiguration von Casdoor zu sehen."),(0,r.kt)("h2",{id:"schritt-3-jenkins-konfigurieren"},"Schritt 3: Jenkins konfigurieren"),(0,r.kt)("p",null,"Zuerst m\xfcssen wir ",(0,r.kt)("a",{parentName:"p",href:"https://plugins.jenkins.io/oic-auth/"},"OpenId Connect Authentication")," installieren, da Jenkins OIDC nicht nativ unterst\xfctzt."),(0,r.kt)("p",null,"Nach der Installation gehen Sie zu ",(0,r.kt)("strong",{parentName:"p"},"Manage Jenkins")," -> ",(0,r.kt)("strong",{parentName:"p"},"Configure Global Security"),". ",(0,r.kt)("img",{alt:"Jenkins globale Sicherheit",src:t(4289).Z,width:"1902",height:"876"})),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"Stellen Sie sicher, dass Sie die Jenkins ",(0,r.kt)("inlineCode",{parentName:"p"},"config.xml")," Datei sichern, um im Falle von Einrichtungsfehlern wiederherstellen zu k\xf6nnen.")),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"In der Zugriffskontrolle w\xe4hlen Sie ",(0,r.kt)("inlineCode",{parentName:"p"},"Login with Openid Connect")," als ",(0,r.kt)("strong",{parentName:"p"},"Security Realm"),".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Geben Sie die oben notierte ",(0,r.kt)("inlineCode",{parentName:"p"},"Client ID")," im Feld ",(0,r.kt)("strong",{parentName:"p"},"Client ID")," an.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Geben Sie das oben notierte ",(0,r.kt)("inlineCode",{parentName:"p"},"Client secret")," im Feld ",(0,r.kt)("strong",{parentName:"p"},"Client secret")," an.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Im Konfigurationsmodus w\xe4hlen Sie ",(0,r.kt)("inlineCode",{parentName:"p"},"Automatic configuration")," und geben Sie ",(0,r.kt)("strong",{parentName:"p"},"http://",(0,r.kt)("inlineCode",{parentName:"strong"},"CASDOOR_HOSTNAME"),"/.well-known/openid-configuration")," als den Well-known configuration endpoint an. ",(0,r.kt)("img",{alt:"Jenkins&#39; Einstellungen",src:t(2498).Z,width:"1410",height:"631"})),(0,r.kt)("p",{parentName:"li"},"Wenn Ihr Casdoor lokal bereitgestellt ist, m\xfcssen Sie m\xf6glicherweise ",(0,r.kt)("inlineCode",{parentName:"p"},"Manual configuration")," w\xe4hlen und die folgenden Informationen bereitstellen:"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Token-Server-URL: ",(0,r.kt)("strong",{parentName:"li"},"http://",(0,r.kt)("inlineCode",{parentName:"strong"},"CASDOOR_HOSTNAME"),"/api/login/oauth/access_token")),(0,r.kt)("li",{parentName:"ul"},"Autorisierungsserver-URL: ",(0,r.kt)("strong",{parentName:"li"},"http://",(0,r.kt)("inlineCode",{parentName:"strong"},"CASDOOR_HOSTNAME"),"/login/oauth/authorize")),(0,r.kt)("li",{parentName:"ul"},"UserInfo-Server-URL: ",(0,r.kt)("strong",{parentName:"li"},"http://",(0,r.kt)("inlineCode",{parentName:"strong"},"CASDOOR_HOSTNAME"),"/api/get-account")),(0,r.kt)("li",{parentName:"ul"},"Scopes: ",(0,r.kt)("inlineCode",{parentName:"li"},"address phone openid profile offline_access email")," ",(0,r.kt)("img",{alt:"Manuelle Konfiguration",src:t(38517).Z,width:"1361",height:"548"})))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Klicken Sie auf ",(0,r.kt)("strong",{parentName:"p"},"Erweiterte Einstellungen")," und f\xfcllen Sie Folgendes aus:"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Im Benutzernamenfeld geben Sie ",(0,r.kt)("inlineCode",{parentName:"li"},"name")," an."),(0,r.kt)("li",{parentName:"ul"},"Im Vollst\xe4ndigen Namenfeld geben Sie ",(0,r.kt)("inlineCode",{parentName:"li"},"displayName")," an."),(0,r.kt)("li",{parentName:"ul"},"Im E-Mail-Feld geben Sie ",(0,r.kt)("inlineCode",{parentName:"li"},"email")," an.")),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{alt:"Benutzerinformationsfeld Einstellung",src:t(80215).Z,width:"1550",height:"613"}))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Im Abschnitt ",(0,r.kt)("strong",{parentName:"p"},"Autorisierung")," aktivieren Sie \u201eAngemeldete Benutzer k\xf6nnen alles tun\u201c und deaktivieren Sie \u201eAnonymen Lesezugriff erlauben\u201c. Sie k\xf6nnen sp\xe4ter eine komplexere Autorisierung konfigurieren, aber pr\xfcfen Sie zun\xe4chst, ob OpenID korrekt funktioniert."),(0,r.kt)("p",{parentName:"li"},"Melden Sie sich von Jenkins ab, und Sie sollten zur Authentifizierung an Casdoor weitergeleitet werden.",(0,r.kt)("img",{alt:"Jenkins Anmeldeseite",src:t(2845).Z,width:"1383",height:"769"})))))}u.isMDXComponent=!0},66496:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/casdoor_origin-8f5d9e44f6b58828ce69e6e6d896e122.png"},9871:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/appseeting_jenkins-6e0a2968614d0735005951278f44c008.png"},2498:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/jenkins_auto-acde42e269bf8ed09bf57320d1eecdc0.png"},80215:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/jenkins_field-31b28e80dce83b780c934c68648ed0e1.png"},4289:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/jenkins_global_security-0f4feee9caf8c58579f9275e1f281333.png"},2845:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/jenkins_login-d7c2179fcdc73e29ca6b90c494cba55b.png"},38517:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/jenkins_manual-e28d6e6af536025049ea2a3a22f38eb3.png"},25742:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/jenkins_url-9e8f261138a88501bdfce79ee1c1f3fa.png"}}]);