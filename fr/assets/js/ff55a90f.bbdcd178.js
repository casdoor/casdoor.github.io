"use strict";(self.webpackChunkcasdoor_website=self.webpackChunkcasdoor_website||[]).push([[3922],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>c});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),u=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=u(e.components);return r.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,s=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),m=u(n),c=a,k=m["".concat(s,".").concat(c)]||m[c]||d[c]||i;return n?r.createElement(k,l(l({ref:t},p),{},{components:n})):r.createElement(k,l({ref:t},p))}));function c(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,l=new Array(i);l[0]=m;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:a,l[1]=o;for(var u=2;u<i;u++)l[u]=n[u];return r.createElement.apply(null,l)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},4962:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>d,frontMatter:()=>i,metadata:()=>o,toc:()=>u});var r=n(87462),a=(n(67294),n(3905));const i={title:"Serveur LDAP",description:"Comment connecter un client LDAP dans Casdoor",keywords:["Serveur LDAP"],authors:["forestmgy"]},l=void 0,o={unversionedId:"ldap/ldapserver",id:"ldap/ldapserver",title:"Serveur LDAP",description:"Comment connecter un client LDAP dans Casdoor",source:"@site/i18n/fr/docusaurus-plugin-content-docs/current/ldap/ldapserver.md",sourceDirName:"ldap",slug:"/ldap/ldapserver",permalink:"/fr/docs/ldap/ldapserver",draft:!1,editUrl:"https://github.com/casdoor/casdoor-website/edit/master/docs/ldap/ldapserver.md",tags:[],version:"current",frontMatter:{title:"Serveur LDAP",description:"Comment connecter un client LDAP dans Casdoor",keywords:["Serveur LDAP"],authors:["forestmgy"]},sidebar:"tutorialSidebar",previous:{title:"Configuration et synchronisation des utilisateurs LDAP",permalink:"/fr/docs/ldap/config"},next:{title:"RADIUS",permalink:"/fr/docs/category/radius"}},s={},u=[{value:"Port du serveur LDAP",id:"port-du-serveur-ldap",level:3},{value:"Fonctionnement",id:"fonctionnement",level:3},{value:"Comment se Lier",id:"comment-se-lier",level:3},{value:"Comment Rechercher",id:"comment-rechercher",level:3},{value:"User Attributes",id:"user-attributes",level:4},{value:"Supported RFC-Style Features",id:"supported-rfc-style-features",level:3},{value:"Partial Root DSE Query Support",id:"partial-root-dse-query-support",level:4},{value:"Schema Query Support",id:"schema-query-support",level:4},{value:"POSIX Filters",id:"posix-filters",level:4}],p={toc:u};function d(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"De nombreux syst\xe8mes, comme ",(0,a.kt)("inlineCode",{parentName:"p"},"Nexus"),", prennent en charge l'authentification LDAP. Casdoor impl\xe9mente \xe9galement un serveur LDAP simple, qui prend en charge les op\xe9rations de liaison (bind) et de recherche (search)."),(0,a.kt)("p",null,"Ce document d\xe9crit comment se connecter au serveur LDAP dans Casdoor et mettre en \u0153uvre une authentification de connexion simple."),(0,a.kt)("h3",{id:"port-du-serveur-ldap"},"Port du serveur LDAP"),(0,a.kt)("p",null,"Le serveur LDAP \xe9coute sur le port ",(0,a.kt)("inlineCode",{parentName:"p"},"389")," par d\xe9faut. You can change the default port by modifying the ",(0,a.kt)("inlineCode",{parentName:"p"},"ldapServerPort")," value in ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/casdoor/casdoor/blob/master/conf/app.conf#L27"},"conf/app.conf"),"."),(0,a.kt)("h3",{id:"fonctionnement"},"Fonctionnement"),(0,a.kt)("p",null,"Semblable au client LDAP dans Casdoor, les utilisateurs du serveur LDAP sont tous des sous-classes de ",(0,a.kt)("inlineCode",{parentName:"p"},"posixAccount"),"."),(0,a.kt)("p",null,"Lorsque le serveur re\xe7oit un ensemble de donn\xe9es transmises par LDAP, il analysera le ",(0,a.kt)("inlineCode",{parentName:"p"},"cn")," et le ",(0,a.kt)("inlineCode",{parentName:"p"},"ou"),", o\xf9 ",(0,a.kt)("inlineCode",{parentName:"p"},"cn")," repr\xe9sente le nom d'utilisateur et ",(0,a.kt)("inlineCode",{parentName:"p"},"ou")," repr\xe9sente le nom de l'organisation. Le ",(0,a.kt)("inlineCode",{parentName:"p"},"dc")," n'a pas d'importance."),(0,a.kt)("p",null,"S'il s'agit d'une op\xe9ration de liaison, le serveur utilisera Casdoor pour v\xe9rifier le nom d'utilisateur et le mot de passe et accorder \xe0 l'utilisateur la permission dans Casdoor."),(0,a.kt)("p",null,"S'il s'agit d'une op\xe9ration de recherche, le serveur v\xe9rifiera si l'op\xe9ration de recherche est l\xe9gale, selon les permissions accord\xe9es au client par l'op\xe9ration de liaison, et retournera une r\xe9ponse."),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},"Nous ne prenons en charge que l'",(0,a.kt)("strong",{parentName:"p"},"Authentification Simple"),".")),(0,a.kt)("h3",{id:"comment-se-lier"},"Comment se Lier"),(0,a.kt)("p",null,"Dans le serveur LDAP de Casdoor, nous ne reconnaissons que le ",(0,a.kt)("inlineCode",{parentName:"p"},"DN")," similaire \xe0 ce format : ",(0,a.kt)("inlineCode",{parentName:"p"},"cn=admin,ou=built-in,dc=example,dc=com"),"."),(0,a.kt)("p",null,"Veuillez d\xe9finir le ",(0,a.kt)("inlineCode",{parentName:"p"},"DN")," de l'utilisateur admin au format ci-dessus. Ensuite, vous pouvez utiliser ce ",(0,a.kt)("inlineCode",{parentName:"p"},"DN")," pour vous lier au serveur LDAP avec le mot de passe de l'utilisateur pour vous connecter \xe0 Casdoor pour v\xe9rification. Si la v\xe9rification du serveur est r\xe9ussie, l'utilisateur se verra accorder une autorit\xe9 dans Casdoor."),(0,a.kt)("h3",{id:"comment-rechercher"},"Comment Rechercher"),(0,a.kt)("p",null,"Une fois l'op\xe9ration de liaison r\xe9ussie, vous pouvez effectuer l'op\xe9ration de recherche. Il existe quelques diff\xe9rences entre les op\xe9rations de recherche et de liaison."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"To search for a certain user, such as ",(0,a.kt)("inlineCode",{parentName:"li"},"Alice")," under the ",(0,a.kt)("inlineCode",{parentName:"li"},"built-in")," organization, you should use a ",(0,a.kt)("inlineCode",{parentName:"li"},"DN")," like this: ",(0,a.kt)("inlineCode",{parentName:"li"},"ou=built-in,dc=example,dc=com"),", and add ",(0,a.kt)("inlineCode",{parentName:"li"},"cn=Alice")," in the Filter field."),(0,a.kt)("li",{parentName:"ul"},"To search for all users under a certain organization, such as all users in ",(0,a.kt)("inlineCode",{parentName:"li"},"built-in"),", you should use a ",(0,a.kt)("inlineCode",{parentName:"li"},"DN")," like this: ",(0,a.kt)("inlineCode",{parentName:"li"},"ou=built-in,dc=example,dc=com"),", and add ",(0,a.kt)("inlineCode",{parentName:"li"},"cn=*")," in the Filter field."),(0,a.kt)("li",{parentName:"ul"},"To search for all users in all organizations (assuming the user has sufficient permissions), you should use a ",(0,a.kt)("inlineCode",{parentName:"li"},"DN")," like this: ",(0,a.kt)("inlineCode",{parentName:"li"},"ou=*,dc=example,dc=com"),", and add ",(0,a.kt)("inlineCode",{parentName:"li"},"cn=*")," in the Filter field."),(0,a.kt)("li",{parentName:"ul"},"To search for all users in a specific group, you should use a filter query like this: ",(0,a.kt)("inlineCode",{parentName:"li"},"(memberOf=organization_name/group_name)")," in the Filter field.")),(0,a.kt)("h4",{id:"user-attributes"},"User Attributes"),(0,a.kt)("p",null,"When searching for users, the LDAP server returns the following attributes for each user entry:"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Attribute"),(0,a.kt)("th",{parentName:"tr",align:null},"Description"),(0,a.kt)("th",{parentName:"tr",align:null},"Mapped from"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"cn")),(0,a.kt)("td",{parentName:"tr",align:null},"Common name"),(0,a.kt)("td",{parentName:"tr",align:null},"User's name")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"uid")),(0,a.kt)("td",{parentName:"tr",align:null},"User ID"),(0,a.kt)("td",{parentName:"tr",align:null},"User's unique identifier")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"homeDirectory")),(0,a.kt)("td",{parentName:"tr",align:null},"Home directory path"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"/home/{username}"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"mail")),(0,a.kt)("td",{parentName:"tr",align:null},"Email address"),(0,a.kt)("td",{parentName:"tr",align:null},"User's email")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"mobile")),(0,a.kt)("td",{parentName:"tr",align:null},"Mobile phone number"),(0,a.kt)("td",{parentName:"tr",align:null},"User's phone")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"sn")),(0,a.kt)("td",{parentName:"tr",align:null},"Surname (last name)"),(0,a.kt)("td",{parentName:"tr",align:null},"User's last name")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"givenName")),(0,a.kt)("td",{parentName:"tr",align:null},"Given name (first name)"),(0,a.kt)("td",{parentName:"tr",align:null},"User's first name")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"memberOf")),(0,a.kt)("td",{parentName:"tr",align:null},"Group memberships"),(0,a.kt)("td",{parentName:"tr",align:null},"User's groups")))),(0,a.kt)("h3",{id:"supported-rfc-style-features"},"Supported RFC-Style Features"),(0,a.kt)("h4",{id:"partial-root-dse-query-support"},"Partial Root DSE Query Support"),(0,a.kt)("p",null,'The Root DSE (baseDN="") provides directory capabilities.'),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Query namingContexts (organization list): ",(0,a.kt)("inlineCode",{parentName:"p"},'ldapsearch -x -H ldap://<casdoor-host>:389 -D "cn=admin,ou=built-in" -w <passwd> -b "" -s base "(objectClass=*)" namingContexts'),(0,a.kt)("br",{parentName:"p"}),"\n","Returns visible organization DNs.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Query subschemaSubentry: ",(0,a.kt)("inlineCode",{parentName:"p"},'ldapsearch -x -H ldap://<casdoor-host>:389 -D "cn=admin,ou=built-in" -w <passwd> -b "" -s base "(objectClass=*)" subschemaSubentry'),(0,a.kt)("br",{parentName:"p"}),"\n","Returns ",(0,a.kt)("inlineCode",{parentName:"p"},"subschemaSubentry: cn=Subschema"),"."))),(0,a.kt)("h4",{id:"schema-query-support"},"Schema Query Support"),(0,a.kt)("p",null,"Query objectClasses: ",(0,a.kt)("inlineCode",{parentName:"p"},'ldapsearch -x -H ldap://<casdoor-host>:389 -D "cn=admin,ou=built-in" -w <passwd> -b "cn=Subschema" -s base "(objectClass=*)" objectClasses'),(0,a.kt)("br",{parentName:"p"}),"\n","Returns definitions for posixAccount and posixGroup."),(0,a.kt)("h4",{id:"posix-filters"},"POSIX Filters"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"(objectClass=posixAccount)")," returns user list."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"(objectClass=posixGroup)")," returns group list under organization (e.g., ",(0,a.kt)("inlineCode",{parentName:"li"},'ldapsearch -x -H ldap://<casdoor-server>:389 -D "cn=admin,ou=built-in" -w <passwd> -b "ou=<org>" "(objectClass=posixGroup)"'),").")),(0,a.kt)("p",null,"Note: ",(0,a.kt)("inlineCode",{parentName:"p"},"(objectClass=posixGroup)")," Does not support combined searches like ",(0,a.kt)("inlineCode",{parentName:"p"},"(&(objectClass=posixGroup)(cn=<group>))"),". Please use ",(0,a.kt)("inlineCode",{parentName:"p"},"memberOf")," for searching members in a group."))}d.isMDXComponent=!0}}]);