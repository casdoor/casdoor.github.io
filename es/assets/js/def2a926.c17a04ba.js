"use strict";(self.webpackChunkcasdoor_website=self.webpackChunkcasdoor_website||[]).push([[6723],{3905:(e,a,t)=>{t.d(a,{Zo:()=>p,kt:()=>u});var n=t(67294);function r(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function o(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function i(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?o(Object(t),!0).forEach((function(a){r(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function l(e,a){if(null==e)return{};var t,n,r=function(e,a){if(null==e)return{};var t,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)t=o[n],a.indexOf(t)>=0||(r[t]=e[t]);return r}(e,a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)t=o[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var c=n.createContext({}),s=function(e){var a=n.useContext(c),t=a;return e&&(t="function"==typeof e?e(a):i(i({},a),e)),t},p=function(e){var a=s(e.components);return n.createElement(c.Provider,{value:a},e.children)},d={inlineCode:"code",wrapper:function(e){var a=e.children;return n.createElement(n.Fragment,{},a)}},m=n.forwardRef((function(e,a){var t=e.components,r=e.mdxType,o=e.originalType,c=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),m=s(t),u=r,k=m["".concat(c,".").concat(u)]||m[u]||d[u]||o;return t?n.createElement(k,i(i({ref:a},p),{},{components:t})):n.createElement(k,i({ref:a},p))}));function u(e,a){var t=arguments,r=a&&a.mdxType;if("string"==typeof e||r){var o=t.length,i=new Array(o);i[0]=m;var l={};for(var c in a)hasOwnProperty.call(a,c)&&(l[c]=a[c]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var s=2;s<o;s++)i[s]=t[s];return n.createElement.apply(null,i)}return n.createElement.apply(null,t)}m.displayName="MDXCreateElement"},69412:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>c,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>l,toc:()=>s});var n=t(87462),r=(t(67294),t(3905));const o={title:"Cliente VPN de AWS",description:"Usando Casdoor como un IdP SAML",keywords:["SAML","IdP"],authors:["UsherFall"]},i=void 0,l={unversionedId:"how-to-connect/saml/aws",id:"how-to-connect/saml/aws",title:"Cliente VPN de AWS",description:"Usando Casdoor como un IdP SAML",source:"@site/i18n/es/docusaurus-plugin-content-docs/current/how-to-connect/saml/aws.md",sourceDirName:"how-to-connect/saml",slug:"/how-to-connect/saml/aws",permalink:"/es/docs/how-to-connect/saml/aws",draft:!1,editUrl:"https://github.com/casdoor/casdoor-website/edit/master/docs/how-to-connect/saml/aws.md",tags:[],version:"current",frontMatter:{title:"Cliente VPN de AWS",description:"Usando Casdoor como un IdP SAML",keywords:["SAML","IdP"],authors:["UsherFall"]},sidebar:"tutorialSidebar",previous:{title:"Visi\xf3n general",permalink:"/es/docs/how-to-connect/saml/overview"},next:{title:"Keycloak",permalink:"/es/docs/how-to-connect/saml/keycloak"}},c={},s=[{value:"Casdoor como un IdP SAML en Cliente VPN de AWS",id:"casdoor-como-un-idp-saml-en-cliente-vpn-de-aws",level:2},{value:"Prerrequisitos",id:"prerrequisitos",level:2},{value:"Configurar Aplicaci\xf3n SAML",id:"configurar-aplicaci\xf3n-saml",level:2},{value:"Configurar AWS",id:"configurar-aws",level:2},{value:"Configurar Casdoor como un Proveedor de Identidad de AWS",id:"configurar-casdoor-como-un-proveedor-de-identidad-de-aws",level:3},{value:"Crear un Punto de Enlace de Cliente VPN de AWS",id:"crear-un-punto-de-enlace-de-cliente-vpn-de-aws",level:3},{value:"Asociar un Cliente VPN con una VPC Objetivo",id:"asociar-un-cliente-vpn-con-una-vpc-objetivo",level:3},{value:"Configurar Autorizaci\xf3n Espec\xedfica de Grupo SAML",id:"configurar-autorizaci\xf3n-espec\xedfica-de-grupo-saml",level:3},{value:"Conectar al Cliente VPN",id:"conectar-al-cliente-vpn",level:2}],p={toc:s};function d(e){let{components:a,...o}=e;return(0,r.kt)("wrapper",(0,n.Z)({},p,o,{components:a,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"casdoor-como-un-idp-saml-en-cliente-vpn-de-aws"},"Casdoor como un IdP SAML en Cliente VPN de AWS"),(0,r.kt)("p",null,"Esta gu\xeda te mostrar\xe1 c\xf3mo configurar Casdoor y Cliente VPN de AWS para a\xf1adir Casdoor como un IdP SAML en Cliente VPN de AWS."),(0,r.kt)("h2",{id:"prerrequisitos"},"Prerrequisitos"),(0,r.kt)("p",null,"Para completar esta configuraci\xf3n, necesitar\xe1s:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Una Cuenta de AWS con derechos administrativos para acceder a la configuraci\xf3n del proveedor de servicios.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Una VPC de Amazon con una instancia EC2"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://docs.aws.amazon.com/zh_cn/vpc/latest/userguide/vpc-getting-started.html"},"Configurando la VPC")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://docs.aws.amazon.com/zh_cn/AWSEC2/latest/UserGuide/EC2_GetStarted.html"},"Lanzando una instancia EC2"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"En el Grupo de Seguridad de la instancia, permite tr\xe1fico ICMP desde el rango CIDR de la VPC - esto es necesario para pruebas."))))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Un certificado privado importado en ",(0,r.kt)("a",{parentName:"p",href:"https://aws.amazon.com/cn/certificate-manager/"},"AWS Certificate Manager (ACM)")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://docs.aws.amazon.com/zh_cn/vpn/latest/clientvpn-admin/what-is.html"},"Generando e importando un certificado a ACM")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Un sistema Windows o Mac ejecutando el \xfaltimo software de Cliente VPN de AWS."),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://aws.amazon.com/cn/vpn/client-vpn-download/"},"Descargar el software"))))),(0,r.kt)("h2",{id:"configurar-aplicaci\xf3n-saml"},"Configurar Aplicaci\xf3n SAML"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"En la Aplicaci\xf3n Casdoor, establece la ",(0,r.kt)("inlineCode",{parentName:"li"},"URL de Redirecci\xf3n")," a ",(0,r.kt)("inlineCode",{parentName:"li"},"urn:amazon:webservices:clientvpn"),".")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"saml_aws_redirect_url.png",src:t(29984).Z,width:"1676",height:"1144"})),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Establece la ",(0,r.kt)("inlineCode",{parentName:"li"},"URL de respuesta SAML")," a ",(0,r.kt)("inlineCode",{parentName:"li"},"http://127.0.0.1:35001"),".")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"saml_aws_reply_url.png",src:t(44307).Z,width:"1506",height:"840"})),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Guarda el contenido en los ",(0,r.kt)("inlineCode",{parentName:"li"},"Metadatos SAML")," como un archivo XML.")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"saml_aws_metadata.png",src:t(96587).Z,width:"2780",height:"748"})),(0,r.kt)("h2",{id:"configurar-aws"},"Configurar AWS"),(0,r.kt)("h3",{id:"configurar-casdoor-como-un-proveedor-de-identidad-de-aws"},"Configurar Casdoor como un Proveedor de Identidad de AWS"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Abre la consola IAM y selecciona ",(0,r.kt)("strong",{parentName:"p"},"Proveedores de identidad")," desde la barra de navegaci\xf3n.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Haz clic en ",(0,r.kt)("strong",{parentName:"p"},"Crear un Proveedor"),".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Especifica SAML para el Tipo de Proveedor, a\xf1ade un nombre \xfanico para este proveedor y sube el documento de metadatos - el mismo archivo que guardaste de la Aplicaci\xf3n Casdoor en la secci\xf3n anterior.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Haz clic en ",(0,r.kt)("strong",{parentName:"p"},"Siguiente Paso"),". En la siguiente pantalla, haz clic en ",(0,r.kt)("strong",{parentName:"p"},"Crear"),"."))),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"saml_aws_create.png",src:t(89004).Z,width:"2720",height:"1206"})),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"saml_aws_choose_metadata.png",src:t(26080).Z,width:"1810",height:"1104"})),(0,r.kt)("h3",{id:"crear-un-punto-de-enlace-de-cliente-vpn-de-aws"},"Crear un Punto de Enlace de Cliente VPN de AWS"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Abre la consola de Amazon VPC en una Regi\xf3n de AWS de tu elecci\xf3n.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"En la navegaci\xf3n lateral izquierda, selecciona ",(0,r.kt)("strong",{parentName:"p"},"Puntos de Enlace de Cliente VPN")," bajo ",(0,r.kt)("strong",{parentName:"p"},"Red Privada Virtual (VPN)"),".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Haz clic en ",(0,r.kt)("strong",{parentName:"p"},"Crear Punto de Enlace de Cliente VPN"),".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Introduce el rango IP para tus usuarios remotos en el campo ",(0,r.kt)("strong",{parentName:"p"},"CIDR IPv4 del Cliente")," para asignar un rango IP.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Para ",(0,r.kt)("strong",{parentName:"p"},"ARN del Certificado del Servidor"),", selecciona el certificado que creaste.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Para Opciones de Autenticaci\xf3n, selecciona ",(0,r.kt)("strong",{parentName:"p"},"Usar autenticaci\xf3n basada en usuario"),", luego ",(0,r.kt)("strong",{parentName:"p"},"Autenticaci\xf3n federada"),".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Para ",(0,r.kt)("strong",{parentName:"p"},"ARN del proveedor SAML"),", selecciona el proveedor de identidad que creaste.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Haz clic en ",(0,r.kt)("strong",{parentName:"p"},"Crear Punto de Enlace de Cliente VPN"),"."))),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"saml_aws_vpn_endpoint.png",src:t(23539).Z,width:"2800",height:"704"})),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"saml_aws_create_vpn.png",src:t(81674).Z,width:"1596",height:"1232"})),(0,r.kt)("h3",{id:"asociar-un-cliente-vpn-con-una-vpc-objetivo"},"Asociar un Cliente VPN con una VPC Objetivo"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Selecciona ",(0,r.kt)("strong",{parentName:"p"},"Asociaciones de red objetivo")," en las opciones de Cliente VPN, luego haz clic en ",(0,r.kt)("strong",{parentName:"p"},"Asociar red objetivo"),".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Del men\xfa desplegable, selecciona la VPC objetivo y la subred con la que quieres asociar tu punto de enlace."))),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"saml_aws_target_network.png",src:t(21010).Z,width:"2792",height:"1226"})),(0,r.kt)("h3",{id:"configurar-autorizaci\xf3n-espec\xedfica-de-grupo-saml"},"Configurar Autorizaci\xf3n Espec\xedfica de Grupo SAML"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Elige la pesta\xf1a ",(0,r.kt)("strong",{parentName:"p"},"Reglas de Autorizaci\xf3n")," en tus opciones de Cliente VPN y haz clic en ",(0,r.kt)("strong",{parentName:"p"},"Agregar Regla de Autorizaci\xf3n"),".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Para la red de destino a habilitar, especifica la direcci\xf3n IP de tu instancia EC2 creada en los prerrequisitos. Por ejemplo, ",(0,r.kt)("inlineCode",{parentName:"p"},"172.31.16.0/20"),".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Bajo Conceder acceso a, selecciona ",(0,r.kt)("strong",{parentName:"p"},"Permitir acceso a usuarios en un grupo de acceso espec\xedfico"),". Por ejemplo, ",(0,r.kt)("inlineCode",{parentName:"p"},"casdoor"),".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Proporciona una descripci\xf3n opcional y haz clic en ",(0,r.kt)("strong",{parentName:"p"},"Agregar regla de autorizaci\xf3n"),"."))),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"saml_aws_rule.png",src:t(60420).Z,width:"1636",height:"1228"})),(0,r.kt)("h2",{id:"conectar-al-cliente-vpn"},"Conectar al Cliente VPN"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Selecciona el punto de enlace de Cliente VPN que acabas de crear. Ahora deber\xeda estar en estado Disponible.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Haz clic en ",(0,r.kt)("strong",{parentName:"p"},"Descargar Configuraci\xf3n del Cliente")," para descargar el perfil de configuraci\xf3n a tu escritorio.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Abre la aplicaci\xf3n de escritorio de Cliente VPN de AWS en tu m\xe1quina.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"En el men\xfa superior, selecciona Archivo y Gestionar Perfiles.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Haz clic en Agregar Perfil y se\xf1ala al archivo recientemente descargado.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Ahora deber\xedas ver el perfil en la lista en el software de Cliente VPN de AWS. Sel\xe9ctalo y haz clic en Conectar."))),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"saml_aws_download.png",src:t(19303).Z,width:"2762",height:"1202"})),(0,r.kt)("video",{src:"/video/saml_aws.mp4",controls:"controls",width:"100%"}))}d.isMDXComponent=!0},26080:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/saml_aws_choose_metadata-03a549be89dc751e9fd2d7010b3c1e64.png"},89004:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/saml_aws_create-7ba7254466b4227d6e54ef961afa667d.png"},81674:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/saml_aws_create_vpn-d8bbc595d25d862d98c407867d78a5b9.png"},19303:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/saml_aws_download-90aa0d174201c9b1f5dd07dfaeffc2ac.png"},96587:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/saml_aws_metadata-3e50a3c4d4eb20b91f65e4360bc24f1b.png"},29984:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/saml_aws_redirect_url-0f2682850b9a51fec5b58831f4f91566.png"},44307:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/saml_aws_reply_url-bdeed2e8e71987a8378c75016fec2b0d.png"},60420:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/saml_aws_rule-92a9e746b662c901dab47f7f80949371.png"},21010:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/saml_aws_target_network-f29fac01d7049a42983061212ba83ef7.png"},23539:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/saml_aws_vpn_endpoint-8c18603d3d8947a56ccbbb4773450715.png"}}]);